{"version":3,"file":"app.bundle.js","mappings":"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IA;AACA;AAYA;AAEA;AAGA;AAEA;;AACA;AACA;AAEA;AAEA;;AACA;AAEA;;AACA;AAKA;AAGA;AAEA;AACA;AAGA;;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;;AACA;AAEA;AAuBA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAYA;AAkBA;AAEA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAaA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;;;;;;;;;;;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACnSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;UCnSA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WC5BA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEhDA;UACA;UACA;UACA;UACA","sources":["webpack://template-feo-react-babel/./src/app/AppTypes.ts","webpack://template-feo-react-babel/./src/app/AppointmentController.ts","webpack://template-feo-react-babel/./src/app/Controller.ts","webpack://template-feo-react-babel/./src/app/EqualityFunctions.ts","webpack://template-feo-react-babel/./src/app/SocketListenerDelegate.ts","webpack://template-feo-react-babel/./src/App.tsx","webpack://template-feo-react-babel/../../src/framework/CommonTypes.ts","webpack://template-feo-react-babel/../../../src/framework/jsx/JSXParser.ts","webpack://template-feo-react-babel/../../../src/framework/model/BasicFieldOperations.ts","webpack://template-feo-react-babel/../../../src/framework/model/BasicObjectDefinitionFactory.ts","webpack://template-feo-react-babel/../../../src/framework/model/DataObjectController.ts","webpack://template-feo-react-babel/../../../src/framework/model/DataObjectTypeDefs.ts","webpack://template-feo-react-babel/../../../src/framework/model/ObjectDefinitionRegistry.ts","webpack://template-feo-react-babel/../../../src/framework/network/ApiUtil.ts","webpack://template-feo-react-babel/../../../src/framework/network/CallbackRegistry.ts","webpack://template-feo-react-babel/../../../src/framework/network/DownloadManager.ts","webpack://template-feo-react-babel/../../../src/framework/network/OfflineManager.ts","webpack://template-feo-react-babel/../../../src/framework/network/Poller.ts","webpack://template-feo-react-babel/../../../src/framework/network/Types.ts","webpack://template-feo-react-babel/../../../src/framework/notification/BootstrapNotification.ts","webpack://template-feo-react-babel/../../../src/framework/notification/Notification.ts","webpack://template-feo-react-babel/../../../src/framework/notification/NotificationFactory.ts","webpack://template-feo-react-babel/../../../src/framework/notification/NotificationManager.ts","webpack://template-feo-react-babel/../../../src/framework/security/SecurityManager.ts","webpack://template-feo-react-babel/../../../src/framework/socket/ChatManager.ts","webpack://template-feo-react-babel/../../../src/framework/socket/NotificationController.ts","webpack://template-feo-react-babel/../../../src/framework/socket/SocketManager.ts","webpack://template-feo-react-babel/../../../src/framework/socket/Types.ts","webpack://template-feo-react-babel/../../../src/framework/state/AbstractStateManager.ts","webpack://template-feo-react-babel/../../../src/framework/state/AggregateStateManager.ts","webpack://template-feo-react-babel/../../../src/framework/state/AsyncStateManagerWrapper.ts","webpack://template-feo-react-babel/../../../src/framework/state/BrowserStorageStateManager.ts","webpack://template-feo-react-babel/../../../src/framework/state/EncryptedBrowserStorageStateManager.ts","webpack://template-feo-react-babel/../../../src/framework/state/EncryptedIndexedDBStateManager.ts","webpack://template-feo-react-babel/../../../src/framework/state/GraphQLApiStateManager.ts","webpack://template-feo-react-babel/../../../src/framework/state/IndexedDBStateManager.ts","webpack://template-feo-react-babel/../../../src/framework/state/MemoryBufferStateManager.ts","webpack://template-feo-react-babel/../../../src/framework/state/RESTApiStateManager.ts","webpack://template-feo-react-babel/../../../src/framework/state/StateChangedDelegate.ts","webpack://template-feo-react-babel/../../../src/framework/state/StateManager.ts","webpack://template-feo-react-babel/../../../src/framework/ui/ConfigurationTypes.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/alert/AlertListener.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/alert/AlertManager.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/chat/BlockedUserView.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/chat/ChatLogDetailView.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/chat/ChatLogsView.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/chat/ChatRoomsSidebar.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/chat/ChatTypes.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/chat/FavouriteUserView.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/chat/UserSearchSidebar.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/chat/UserSearchView.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/container/SidebarViewContainer.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/context/ContextualInformationHelper.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/form/AbstractForm.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/form/BasicFormImplementation.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/form/FormListener.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/form/FormUITypeDefs.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/event-handlers/EditingEventListener.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/event-handlers/RenderingEventListener.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/event-handlers/ValidationEventHandler.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/factory/FieldInputElementFactory.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/factory/FormElementFactory.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/field/AbstractField.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/field/InputField.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/field/RadioButtonGroupField.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/field/SelectField.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/field/TextAreaField.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/validation/ValidationManager.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/form/validation/ValidationTypeDefs.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/helper/BootstrapFormConfigHelper.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/helper/BootstrapTableConfigHelper.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/helper/LimitedChoiceTextRenderer.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/helper/LinkedCollectionDetailController.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/helper/RBGFieldOperations.ts","webpack://template-feo-react-babel/../../../../src/framework/ui/helper/SimpleValueDataSource.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/delegate/CollectionViewEventHandlerDelegate.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/delegate/CollectionViewEventHandlerDelegateUsingContext.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/delegate/CollectionViewListenerForwarder.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/delegate/DetailViewListenerForwarder.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/delegate/ViewListenerForwarder.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/implementation/AbstractCollectionView.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/implementation/AbstractStatefulCollectionView.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/implementation/AbstractView.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/implementation/DefaultPermissionChecker.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/implementation/DetailViewImplementation.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/renderer/CarouselViewRenderer.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/renderer/CarouselViewRendererUsingContext.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/renderer/FormDetailViewRenderer.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/renderer/ListViewRenderer.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/renderer/ListViewRendererUsingContext.ts","webpack://template-feo-react-babel/../../../../../src/framework/ui/view/renderer/TabularViewRendererUsingContext.ts","webpack://template-feo-react-babel/../../../src/framework/util/BrowserUtil.ts","webpack://template-feo-react-babel/../../../src/framework/util/EqualityFunctions.ts","webpack://template-feo-react-babel/../src/index.ts","webpack://template-feo-react-babel//Users/jimsharples/Development/patient-booking-system/frontend/node_modules/moment/locale|sync|/^\\.\\/.*$/","webpack://template-feo-react-babel//Users/jimsharples/Development/ui-framework/node_modules/moment/locale|sync|/^\\.\\/.*$/","webpack://template-feo-react-babel/webpack/bootstrap","webpack://template-feo-react-babel/webpack/runtime/chunk loaded","webpack://template-feo-react-babel/webpack/runtime/compat get default export","webpack://template-feo-react-babel/webpack/runtime/define property getters","webpack://template-feo-react-babel/webpack/runtime/hasOwnProperty shorthand","webpack://template-feo-react-babel/webpack/runtime/make namespace object","webpack://template-feo-react-babel/webpack/runtime/node module decorator","webpack://template-feo-react-babel/webpack/runtime/jsonp chunk loading","webpack://template-feo-react-babel/webpack/before-startup","webpack://template-feo-react-babel/webpack/startup","webpack://template-feo-react-babel/webpack/after-startup"],"sourcesContent":["import {SidebarLocation, SidebarPrefs} from \"ui-framework-jps\";\n\nexport enum Decorator {\n    Incomplete,\n    Complete,\n    Persisted,\n    PersistedLocally = 3\n}\n\nexport const STATE_NAMES = {\n    users: 'user',\n    chatLogs: 'chatLog',\n    exerciseTypes: 'exerciseType',\n    workouts: 'workout',\n    recentUserSearches: 'recentUserSearch',\n    patientSearch: 'fastSearchNames',\n    recentPatientSearches: 'recentPatientSearches',\n    appointments: 'appointment',\n    appointmentTypes: 'appointmentType',\n    clinicConfig:'clinicConfig'\n}\n\nexport const API_Config = {\n    login: '/login',\n    graphQL: '/graphQL',\n    users: '/api/users',\n    clinicConfig: '/api/clinic-config'\n};\n\nexport const NAVIGATION = {\n    showMyWorkouts: 'navigationItemMyWorkouts',\n    userSearchId: 'navigationItemUserSearch',\n    exerciseTypesId: 'navigationItemExerciseTypes',\n    chatId: 'navigationItemChat',\n    workoutSummary: 'navigationItemWorkoutSummary',\n    currentWorkout: 'navigationItemCurrentWorkout',\n    logout: 'navigationItemLogout'\n}\n\nexport const DRAGGABLE = {\n    typeUser: 'user',\n    typeExerciseType: 'exerciseType',\n    fromUserSearch: 'userSearch',\n    fromFavourites: 'favourites',\n    fromExerciseTypes: 'exerciseTypes',\n}\n\nexport const VIEW_NAME = {\n    blockedUsers: 'blockedUsers',\n    chatLog: 'chatLog',\n    chatLogs: 'chatLogs',\n    favouriteUsers: 'favouriteUsers',\n    exerciseTypes: 'exerciseTypes',\n    userSearch: 'userSearch',\n    workouts: 'workouts',\n    workoutSummary: 'workoutSummary',\n    exercises: 'exercises'\n}\n\nexport const VIEW_CONTAINER = {\n    exerciseTypeDetail: \"exerciseTypeDetail\",\n    currentWorkoutDetail: 'workoutDetail',\n    exerciseDropZone: 'exerciseDropZone',\n    calendarControl: 'calendarControl',\n    calendarDetail:'calendarDetail'\n}\n\nexport const BUTTON = {\n    createNewExerciseType: 'addNewExerciseType',\n    completeWorkout: 'completeWorkout'\n}\n\nexport const INPUT = {\n    workoutName: 'workoutName'\n}\n\nexport const CurrentWorkoutSidebarPrefs: SidebarPrefs = {\n    id: 'currentWorkoutSidebar',\n    expandedSize: '50%',\n    location: SidebarLocation.right\n}\n\nexport const CurrentWorkoutContainers = {\n    list: 'exercises',\n    detail: 'workoutDetail'\n}\n\nexport const ExerciseTypesSidebarPrefs: SidebarPrefs = {\n    id: 'exerciseTypesSidebar',\n    expandedSize: '50%',\n    location: SidebarLocation.left\n}\n\nexport const ExerciseTypesSidebarContainers = {\n    container: 'exerciseTypesContainer',\n}\n\nexport const  WorkoutSummarySidebarPrefs: SidebarPrefs = {\n    id: 'workoutSummarySidebar',\n    expandedSize: '100%',\n    location: SidebarLocation.bottom\n}\n\nexport const  WorkoutSummarySidebarContainers = {\n    container: 'workoutSummary',\n}\n\nexport enum Day {\n    Monday = 1,\n    Tuesday = 2,\n    Wednesday = 3,\n    Thursday = 4,\n    Friday = 5,\n    Saturday = 6,\n    Sunday = 7\n}\n\nexport type ClinicDailyPref = {\n    day:Day,\n    startTime:string,\n    endTime:string,\n    lunchStart:string,\n    lunchEnd:string\n}\n\nexport type ClinicPrefs = {\n    dailypref:ClinicDailyPref[],\n    timestep:number,\n}\n\n\n\n","import debug from \"debug\";\nimport {Datepicker, Eventcalendar} from \"@mobiscroll/javascript\";\nimport moment from \"moment\";\nimport {STATE_NAMES} from \"./AppTypes\";\nimport Controller from \"./Controller\";\n\n\n\n\nconst logger = debug('appointment-controller');\n\nexport class AppointmentController {\n    private static _instance: AppointmentController;\n\n    public static getInstance(): AppointmentController {\n        if (!(AppointmentController._instance)) {\n            AppointmentController._instance = new AppointmentController();\n        }\n        return AppointmentController._instance;\n    }\n\n    private datePicker:Datepicker|null = null;\n    private calendar:Eventcalendar|null = null;\n    private constructor() {\n        this.handleNewDatePicked = this.handleNewDatePicked.bind(this);\n        this.onPageLoading = this.onPageLoading.bind(this);\n        this.onAppointmentEditRequested = this.onAppointmentEditRequested.bind(this);\n        this.onAppointmentDeleting = this.onAppointmentDeleting.bind(this);\n        this.onAppointmentDeleted = this.onAppointmentDeleted.bind(this);\n        this.onAppointmentCreated = this.onAppointmentCreated.bind(this);\n        this.onAppointmentContext = this.onAppointmentContext.bind(this);\n        this.onAppointmentUpdated = this.onAppointmentUpdated.bind(this);\n    }\n\n    public handleNewDatePicked(event:any, inst:any):void {\n        logger(`Handling new date picked`);\n        logger(event);\n    }\n\n    public setViewObjects(datePicker:Datepicker,calendar:Eventcalendar):void {\n        this.datePicker = datePicker;\n        this.calendar = calendar;\n    }\n\n    protected getColourForAppointment(appointment:any) {\n        switch (appointment.type) {\n            // case AppointmentType.Urgent: {\n            //     return `rgba(200,100,10,50)`;\n            // }\n            default: {\n                return `rgba(10,100,100,50)`;\n            }\n        }\n    }\n\n    public onPageLoading(event:any,inst:any):void {\n        logger(event);\n        const today = parseInt(moment().format('YYYYMMDD'));\n        const loadDate = parseInt(moment(event.firstDay).format('YYYYMMDD'));\n        logger(`Need to load date ${loadDate}`);\n\n        let canEdit = (loadDate < today);\n\n        const appointments = Controller.getInstance().getStateManager().getStateByName(STATE_NAMES.appointments);\n        let results:any[] = [];\n        appointments.forEach((appointment:any) => {\n            if ((appointment.start === loadDate)) {\n                logger('Found appointment');\n                logger(appointment);\n\n                // convert the start and end time into the format for the calendar\n                const time = parseInt(appointment.time); // HHMMSS as a time\n                const duration = appointment.duration; // seconds\n\n                const startTimeHours = Math.floor(appointment.time/10000);\n                const startTimeMinutes = Math.floor((time - (startTimeHours*10000))/100);\n                const appointmentDuration = Math.floor(duration/60);\n\n                let endTimeHours = startTimeHours;\n                let endTimeMinutes = startTimeMinutes + appointmentDuration;\n\n                if (endTimeMinutes > 60) {\n                    endTimeMinutes -= 60;\n                    endTimeHours += 1; // 24 hour time\n                }\n\n                let timeString = `${endTimeHours}`;\n                if (endTimeHours < 10) timeString = '0' + timeString;\n                if (endTimeMinutes < 10) timeString += '0';\n                timeString += `${endTimeMinutes}`;\n\n                let result = {\n                    id: appointment._id,\n                    start:moment(`${loadDate}${appointment.time}`,'YYYYMMDDHHmmss'),\n                    end:moment(`${loadDate}${timeString}`,'YYYYMMDDHHmm'),\n                    title:appointment.name,\n                    color: this.getColourForAppointment(appointment),\n                    allDay:false,\n                    editable: canEdit,\n                    resource: appointment.provider\n                }\n                logger('Converted to event');\n                logger(result);\n                results.push(result);\n            }\n\n        });\n\n        inst.setEvents(results);\n\n\n    }\n\n    public onAppointmentEditRequested(event:any, inst:any):void {\n        logger(event);\n\n    }\n\n    public onAppointmentDeleting(event:any,inst:any):boolean {\n        logger(event);\n        return false;\n    }\n\n    public onAppointmentDeleted(event:any,inst:any):void {\n        logger(event);\n\n    }\n\n    public onAppointmentCreated(event:any, inst:any):void {\n        logger(event);\n\n    }\n\n    public onAppointmentContext(event:any, inst:any):void {\n\n        logger(event);\n    }\n\n    public onAppointmentUpdated(event:any,inst:any):void {\n\n        logger(event);\n    }\n\n}\n","import {\n    AggregateStateManager,\n    AsyncStateManagerWrapper,\n    BasicObjectDefinitionFactory,\n    ChatManager,\n    DataObjectController,\n    DataObjectDefinition,\n    DataObjectListener,\n    DownloadManager,\n    FieldDefinition,\n    FieldType,\n    GraphQLApiStateManager,\n    KeyType,\n    MemoryBufferStateManager,\n    NotificationController,\n    ObjectDefinitionRegistry,\n    RESTApiStateManager,\n    SimpleValueDataSource,\n    SocketManager,\n    StateChangeListener,\n    StateManager\n} from 'ui-framework-jps';\n\n\nimport debug from 'debug';\nimport SocketListenerDelegate from \"./SocketListenerDelegate\";\nimport {API_Config, STATE_NAMES} from \"./AppTypes\";\nimport {v4} from \"uuid\";\nimport {isSameMongo} from \"./EqualityFunctions\";\n\n\nconst cLogger = debug('controller-ts');\nconst cLoggerDetail = debug('controller-ts-detail');\n\nexport default class Controller implements StateChangeListener, DataObjectListener {\n    private static _instance: Controller;\n    protected applicationView: any;\n    protected clientSideStorage: any;\n    protected config: any;\n    // @ts-ignore\n    protected stateManager: StateManager;\n\n    private constructor() {\n    }\n\n    public static getInstance(): Controller {\n        if (!(Controller._instance)) {\n            Controller._instance = new Controller();\n        }\n        return Controller._instance;\n    }\n\n    connectToApplication(applicationView: any, clientSideStorage: any) {\n        this.applicationView = applicationView;\n        this.clientSideStorage = clientSideStorage;\n        // setup the API calls\n        let restSM = RESTApiStateManager.getInstance();\n        restSM.initialise([\n            {\n                stateName: STATE_NAMES.users,\n                serverURL: '',\n                api: API_Config.users,\n                isActive: true\n            },\n            {\n                stateName: STATE_NAMES.clinicConfig,\n                serverURL: '',\n                api: API_Config.clinicConfig,\n                isActive: true\n            },\n        ]);\n        let qlSM = GraphQLApiStateManager.getInstance();\n        qlSM.initialise([\n            {\n                stateName: STATE_NAMES.patientSearch,\n                serverURL: '',\n                apiURL: API_Config.graphQL,\n                apis: {\n                    findAll: 'query {getPatientSearchDetails {_id,identifiers { legacyId},flags {isInactive,hasWarnings},name {firstname,surname}}}',\n                    create: '',\n                    destroy: '',\n                    update: '',\n                    find: '',\n                },\n                data: {\n                    findAll: 'getPatientSearchDetails',\n                    create: '',\n                    destroy: '',\n                    update: '',\n                    find: ''\n                },\n                isActive: true,\n                idField: '_id'\n            },\n            {\n                stateName: STATE_NAMES.appointments,\n                serverURL: '',\n                apiURL: API_Config.graphQL,\n                apis: {\n                    findAll: 'query {getAppointments {_id,_patient, start, time, duration,createdBy,isDNA,isCancelled,provider,note,type,name}}',\n                    create: 'mutation createAppointment($data: AppointmentInput!){addAppointment(appt: $data) {_id,_patient, start, time, duration,createdBy,isDNA,isCancelled,provider,note,type,name }}',\n                    destroy: 'mutation deleteAppointment($identifier: String!){deleteAppointment(id: $identifier)}',\n                    update: 'mutation updateAppointment($data: AppointmentInput!){updateAppointment(appt: $data)}',\n                    find: '',\n                },\n                data: {\n                    findAll: 'getAppointments',\n                    create: 'addAppointment',\n                    destroy: 'deleteAppointment',\n                    update: 'updateAppointment',\n                    find: ''\n                },\n                isActive: true,\n                idField: '_id'\n            },\n            {\n                stateName: STATE_NAMES.appointmentTypes,\n                serverURL: '',\n                apiURL: API_Config.graphQL,\n                apis: {\n                    findAll: 'query {getAppointmentTypes {_id,name,colour}}',\n                    create: 'mutation createAppointmentType($data: AppointmentInput!){addAppointmentType(apptType: $data) {_id,name,colour}}',\n                    destroy: 'mutation deleteAppointmentType($identifier: String!){deleteAppointmentType(id: $identifier)}',\n                    update: 'mutation updateAppointmentType($data: AppointmentInput!){updateAppointmentType(apptType: $data)}',\n                    find: '',\n                },\n                data: {\n                    findAll: 'getAppointmentTypes',\n                    create: 'addAppointmentType',\n                    destroy: 'deleteAppointmentType',\n                    update: 'updateAppointmentType',\n                    find: ''\n                },\n                isActive: true,\n                idField: '_id'\n            },\n        ])\n\n\n        let aggregateSM = new AggregateStateManager(isSameMongo);\n        let memorySM = new MemoryBufferStateManager(isSameMongo);\n\n        let asyncREST = new AsyncStateManagerWrapper(aggregateSM, restSM, isSameMongo);\n        let asyncQL = new AsyncStateManagerWrapper(aggregateSM, qlSM, isSameMongo);\n\n        aggregateSM.addStateManager(memorySM, [], false);\n        aggregateSM.addStateManager(asyncREST, [STATE_NAMES.recentUserSearches, STATE_NAMES.appointments,STATE_NAMES.patientSearch,STATE_NAMES.recentPatientSearches,STATE_NAMES.clinicConfig], false);\n        aggregateSM.addStateManager(asyncQL, [STATE_NAMES.recentUserSearches, STATE_NAMES.users,STATE_NAMES.clinicConfig], false);\n        this.stateManager = aggregateSM;\n\n        // state listener\n        this.stateChanged = this.stateChanged.bind(this);\n        this.stateChangedItemAdded = this.stateChangedItemAdded.bind(this);\n        this.stateChangedItemRemoved = this.stateChangedItemRemoved.bind(this);\n        this.stateChangedItemUpdated = this.stateChangedItemUpdated.bind(this);\n\n        // data objects\n        this.setupDataObjectDefinitions();\n\n        return this;\n    }\n\n    /*\n        Get the base data for the application (users, entries)\n    */\n    public onDocumentLoaded(): void {\n        cLogger('Initialising data state');\n        // listen for socket events\n        let socketListerDelegate = new SocketListenerDelegate();\n        SocketManager.getInstance().setListener(socketListerDelegate);\n\n        // now that we have all the user we can setup the chat system but only if we are logged in\n        cLogger(`Setting up chat system for user ${this.getLoggedInUserId()}: ${this.getLoggedInUsername()}`);\n        if (this.getLoggedInUserId().trim().length > 0) {\n            // setup the chat system\n            let chatManager = ChatManager.getInstance(); // this connects the manager to the socket system\n\n            // setup the chat notification system\n            NotificationController.getInstance();\n            chatManager.setCurrentUser(this.getLoggedInUsername());\n\n            // let the application view know about message counts\n            chatManager.setUnreadCountListener(this.applicationView);\n\n            chatManager.login();\n\n            // load the users\n            this.getStateManager().getStateByName(STATE_NAMES.users);\n            this.getStateManager().getStateByName(STATE_NAMES.appointmentTypes);\n            this.getStateManager().getStateByName(STATE_NAMES.clinicConfig);\n            this.getStateManager().getStateByName(STATE_NAMES.patientSearch);\n            this.getStateManager().getStateByName(STATE_NAMES.appointments);\n\n            // apply any queued changes from being offline\n            DownloadManager.getInstance().processOfflineItems();\n        }\n\n    }\n\n    public getStateManager(): StateManager {\n        return this.stateManager;\n    }\n\n    public getListenerName(): string {\n        return 'Controller';\n    }\n\n    public isLoggedIn(): boolean {\n        let isLoggedIn = false;\n        try {\n            // @ts-ignore\n            if (loggedInUser) {\n                isLoggedIn = true;\n            }\n        } catch (error) {\n        }\n        return isLoggedIn;\n    }\n\n    public getLoggedInUserId(): string {\n        let result = '';\n        try {\n            // @ts-ignore\n            if (loggedInUser) {\n                // @ts-ignore\n                result = loggedInUser._id;\n            }\n        } catch (error) {\n        }\n        cLoggerDetail(`Logged in user id is ${result}`);\n        return result;\n    }\n\n    public getLoggedInUsername(): string {\n        let result = '';\n        try {\n            // @ts-ignore\n            if (loggedInUser) {\n                // @ts-ignore\n                result = loggedInUser.username;\n            }\n        } catch (error) {\n        }\n        cLoggerDetail(`Logged in user is ${result}`);\n        return result;\n    }\n\n    public handleMessage(message: string): void {\n        cLogger(message);\n    }\n\n    public getCurrentUser(): string {\n        return this.getLoggedInUserId();\n    }\n\n    stateChangedItemAdded(managerName: string, name: string, itemAdded: any): void {\n    }\n\n    stateChangedItemRemoved(managerName: string, name: string, itemRemoved: any): void {\n    }\n\n    stateChangedItemUpdated(managerName: string, name: string, itemUpdated: any, itemNewValue: any): void {\n    }\n\n    stateChanged(managerName: string, name: string, values: any) {\n    }\n\n    handleShowChat(roomName: string | null) {\n        this.applicationView.handleShowChat(roomName);\n    }\n\n    create(controller: DataObjectController, typeName: string, dataObj: any): void {\n        switch (typeName) {\n            case STATE_NAMES.exerciseTypes: {\n                cLogger(`Handling create new exercise type`);\n                cLoggerDetail(dataObj);\n                this.stateManager.addNewItemToState(typeName, dataObj, false);\n                break;\n            }\n        }\n    }\n\n    delete(controller: DataObjectController, typeName: string, dataObj: any): void {\n        switch (typeName) {\n            case STATE_NAMES.exerciseTypes: {\n                cLogger(`Handling delete exercise type - already managed by stateful collection view`);\n                cLoggerDetail(dataObj);\n                break;\n            }\n        }\n    }\n\n    update(controller: DataObjectController, typeName: string, dataObj: any): void {\n        switch (typeName) {\n            case STATE_NAMES.exerciseTypes: {\n                cLogger(`Handling update exercise type`);\n                cLoggerDetail(dataObj);\n                this.stateManager.updateItemInState(typeName, dataObj, false);\n                break;\n            }\n        }\n    }\n\n    addExerciseToCurrentWorkout(exerciseType: any): void {\n        let copyOfExercise = {...exerciseType};\n        copyOfExercise._id = v4(); // update the id to be unique for the workout\n        this.applicationView.addingExerciseToCurrentWorkout(copyOfExercise);\n    }\n\n    addWorkoutExercisesToCurrentWorkout(workout: any): void {\n        if (workout.exercises) {\n            workout.exercises.forEach((exercise: any) => {\n                this.addExerciseToCurrentWorkout(exercise);\n            });\n        }\n    }\n\n    private setupDataObjectDefinitions() {\n        // create the object definitions for the exercise type and workout\n        let exerciseTypeDefinition: DataObjectDefinition = ObjectDefinitionRegistry.getInstance().addDefinition(STATE_NAMES.exerciseTypes, 'Exercise', true, true, true, '_id');\n        BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(exerciseTypeDefinition, \"name\", \"Name\", FieldType.text, true, \"Exercise name\");\n        BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(exerciseTypeDefinition, \"type\", \"Type\", FieldType.limitedChoice, true, \"Choose cardio or strength\",\n            new SimpleValueDataSource([\n                {name: 'Cardio', value: 'cardio'},\n                {name: 'Strength', value: 'strength'}\n            ]));\n        BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(exerciseTypeDefinition, \"duration\", \"Duration\", FieldType.duration, true, \"Exercise time\");\n        BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(exerciseTypeDefinition, \"sets\", \"Sets\", FieldType.integer, false, \"Number of sets\");\n        BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(exerciseTypeDefinition, \"reps\", \"Repetitions\", FieldType.integer, false, \"Number of reps\");\n        BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(exerciseTypeDefinition, \"weight\", \"Weight\", FieldType.float, false, \"Weight used\");\n        BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(exerciseTypeDefinition, \"distance\", \"Distance\", FieldType.float, false, \"Distance travelled\");\n\n        cLogger(`Exercise type data object definition`);\n        cLogger(exerciseTypeDefinition);\n        cLoggerDetail(ObjectDefinitionRegistry.getInstance().findDefinition('exerciseType'));\n\n        let workoutDefinition: DataObjectDefinition = ObjectDefinitionRegistry.getInstance().addDefinition(STATE_NAMES.workouts, 'Workout', true, true, true, '_id');\n        BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(workoutDefinition, \"name\", \"Name\", FieldType.text, false, \"Give the workout a name\");\n        BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(workoutDefinition, \"completed\", \"Completed\", FieldType.boolean, true, \"Have completed the workout\");\n        let exercisesFieldDefinition: FieldDefinition = BasicObjectDefinitionFactory.getInstance().addStringFieldToObjDefinition(workoutDefinition, \"exercises\", \"Exercises\", FieldType.collection, true, \"Exercises in this workout\");\n        exercisesFieldDefinition.idType = KeyType.collection;\n        exercisesFieldDefinition.collectionOfDataObjectId = exerciseTypeDefinition.id;\n\n        cLogger(`Workout data object definition`);\n        cLogger(workoutDefinition);\n        cLoggerDetail(ObjectDefinitionRegistry.getInstance().findDefinition('workout'));\n\n\n    }\n\n    /*\n    *\n    * Simple Application state (URL, logged in user)\n    *\n     */\n    private getServerAPIURL(): string {\n        let result = \"\";\n        // @ts-ignore\n        if ((window.ENV) && (window.ENV.serverURL)) {\n            // @ts-ignore\n            result = window.ENV.serverURL;\n        }\n        return result;\n    }\n\n    filterResults(managerName: string, name: string, filterResults: any): void {\n    }\n\n}\n\n\n","\n\nexport function isSame(item1: any, item2: any): boolean {\n    return (item1.id === item2.id);\n}\n\nexport function isSameMongo(item1: any, item2: any): boolean {\n    return (item1._id === item2._id);\n}\n\n\nexport function isSameUsername(item1: any, item2: any): boolean {\n    return (item1.username === item2.username);\n}\n\nexport function isSameRoom(item1: any, item2: any): boolean {\n    return (item1.roomName === item2.roomName);\n}\n","import {\n    NotificationManager,\n    NotificationType,\n    SocketListener\n} from 'ui-framework-jps'\n\n\nimport debug from 'debug';\n\n\nimport Controller from \"./Controller\";\n\nimport {STATE_NAMES} from \"./AppTypes\";\n\nconst slLogger = debug('socket-listener');\n\nexport default class SocketListenerDelegate implements SocketListener {\n\n    public constructor() {\n    }\n\n    public handleDataChangedByAnotherUser(message: any) {\n        slLogger(`Handling data change ${message.type} on object type ${message.stateName} made by user ${message.user}`);\n        const changeUser = Controller.getInstance().getStateManager().findItemInState(STATE_NAMES.users, {_id: message.user});\n        let username = \"unknown\";\n        if (changeUser) {\n            username = changeUser.username;\n        }\n        slLogger(`Handling data change ${message.type} on object type ${message.stateName} made by user ${username}`);\n\n        let stateObj = message.data;\n        slLogger(stateObj);\n        // ok lets work out where this change belongs\n        try {\n            switch (message.type) {\n                case \"create\": {\n                    switch (message.stateName) {\n                        case STATE_NAMES.users: {\n                            Controller.getInstance().getStateManager().addNewItemToState(STATE_NAMES.users, stateObj, true);\n                            NotificationManager.getInstance().show(stateObj.username, `${stateObj.username} has just registered.`, NotificationType.info);\n                            break;\n                        }\n                        case STATE_NAMES.appointments: {\n                            Controller.getInstance().getStateManager().addNewItemToState(STATE_NAMES.appointments, stateObj, true);\n                            break;\n                        }\n                        case STATE_NAMES.appointmentTypes: {\n                            Controller.getInstance().getStateManager().addNewItemToState(STATE_NAMES.appointmentTypes, stateObj, true);\n                            break;\n                        }\n                    }\n                    break;\n                }\n                case \"update\": {\n                    switch (message.stateName) {\n                        case STATE_NAMES.appointmentTypes: {\n                            Controller.getInstance().getStateManager().updateItemInState(STATE_NAMES.appointmentTypes, stateObj, true);\n                            break;\n                        }\n                        case STATE_NAMES.appointments: {\n                            Controller.getInstance().getStateManager().updateItemInState(STATE_NAMES.appointments, stateObj, true);\n                            break;\n                        }\n                    }\n                    break;\n                }\n                case \"delete\": {\n                    switch (message.stateName) {\n                        case STATE_NAMES.appointmentTypes: {\n                            Controller.getInstance().getStateManager().removeItemFromState(STATE_NAMES.appointmentTypes, stateObj, true);\n                            break;\n                        }\n                        case STATE_NAMES.appointments: {\n                            Controller.getInstance().getStateManager().removeItemFromState(STATE_NAMES.appointments, stateObj, true);\n                            break;\n                        }\n                    }\n                    break;\n                }\n            }\n        } catch (err) {\n            slLogger(err);\n        }\n\n    }\n\n    handleMessage(message: string): void {\n        slLogger(`Received message: ${message}`);\n    }\n\n    getCurrentUser(): string {\n        return Controller.getInstance().getLoggedInUserId();\n    }\n\n}\n","//localStorage.debug = 'linked-controller api-ts exercise-types-view app controller-ts controller-ts-detail api-ts socket-ts user-search user-search-detail list-view-renderer';\n//localStorage.debug = 'collection-view-ts collection-view-ts-detail form-detail-view-renderer linked-controller linked-controller-detail exercise-types-view app validation-manager-rule-failure validation-manager';\n//localStorage.debug = 'validation-manager validation-manager-rule-failure abstract-form-detail-validation';\n\nimport {\n    ChatLogsView,\n    ChatRoomsSidebar,\n    ContextualInformationHelper,\n    SecurityManager,\n    UnreadMessageCountListener,\n    UserSearchSidebar\n} from 'ui-framework-jps';\n\n\nimport debug from 'debug';\nimport Controller from './app/Controller';\n\nimport {\n    API_Config,\n    NAVIGATION,\n    VIEW_CONTAINER,\n} from \"./app/AppTypes\";\nimport React, {ReactNode} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {setOptions, Datepicker, datepicker, eventcalendar, Eventcalendar} from \"@mobiscroll/javascript\";\nimport {AppointmentController} from \"./app/AppointmentController\";\nimport moment from 'moment';\n\n\n\n\n\n\nconst logger = debug('app');\n\nexport default class App extends React.Component implements UnreadMessageCountListener {\n\n    // @ts-ignore\n    private userSearchSidebar: UserSearchSidebar;\n    // @ts-ignore\n    private chatSidebar: ChatRoomsSidebar;\n    // @ts-ignore\n    private chatView: ChatLogsView;\n\n    private thisEl: HTMLDivElement | null = null;\n    private chatNavigationItem: HTMLAnchorElement | null = null;\n\n    private datePicker:Datepicker|null = null;\n    private calendar:Eventcalendar|null = null;\n\n    public constructor() {\n        // @ts-ignore\n        super();\n        // event handlers\n        this.handleShowUserSearch = this.handleShowUserSearch.bind(this);\n        this.handleShowChat = this.handleShowChat.bind(this);\n\n        Controller.getInstance().connectToApplication(this, window.localStorage);\n    }\n\n    render(): ReactNode {\n        logger(\"Rendering App\");\n        return (\n            <div></div>\n        )\n    }\n\n\n\n\n    componentDidMount(): void {\n        logger('component Did Mount');\n        logger('document loaded');\n        // @ts-ignore\n        this.thisEl = document.getElementById('root');\n\n        this.setupUserSearchViews();\n        this.setupChatViews();\n        this.setupNavigationItemHandling();\n\n        // setup the scheduler\n        // @ts-ignore\n        this.datePicker = datepicker(document.getElementById(VIEW_CONTAINER.calendarControl),{\n            controls: ['calendar'],\n            display: \"inline\",\n            dateFormat: 'YYYYMMDD',\n            dayNamesMin: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n            showWeekNumbers:true,\n            onChange: (event:any, inst:any) => {\n                this.calendar?.navigate(event.value);\n                AppointmentController.getInstance().handleNewDatePicked(event.value, inst)\n            }\n        });\n\n\n        // @ts-ignore\n        this.calendar = eventcalendar(document.getElementById(VIEW_CONTAINER.calendarDetail),{\n            clickToCreate:'double',\n            dragTimeStep:5,\n            dragToCreate:true,\n            dragToMove:true,\n            dragToResize:true,\n            min:moment().subtract(3,\"months\"),\n            controls:['calendar'],\n            showControls:true,\n            view: {\n                schedule: {\n                    type:'day',\n                    startDay:1,\n                    endDay:5,\n                    startTime:'09:00',\n                    endTime:'16:00',\n                    timeCellStep:10,\n                    timeLabelStep:60\n                }\n            },\n            invalidateEvent:'strict',\n            invalid: [{\n                recurring: {\n                    repeat:'weekly',\n                    weekDays:'SA,SU'\n                }\n                },\n                {\n                    start:'12:15',\n                    end:'16:00',\n                    title:'Close Early',\n                    recurring: {\n                        repeat:'weekly',\n                        weekDays:'FR'\n                    }\n                },\n                {\n                    start:'12:00',\n                    end:'13:00',\n                    title:'Lunch Break',\n                    recurring: {\n                        repeat: 'weekly',\n                        weekDays: 'MO,TU,WE,TH'\n                    }\n                }\n            ],\n            onSelectedDateChange:(event: any, inst: any) => {\n                AppointmentController.getInstance().handleNewDatePicked(event.date,inst);\n                this.datePicker?.setVal(event.date);\n            },\n            onPageLoading:(event: any, inst: any) => {\n                AppointmentController.getInstance().onPageLoading(event,inst);\n            },\n            onEventCreated:(event: any, inst: any) => {\n                AppointmentController.getInstance().onAppointmentCreated(event,inst);\n            },\n            onEventDelete:(event: any, inst: any) => {\n                AppointmentController.getInstance().onAppointmentDeleting(event,inst);\n            },\n            onEventDeleted:(event: any, inst: any) => {\n                AppointmentController.getInstance().onAppointmentDeleted(event,inst);\n            },\n            onEventRightClick:(event: any, inst: any) => {\n                AppointmentController.getInstance().onAppointmentContext(event,inst);\n            },\n            onEventUpdated:(event: any, inst: any) => {\n                AppointmentController.getInstance().onAppointmentUpdated(event,inst);\n            },\n            onEventDoubleClick:(event: any, inst: any) => {\n                AppointmentController.getInstance().onAppointmentEditRequested(event,inst);\n            },\n\n\n        });\n\n        if (this.calendar && this.datePicker) AppointmentController.getInstance().setViewObjects(this.datePicker,this.calendar);\n\n\n\n        ContextualInformationHelper.getInstance().onDocumentLoaded();\n        SecurityManager.getInstance().onDocumentLoaded(NAVIGATION.logout);\n        Controller.getInstance().onDocumentLoaded();\n\n    }\n\n    getCurrentUser() {\n        return Controller.getInstance().getLoggedInUserId();\n    }\n\n    hideAllSideBars() {\n        this.chatSidebar.eventHide(null);\n        this.userSearchSidebar.eventHide(null);\n    }\n\n    handleShowUserSearch(event: Event) {\n        logger('Handling Show User Search');\n        event.preventDefault();\n        //this.hideAllSideBars();\n        // prevent anything from happening if we are not logged in\n        if (!Controller.getInstance().isLoggedIn()) {\n            // @ts-ignore\n            window.location.href = API_Config.login;\n            return;\n        }\n        this.userSearchSidebar.eventShow(event);\n    }\n\n\n    handleShowChat(roomName: string | null) {\n        logger('Handling Show Chat');\n        // prevent anything from happening if we are not logged in\n        if (!Controller.getInstance().isLoggedIn()) {\n            // @ts-ignore\n            window.location.href = API_Config.login;\n            return;\n        }\n        this.chatSidebar.eventShow(null);\n        if (roomName) {\n            this.chatView.selectChatRoom(roomName);\n        }\n    }\n\n    countChanged(newCount: number): void {\n        //\n        let buffer = 'Chat <i class=\"fas fa-inbox\"></i>';\n        if (newCount > 0) {\n            buffer += ` <span class=\"badge badge-pill badge-primary\">&nbsp;${newCount}&nbsp;</span>`;\n        }\n        if (this.chatNavigationItem) this.chatNavigationItem.innerHTML = `${buffer}`;\n    }\n\n\n    private setupNavigationItemHandling() {\n        // @ts-ignore\n        document.getElementById(NAVIGATION.userSearchId).addEventListener('click', this.handleShowUserSearch);\n        // @ts-ignore\n        this.chatNavigationItem = document.getElementById(NAVIGATION.chatId);\n\n        // @ts-ignore\n        this.chatNavigationItem.addEventListener('click', this.handleShowChat);\n    }\n\n    private setupUserSearchViews() {\n        // add the subviews for the user search\n        this.userSearchSidebar = UserSearchSidebar.getInstance(Controller.getInstance().getStateManager());\n        this.userSearchSidebar.onDocumentLoaded();\n    }\n\n    private setupChatViews() {\n        // add the views to the chat side bar\n        this.chatSidebar = ChatRoomsSidebar.getInstance(Controller.getInstance().getStateManager());\n        this.chatSidebar.onDocumentLoaded();\n    }\n}\n\nlocalStorage.debug = '*';\nlocalStorage.plugin = 'chat';\n\ndebug.log = console.info.bind(console);\n\n$(function () {\n\n\n\n    setOptions( {\n        theme: 'ios',\n        themeVariant: 'light'\n    });\n    //datepicker(\"#calendarControl\",{display:'inline'});\n    // @ts-ignore\n    const element = <App className=\"container-fluid justify-content-around\"/>;\n    ReactDOM.render(element, document.getElementById('root'));\n\n});\n","export var ComparisonType;\n(function (ComparisonType) {\n    ComparisonType[ComparisonType[\"equals\"] = 0] = \"equals\";\n    ComparisonType[ComparisonType[\"lessThan\"] = 1] = \"lessThan\";\n    ComparisonType[ComparisonType[\"lessThanEqual\"] = 2] = \"lessThanEqual\";\n    ComparisonType[ComparisonType[\"greaterThan\"] = 3] = \"greaterThan\";\n    ComparisonType[ComparisonType[\"greaterThanEqual\"] = 4] = \"greaterThanEqual\";\n    ComparisonType[ComparisonType[\"isNull\"] = 5] = \"isNull\";\n    ComparisonType[ComparisonType[\"isNotNull\"] = 6] = \"isNotNull\";\n    ComparisonType[ComparisonType[\"hasValue\"] = 7] = \"hasValue\";\n})(ComparisonType || (ComparisonType = {}));\n//# sourceMappingURL=CommonTypes.js.map","export function jsxCreateElement(tag, props, ...children) {\n    if (typeof tag === \"function\")\n        return tag(props, ...children);\n    const element = document.createElement(tag);\n    Object.entries(props || {}).forEach(([name, value]) => {\n        if (name.startsWith(\"on\") && name.toLowerCase() in window)\n            element.addEventListener(name.toLowerCase().substr(2), value);\n        else {\n            if (name === 'className')\n                name = 'class';\n            // @ts-ignore\n            element.setAttribute(name, value.toString());\n        }\n    });\n    children.forEach((child) => {\n        jsxAppendChild(element, child);\n    });\n    return element;\n}\nfunction jsxAppendChild(parent, child) {\n    if (Array.isArray(child))\n        child.forEach(nestedChild => jsxAppendChild(parent, nestedChild));\n    else\n        parent.appendChild(child.nodeType ? child : document.createTextNode(child));\n}\nexport function jsxCreateFragment(props, ...children) {\n    return children;\n}\n//# sourceMappingURL=JSXParser.js.map","import moment from \"moment\";\nimport { v4 } from 'uuid';\nimport { FieldType } from \"./DataObjectTypeDefs\";\nimport debug from 'debug';\nimport { KeyType } from \"../ui/ConfigurationTypes\";\nimport { SecurityManager } from \"../security/SecurityManager\";\nconst flogger = debug('basic-field-operations-formatter');\nconst vlogger = debug('basic-field-operations-validator');\nconst glogger = debug('basic-field-operations-generator');\nconst rlogger = debug('basic-field-operations-renderer');\nexport class BasicFieldOperations {\n    constructor() {\n        this.previousFieldValues = [];\n    }\n    setSubElements(elements) {\n    }\n    // called when saving, change to final values\n    formatValue(field, currentValue) {\n        flogger(`Handling format value for field ${field.displayName} with value ${currentValue}`);\n        let result = currentValue;\n        switch (field.type) { // only need to change dates\n            case (FieldType.date): {\n                //convert to underlying number format\n                result = moment(currentValue, 'DD/MM/YYYY').format('YYYYMMDD');\n                break;\n            }\n            case (FieldType.datetime): {\n                //convert to underlying number format\n                result = moment(currentValue, 'DD/MM/YYYY HH:mm:ss').format('YYYYMMDDHHmmss');\n                break;\n            }\n            case (FieldType.boolean): {\n                result = (currentValue.toLowerCase() === 'true');\n                break;\n            }\n            case (FieldType.id): {\n                if (field.idType === KeyType.number) {\n                    result = parseInt(currentValue);\n                }\n                break;\n            }\n            case (FieldType.float): {\n                let parsed = parseFloat(currentValue);\n                if (!isNaN(parsed)) {\n                    result = parsed;\n                }\n                break;\n            }\n            case (FieldType.integer): {\n                let parsed = parseFloat(currentValue);\n                if (!isNaN(parsed)) {\n                    result = parsed;\n                }\n                break;\n            }\n        }\n        flogger(`Handling format value for field ${field.displayName} with value ${currentValue} - result is ${result}`);\n        return result;\n    }\n    isValidValue(field, currentValue) {\n        vlogger(`Handling is valid value for field ${field.displayName} with value ${currentValue}`);\n        let response = {\n            isValid: true,\n            resetOnFailure: false\n        };\n        // basics first, is the field mandatory?\n        if (field.mandatory) {\n            // do we have any content?\n            if ((!currentValue) || (currentValue.trim().length === 0)) {\n                response.isValid = false;\n                response.message = `${field.displayName} is required. Please enter a valid value.`;\n                vlogger(`Handling is valid value for field ${field.displayName} with value ${currentValue} - is valid is ${response.isValid} with message ${response.message}`);\n                return response;\n            }\n            // boolean is a special case, and must be true\n            if (field.type === FieldType.boolean) {\n                if (currentValue.trim().toLowerCase() !== 'true') {\n                    response.isValid = false;\n                    response.message = `${field.displayName} is required and must be selected.`;\n                    vlogger(`Handling is valid value for field ${field.displayName} with value ${currentValue} - is valid is ${response.isValid} with message ${response.message}`);\n                    return response;\n                }\n            }\n        }\n        // ok, so we have some content, we need to check if the value is a valid format with regular expressions\n        if (currentValue) {\n            switch (field.type) {\n                case (FieldType.datetime): {\n                    response.isValid = BasicFieldOperations.dateTimeRegex.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be DD/MM/YYYY hh:mm`;\n                    }\n                    break;\n                }\n                case (FieldType.date): {\n                    response.isValid = BasicFieldOperations.dateRegex.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be DD/MM/YYYY`;\n                    }\n                    break;\n                }\n                case (FieldType.float): {\n                    response.isValid = BasicFieldOperations.floatRegexp.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be 00.00`;\n                    }\n                    break;\n                }\n                case (FieldType.id): {\n                    response.isValid = BasicFieldOperations.integerRegex.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be an integer`;\n                    }\n                    break;\n                }\n                case (FieldType.email): {\n                    response.isValid = BasicFieldOperations.emailRegex.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be an email address`;\n                    }\n                    break;\n                }\n                case (FieldType.integer): {\n                    response.isValid = BasicFieldOperations.integerRegex.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be an integer`;\n                    }\n                    break;\n                }\n                case (FieldType.text): {\n                    break;\n                }\n                case (FieldType.password): {\n                    response.isValid = BasicFieldOperations.basicPasswordRegex.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be 8 to 15 letters and digits only`;\n                    }\n                    break;\n                }\n                case (FieldType.time): {\n                    response.isValid = BasicFieldOperations.timeRegex.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be 24 hour time format HH:MM:SS`;\n                    }\n                    break;\n                }\n                case (FieldType.shortTime): {\n                    response.isValid = BasicFieldOperations.shortTimeRegex.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be 24 hour time format HH:MM`;\n                    }\n                    break;\n                }\n                case (FieldType.duration): {\n                    response.isValid = BasicFieldOperations.durationRegexp.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be in the format MM:SS or 999:MM:SS`;\n                    }\n                    break;\n                }\n                case (FieldType.boolean): {\n                    response.isValid = BasicFieldOperations.booleanRegexp.test(currentValue);\n                    if (!response.isValid) {\n                        response.message = `${field.displayName} must be true or false`;\n                    }\n                    break;\n                }\n            }\n        }\n        vlogger(`Handling is valid value for field ${field.displayName} with value ${currentValue} - is valid is ${response.isValid} with message ${response.message}`);\n        return response;\n    }\n    renderValue(field, currentValue) {\n        rlogger(`Rendering value for field ${field.displayName} with new value ${currentValue}`);\n        // ensure we don't end up in an endless loop\n        // if the value hasn't changed return null\n        // let index = this.previousFieldValues.findIndex((fieldValue) => fieldValue.id === field.id);\n        // if (index >= 0) {\n        //     //we have a previous value\n        //     let fieldValue: FieldNameValue = this.previousFieldValues[index];\n        //     rlogger(`Rendering value for field ${field.displayName} with new value ${currentValue} - previous value ${fieldValue.value}`);\n        //     if (fieldValue.value === currentValue) return null;\n        // }\n        // either not yet seen or value has changed from previous\n        if (currentValue) { // only attempt to render non-empty dates\n            let newValue = currentValue;\n            switch (field.type) {\n                case (FieldType.date): {\n                    newValue = moment(currentValue, 'YYYYMMDD').format('DD/MM/YYYY');\n                    break;\n                }\n                case (FieldType.datetime): {\n                    newValue = moment(currentValue, 'YYYYMMDDHHmmss').format('DD/MM/YYYY HH:mm:ss');\n                    break;\n                }\n            }\n            // store the previous value\n            this.setPreviousValue(field, newValue);\n            rlogger(`Rendering value for field ${field.displayName} with new value ${currentValue} - rendered to ${newValue}`);\n            return newValue;\n        }\n        else {\n            // empty value, no rendering required\n            rlogger(`Rendering value for field ${field.displayName} with new value is empty - no rendering required`);\n            return null;\n        }\n    }\n    generate(field, isCreate) {\n        let result = '';\n        // are we generating the field?\n        if (field.generator) {\n            // are we only generating on create\n            if (field.generator.onCreation && isCreate) {\n                result = this.generateValue(field);\n                glogger(`Generating value for field ${field.displayName} with on creation ${result}`);\n            }\n            // or if we are modifying and should also be modifying the value\n            if (field.generator.onModify && !isCreate) {\n                result = this.generateValue(field);\n                glogger(`Generating value for field ${field.displayName} with on modify ${result}`);\n            }\n        }\n        return result;\n    }\n    setPreviousValue(field, newValue) {\n        rlogger(`Storing previous value for field ${field.displayName} with  new value ${newValue}`);\n        let fieldValue;\n        let index = this.previousFieldValues.findIndex((fieldValue) => fieldValue.id === field.id);\n        if (index >= 0) {\n            //we have a previous value\n            fieldValue = this.previousFieldValues[index];\n            rlogger(`Storing previous value for field ${field.displayName} with new value ${newValue} - old value was ${fieldValue}`);\n            fieldValue.value = newValue;\n        }\n        else {\n            // create a new record of the value\n            fieldValue = {\n                id: field.id,\n                value: newValue\n            };\n            rlogger(`Storing previous value for field ${field.displayName} with new value ${newValue} - NO previous`);\n            this.previousFieldValues.push(fieldValue);\n        }\n    }\n    generateValue(field) {\n        let result = '';\n        switch (field.type) {\n            case (FieldType.datetime): {\n                result = moment().format('YYYYMMDDHHmmss');\n                break;\n            }\n            case (FieldType.date): {\n                result = moment().format('YYYYMMDD');\n                break;\n            }\n            case (FieldType.float): {\n                result = '0.0';\n                break;\n            }\n            case (FieldType.id): {\n                result = '-1';\n                break;\n            }\n            case (FieldType.email): {\n                result = 'me@me.com';\n                break;\n            }\n            case (FieldType.integer): {\n                result = '0';\n                break;\n            }\n            case (FieldType.text): {\n                result = '';\n                break;\n            }\n            case (FieldType.password): {\n                result = '';\n                break;\n            }\n            case (FieldType.time): {\n                result = '00:00:00';\n                break;\n            }\n            case (FieldType.shortTime): {\n                result = '00:00';\n                break;\n            }\n            case (FieldType.duration): {\n                result = '00:00';\n                break;\n            }\n            case (FieldType.boolean): {\n                result = 'false';\n                break;\n            }\n            case (FieldType.uuid): {\n                result = v4();\n                break;\n            }\n            case (FieldType.userId): {\n                result = `${SecurityManager.getInstance().getLoggedInUsername()}`;\n                break;\n            }\n        }\n        return result;\n    }\n}\nBasicFieldOperations.dateRegex = /^((0?[1-9]|[12]\\d|31)\\/(0?[13578]|1[02])\\/(\\d{2}|\\d{4})|(0?[1-9]|[12]\\d|30)\\/(0?[469]|11])\\/(\\d{2}|\\d{4})|(0?[1-9]|1\\d|2[0-8])\\/02\\/(\\d{2}|\\d{4})|(29\\/02\\/(\\d{2})?(0[48]|[2468][048]|[13579][26]))|(29\\/02\\/([02468][048]|[13579][26])00))$/;\nBasicFieldOperations.emailRegex = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()\\.,;\\s@\\\"]+\\.{0,1})+([^<>()\\.,;:\\s@\\\"]{2,}|[\\d\\.]+))$/;\nBasicFieldOperations.shortTimeRegex = /^([01]\\d|2[0-3]):?([0-5]\\d)$/;\nBasicFieldOperations.timeRegex = /^([01]\\d|2[0-3]):?([0-5]\\d):?([0-5]\\d)$/;\nBasicFieldOperations.dateTimeRegex = /^((0?[1-9]|[12]\\d|31)\\/(0?[13578]|1[02])\\/(\\d{2}|\\d{4})|(0?[1-9]|[12]\\d|30)\\/(0?[469]|11])\\/(\\d{2}|\\d{4})|(0?[1-9]|1\\d|2[0-8])\\/02\\/(\\d{2}|\\d{4})|(29\\/02\\/(\\d{2})?(0[48]|[2468][048]|[13579][26]))|(29\\/02\\/([02468][048]|[13579][26])00))\\s([01]\\d|2[0-3]):?([0-5]\\d):?([0-5]\\d)$/;\nBasicFieldOperations.basicPasswordRegex = /^[a-zA-Z0-9]{8,15}$/;\nBasicFieldOperations.integerRegex = /^[+-]?\\d+$/;\nBasicFieldOperations.floatRegexp = /^[+-]?\\d+(\\.\\d+)?$/;\nBasicFieldOperations.booleanRegexp = /^true|false$/;\nBasicFieldOperations.durationRegexp = /^(\\d+:)?[0-5]?\\d:[0-5]\\d$/;\n//# sourceMappingURL=BasicFieldOperations.js.map","import { KeyType } from \"../ui/ConfigurationTypes\";\nimport { BasicFieldOperations } from \"./BasicFieldOperations\";\nimport { FieldType } from \"./DataObjectTypeDefs\";\nexport const FIELD_ID = 'id';\nexport const FIELD_CreatedBy = 'createdBy';\nexport const FIELD_ModifiedBy = 'modifiedBy';\nexport const FIELD_CreatedOn = 'createdOn';\nexport const FIELD_ModifiedOn = 'modifiedOn';\nexport const FIELD_CreatedBy_Desc = 'Created By';\nexport const FIELD_ModifiedBy_Desc = 'Last Modified By';\nexport const FIELD_CreatedOn_Desc = 'Created On';\nexport const FIELD_ModifiedOn_Desc = 'Last Modified On';\nexport class BasicObjectDefinitionFactory {\n    constructor() {\n    }\n    static getInstance() {\n        if (!(BasicObjectDefinitionFactory._instance)) {\n            BasicObjectDefinitionFactory._instance = new BasicObjectDefinitionFactory();\n        }\n        return BasicObjectDefinitionFactory._instance;\n    }\n    generateStartingDisplayOrder(dataObjDef) {\n        let result = [];\n        dataObjDef.fields.forEach((fieldDef, index) => {\n            let order = {\n                fieldId: fieldDef.id,\n                displayOrder: index\n            };\n            // is this the created or modified date\n            if (fieldDef.id === FIELD_CreatedOn) {\n                order.displayOrder += 100;\n            }\n            if (fieldDef.id === FIELD_ModifiedOn) {\n                order.displayOrder += 101;\n            }\n            if (fieldDef.type === FieldType.userId) {\n                order.displayOrder += 100;\n            }\n            result.push(order);\n        });\n        return result;\n    }\n    createBasicObjectDefinition(id, displayName, hasDataId, dataIdIsUUID, createModifierFields = true, idFieldName = FIELD_ID) {\n        let objDef = {\n            id: id,\n            displayName: displayName,\n            fields: []\n        };\n        let ops = new BasicFieldOperations();\n        // do we need an id field?\n        if (hasDataId) {\n            let fieldType = FieldType.id;\n            if (dataIdIsUUID) {\n                fieldType = FieldType.uuid;\n            }\n            let fieldDef = {\n                id: idFieldName,\n                isKey: true,\n                idType: KeyType.number,\n                type: fieldType,\n                displayName: 'Id',\n                mandatory: true,\n                generator: {\n                    generator: ops,\n                    onModify: false,\n                    onCreation: true\n                }\n            };\n            objDef.fields.push(fieldDef);\n        }\n        // add fields for created and modified\n        if (createModifierFields) {\n            this.addCreatedDateToArray(objDef.fields);\n            this.addCreatedByToArray(objDef.fields);\n            this.addModifiedByToArray(objDef.fields);\n            this.addModifiedDateToArray(objDef.fields);\n        }\n        return objDef;\n    }\n    addStringFieldToObjDefinition(objDef, id, displayName, type, isMandatory = false, description = null, datasource = null) {\n        return this.addStringFieldToArray(objDef.fields, id, displayName, type, isMandatory, description, datasource);\n    }\n    addNumericFieldToObjDefinition(objDef, id, displayName, type, isMandatory = false, description = null, datasource = null) {\n        return this.addNumericFieldToArray(objDef.fields, id, displayName, type, isMandatory, description, datasource);\n    }\n    addCreatedDateToArray(fields) {\n        let fieldDef = this.addStringFieldToArray(fields, FIELD_CreatedOn, FIELD_CreatedOn_Desc, FieldType.datetime, true, FIELD_CreatedOn_Desc);\n        // add generator\n        fieldDef.generator = {\n            generator: new BasicFieldOperations(),\n            onCreation: true,\n            onModify: false\n        };\n        fieldDef.displayOnly = true;\n    }\n    addModifiedDateToArray(fields) {\n        let fieldDef = this.addStringFieldToArray(fields, FIELD_ModifiedOn, FIELD_ModifiedOn_Desc, FieldType.datetime, true, FIELD_ModifiedOn_Desc);\n        // add generator\n        fieldDef.generator = {\n            generator: new BasicFieldOperations(),\n            onCreation: true,\n            onModify: true\n        };\n        fieldDef.displayOnly = true;\n    }\n    addCreatedByToArray(fields) {\n        let fieldDef = this.addNumericFieldToArray(fields, FIELD_CreatedBy, FIELD_CreatedBy_Desc, FieldType.userId, true, FIELD_CreatedBy_Desc);\n        // add generator\n        fieldDef.generator = {\n            generator: new BasicFieldOperations(),\n            onCreation: true,\n            onModify: false\n        };\n        fieldDef.displayOnly = true;\n    }\n    addModifiedByToArray(fields) {\n        let fieldDef = this.addStringFieldToArray(fields, FIELD_ModifiedBy, FIELD_ModifiedBy_Desc, FieldType.userId, true, FIELD_ModifiedBy_Desc);\n        // add generator\n        fieldDef.generator = {\n            generator: new BasicFieldOperations(),\n            onCreation: true,\n            onModify: true\n        };\n        fieldDef.displayOnly = true;\n    }\n    addFieldToArray(fields, keyType, id, displayName, type, isMandatory = false, description = null, datasource = null) {\n        let fieldDef = {\n            id: id,\n            isKey: false,\n            idType: keyType,\n            type: type,\n            displayName: displayName,\n            mandatory: isMandatory,\n            displayOnly: false,\n        };\n        if (isMandatory) {\n            // add generator\n            fieldDef.generator = {\n                generator: new BasicFieldOperations(),\n                onCreation: true,\n                onModify: false\n            };\n        }\n        if (description)\n            fieldDef.description = description;\n        if (datasource)\n            fieldDef.dataSource = datasource;\n        fields.push(fieldDef);\n        return fieldDef;\n    }\n    addStringFieldToArray(fields, id, displayName, type, isMandatory = false, description = null, datasource = null) {\n        return this.addFieldToArray(fields, KeyType.string, id, displayName, type, isMandatory, description, datasource);\n    }\n    addNumericFieldToArray(fields, id, displayName, type, isMandatory = false, description = null, datasource = null) {\n        return this.addFieldToArray(fields, KeyType.string, id, displayName, type, isMandatory, description, datasource);\n    }\n}\n//# sourceMappingURL=BasicObjectDefinitionFactory.js.map","export class DataObjectController {\n    constructor(typeName) {\n        this.isCreatingNew = false;\n        this.typeName = typeName;\n        this.listeners = [];\n    }\n    addListener(listener) {\n        this.listeners.push(listener);\n    }\n    startNewObject() {\n        let result = false;\n        if (!this.isCreatingNew) {\n            result = this._startNewObject();\n            this.isCreatingNew = result;\n        }\n        return result;\n    }\n    isCreatingNewObject() {\n        return this.isCreatingNew;\n    }\n    informListenersOfCreate(dataObj) {\n        this.isCreatingNew = false;\n        this.listeners.forEach((listener) => listener.create(this, this.typeName, dataObj));\n    }\n    informListenersOfUpdate(dataObj) {\n        this.isCreatingNew = false;\n        this.listeners.forEach((listener) => listener.update(this, this.typeName, dataObj));\n    }\n    informListenersOfDelete(dataObj) {\n        this.isCreatingNew = false;\n        this.listeners.forEach((listener) => listener.delete(this, this.typeName, dataObj));\n    }\n}\n//# sourceMappingURL=DataObjectController.js.map","export var FieldType;\n(function (FieldType) {\n    FieldType[\"id\"] = \"Id\";\n    FieldType[\"uuid\"] = \"UUID\";\n    FieldType[\"text\"] = \"Text\";\n    FieldType[\"integer\"] = \"Integer\";\n    FieldType[\"float\"] = \"Number\";\n    FieldType[\"date\"] = \"Date\";\n    FieldType[\"time\"] = \"Time\";\n    FieldType[\"shortTime\"] = \"Short Time\";\n    FieldType[\"datetime\"] = \"Datetime\";\n    FieldType[\"email\"] = \"Email\";\n    FieldType[\"password\"] = \"Password\";\n    FieldType[\"boolean\"] = \"True/False\";\n    FieldType[\"userId\"] = \"User\";\n    FieldType[\"choice\"] = \"Choice\";\n    FieldType[\"limitedChoice\"] = \"Limited Choice\";\n    FieldType[\"largeText\"] = \"TextArea\";\n    FieldType[\"collection\"] = \"Collection\";\n    FieldType[\"duration\"] = \"Duration\";\n})(FieldType || (FieldType = {}));\n//# sourceMappingURL=DataObjectTypeDefs.js.map","import { FieldType } from \"./DataObjectTypeDefs\";\nimport { BasicObjectDefinitionFactory, FIELD_ID } from \"./BasicObjectDefinitionFactory\";\nimport debug from \"debug\";\nimport { BasicFieldOperations } from \"./BasicFieldOperations\";\nconst logger = debug('object-definition-registry');\nexport class ObjectDefinitionRegistry {\n    constructor() {\n        this.definitions = [];\n    }\n    static getInstance() {\n        if (!(ObjectDefinitionRegistry._instance)) {\n            ObjectDefinitionRegistry._instance = new ObjectDefinitionRegistry();\n        }\n        return ObjectDefinitionRegistry._instance;\n    }\n    findDefinition(id) {\n        let result = null;\n        const index = this.definitions.findIndex((definition) => definition.id === id);\n        if (index >= 0) {\n            result = this.definitions[index];\n        }\n        return result;\n    }\n    addDefinition(id, displayName, hasDataId, dataIdIsUUID, createModifierFields = true, idFieldName = FIELD_ID) {\n        logger(`Adding definition for ${id} with name ${displayName}`);\n        let result = this.findDefinition(id);\n        if (result) {\n            return result;\n        }\n        else {\n            let definition = BasicObjectDefinitionFactory.getInstance().createBasicObjectDefinition(id, displayName, hasDataId, dataIdIsUUID, createModifierFields, idFieldName);\n            this.definitions.push(definition);\n            return definition;\n        }\n    }\n    createInstanceFromDef(definition) {\n        logger(`Creating instance for definition ${definition.displayName}`);\n        let result = {};\n        const fieldOps = new BasicFieldOperations();\n        definition.fields.forEach((fieldDef) => {\n            if (fieldDef.generator && fieldDef.generator.onCreation) {\n                let fieldValue = fieldDef.generator.generator.generate(fieldDef, true);\n                switch (fieldDef.type) {\n                    case (FieldType.date):\n                    case (FieldType.datetime): {\n                        break;\n                    }\n                    default: {\n                        fieldValue = fieldOps.formatValue(fieldDef, fieldValue);\n                        break;\n                    }\n                }\n                logger(`Setting default values for ${fieldDef.displayName} to ${fieldValue}`);\n                result[fieldDef.id] = fieldValue;\n            }\n            if (fieldDef.type === FieldType.collection) {\n                result[fieldDef.id] = [];\n            }\n        });\n        return result;\n    }\n    createInstance(id) {\n        logger(`Creating instance for definition ${id}`);\n        let result = {};\n        const definition = this.findDefinition(id);\n        if (definition) {\n            result = this.createInstanceFromDef(definition);\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=ObjectDefinitionRegistry.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport debug from 'debug';\nconst apiLogger = debug('api-ts');\nexport class ApiUtil {\n    static getInstance() {\n        if (!(ApiUtil._instance)) {\n            ApiUtil._instance = new ApiUtil();\n        }\n        return ApiUtil._instance;\n    }\n    postFetchJSON(url, query) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const postParameters = {\n                method: \"POST\",\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ query })\n            };\n            const response = yield fetch(url, postParameters);\n            return response.json();\n        });\n    }\n    /*\n        Utility function for calling JSON POST requests\n        Parameters:\n        1.  URL to send the POST request too;\n        2.  parameters object whose attribute (name/values) are the request parameters; and\n        3.  A function to receive the results when the fetch has completed\n            The callback function should have the following form\n            callback (jsonDataReturned, httpStatusCode)\n            a)  A successful fetch will return the JSON data in the first parameter and a status code of the server\n            b)  Parameters that cannot be converted to JSON format will give a null data and code 404\n            c)  A server error will give that code and no data\n      */\n    apiFetchJSONWithPost(request) {\n        apiLogger(`Executing fetch with URL ${request.originalRequest.url} with body ${request.originalRequest.params}`);\n        try {\n            JSON.stringify(request.originalRequest.params);\n        }\n        catch (error) {\n            apiLogger('Unable to convert parameters to JSON');\n            apiLogger(request.originalRequest.params, 100);\n            request.callback(null, 404, request.queueType, request.requestId);\n        }\n        const postParameters = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(Object.assign({}, request.originalRequest.params)),\n        };\n        this.fetchJSON(request.originalRequest.url, postParameters, request.callback, request.queueType, request.requestId);\n    }\n    apiFetchJSONWithGet(request) {\n        apiLogger(`Executing GET fetch with URL ${request.originalRequest.url} with id ${request.originalRequest.params.id}`);\n        const getParameters = {\n            method: 'GET',\n            headers: { 'Content-Type': 'application/json' },\n        };\n        if (request.originalRequest.params.id && !request.wasOffline)\n            request.originalRequest.url += `/${request.originalRequest.params.id}`;\n        this.fetchJSON(request.originalRequest.url, getParameters, request.callback, request.queueType, request.requestId);\n    }\n    apiFetchJSONWithDelete(request) {\n        apiLogger(`Executing DELETE fetch with URL ${request.originalRequest.url} with id ${request.originalRequest.params.id}`);\n        const delParameters = {\n            method: 'DELETE',\n            headers: { 'Content-Type': 'application/json' },\n        };\n        if (request.originalRequest.params.id && !request.wasOffline)\n            request.originalRequest.url += `/${request.originalRequest.params.id}`;\n        this.fetchJSON(request.originalRequest.url, delParameters, request.callback, request.queueType, request.requestId);\n    }\n    apiFetchJSONWithPut(request) {\n        apiLogger(`Executing PUT fetch with URL ${request.originalRequest.url} with id ${request.originalRequest.params.id}`);\n        const putParameters = {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(Object.assign({}, request.originalRequest.params)),\n        };\n        if (request.originalRequest.params.id && !request.wasOffline)\n            request.originalRequest.url += `/${request.originalRequest.params.id}`;\n        this.fetchJSON(request.originalRequest.url, putParameters, request.callback, request.queueType, request.requestId);\n    }\n    fetchJSON(url, parameters, callback, queueType, requestId) {\n        fetch(url, parameters)\n            .then((response) => {\n            apiLogger(`Response code was ${response.status}`);\n            if (response.status >= 200 && response.status <= 299) {\n                return response.json();\n            }\n            if (response.status === 400) {\n                apiLogger(response.json());\n            }\n        })\n            .then((data) => {\n            apiLogger(data);\n            callback(data, 200, queueType, requestId);\n        })\n            .catch((error) => {\n            apiLogger(error);\n            callback(null, 500, queueType, requestId);\n        });\n    }\n}\n//# sourceMappingURL=ApiUtil.js.map","import debug from \"debug\";\nconst logger = debug('callback-registry');\nexport class CallbackRegistry {\n    constructor() {\n        this.callbacks = [];\n    }\n    static getInstance() {\n        if (!(CallbackRegistry._instance)) {\n            CallbackRegistry._instance = new CallbackRegistry();\n        }\n        return CallbackRegistry._instance;\n    }\n    addRegisterCallback(id, fn) {\n        logger(`Adding callback function with id ${id}`);\n        this.callbacks.push({ id: id, fn: fn });\n    }\n    getCallbackById(id) {\n        const defaultFn = function (data, status, associatedStateName) {\n            console.error(`Callback received with status ${status}, state name ${associatedStateName} where the callback was never registered`);\n        };\n        const foundIndex = this.callbacks.findIndex((callback) => callback.id === id);\n        if (foundIndex >= 0) {\n            return this.callbacks[foundIndex].fn;\n        }\n        return defaultFn;\n    }\n}\n//# sourceMappingURL=CallbackRegistry.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { v4 } from 'uuid';\nimport { queueType, RequestType } from \"./Types\";\nimport debug from 'debug';\nimport { CallbackRegistry } from \"./CallbackRegistry\";\nimport { OfflineManager } from \"./OfflineManager\";\nimport { ApiUtil } from \"./ApiUtil\";\nconst logger = debug('api-ts');\nexport class DownloadManager {\n    constructor() {\n        this.backgroundQueue = [];\n        this.priorityQueue = [];\n        this.inProgress = [];\n        this.backgroundChangeListener = null;\n        this.priorityChangeListener = null;\n        this.callbackForQueueRequest = this.callbackForQueueRequest.bind(this);\n    }\n    static getInstance() {\n        if (!(DownloadManager._instance)) {\n            DownloadManager._instance = new DownloadManager();\n        }\n        return DownloadManager._instance;\n    }\n    processOfflineItems() {\n        logger(`Checking for offline items`);\n        OfflineManager.getInstance().processQueuedResults();\n    }\n    setBackgroundChangeListener(uiChangeListener) {\n        this.backgroundChangeListener = uiChangeListener;\n    }\n    setPriorityChangeListener(uiChangeListener) {\n        this.priorityChangeListener = uiChangeListener;\n    }\n    getPriorityQueueCount() {\n        return this.priorityQueue.length;\n    }\n    getBackgroundQueueCount() {\n        return this.backgroundQueue.length;\n    }\n    addQLApiRequest(url, query, variables, callbackId, state, isPriority = false) {\n        let request = {\n            url: url,\n            type: RequestType.POST,\n            params: { query: query, variables: variables },\n            callbackId: callbackId,\n            associatedStateName: state\n        };\n        this.addApiRequest(request, isPriority);\n    }\n    addQLMutationRequest(url, mutation, variables, callbackId, state, isPriority = false) {\n        let request = {\n            url: url,\n            type: RequestType.POST,\n            params: { mutation: mutation, variables: variables },\n            callbackId: callbackId,\n            associatedStateName: state\n        };\n        this.addApiRequest(request, isPriority);\n    }\n    addApiRequest(jsonRequest, isPriority = false, wasOffline = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // add a new requestId to the request for future tracking\n            const requestId = v4();\n            logger(`Adding Queue Request ${requestId}`);\n            logger(jsonRequest);\n            // are we currently offline?\n            if (OfflineManager.getInstance().areWeOffline()) {\n                logger(`We are offline, queueing request for when server back online.`);\n                OfflineManager.getInstance().addOfflineRequest(jsonRequest);\n                // let the callback function know, with a custom code to let the receiver know there was a problem\n                CallbackRegistry.getInstance().getCallbackById(jsonRequest.callbackId)(jsonRequest.params, 500, jsonRequest.associatedStateName, false);\n                return;\n            }\n            // we are online (hopefully), continue for now, we will catch offline errors later\n            if (isPriority) {\n                let managerRequest = {\n                    originalRequest: jsonRequest,\n                    requestId: requestId,\n                    queueType: queueType.PRIORITY,\n                    callback: this.callbackForQueueRequest,\n                    wasOffline: wasOffline\n                };\n                this.priorityQueue.push(managerRequest);\n                if (this.priorityChangeListener)\n                    this.priorityChangeListener.handleEventAddToQueue();\n            }\n            else {\n                let managerRequest = {\n                    originalRequest: jsonRequest,\n                    requestId: requestId,\n                    queueType: queueType.BACKGROUND,\n                    callback: this.callbackForQueueRequest,\n                    wasOffline: wasOffline\n                };\n                this.backgroundQueue.push(managerRequest);\n                if (this.backgroundChangeListener)\n                    this.backgroundChangeListener.handleEventAddToQueue();\n            }\n            this.processQueues();\n        });\n    }\n    processPriorityQueue() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queueItem = this.priorityQueue.shift();\n            if (queueItem !== undefined)\n                this.inProgress.push(queueItem);\n            if (queueItem !== undefined)\n                this.initiateFetchForQueueItem(queueItem);\n        });\n    }\n    processBackgroundQueue() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const queueItem = this.backgroundQueue.shift();\n            if (queueItem !== undefined)\n                this.inProgress.push(queueItem);\n            if (queueItem !== undefined)\n                this.initiateFetchForQueueItem(queueItem);\n        });\n    }\n    processQueues() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let totalQueuedItems = this.priorityQueue.length + this.backgroundQueue.length;\n            while (totalQueuedItems > 0) {\n                logger(`processing queue, items remaining ${totalQueuedItems}`);\n                // priority queue takes priority\n                if (this.priorityQueue.length > 0) {\n                    yield this.processPriorityQueue();\n                }\n                else if (this.backgroundQueue.length > 0) {\n                    yield this.processBackgroundQueue();\n                }\n                totalQueuedItems = this.priorityQueue.length + this.backgroundQueue.length;\n            }\n        });\n    }\n    callbackForQueueRequest(jsonData, httpStatus, queueId, requestId) {\n        // let the listeners know about the completion\n        if (queueId === queueType.PRIORITY) { // priority\n            if (this.priorityChangeListener)\n                this.priorityChangeListener.handleEventRemoveFromQueue();\n        }\n        else if (this.backgroundChangeListener)\n            this.backgroundChangeListener.handleEventRemoveFromQueue();\n        logger(`received callback for queue ${queueId} request ${requestId} with status ${httpStatus}`);\n        // find the item in the in progress\n        const foundIndex = this.inProgress.findIndex(element => element.requestId === requestId);\n        if (foundIndex >= 0) {\n            // remove from in progress\n            const queueItem = this.inProgress[foundIndex];\n            this.inProgress.splice(foundIndex, 1);\n            logger(queueItem);\n            // are we offline http status of 500\n            if (httpStatus === 500) {\n                logger(`queue item ${queueItem.requestId} - server offline, queueing for later`);\n                OfflineManager.getInstance().addOfflineRequest(queueItem.originalRequest);\n                // let the callback function know, with a custom code to let the receiver know there was a problem\n                CallbackRegistry.getInstance().getCallbackById(queueItem.originalRequest.callbackId)(queueItem.originalRequest.params, httpStatus, queueItem.originalRequest.associatedStateName, queueItem.wasOffline);\n            }\n            else {\n                logger(`finished for queue item ${queueItem.requestId} with possible offline id of ${queueItem.originalRequest._id}`);\n                // let the callback function know\n                CallbackRegistry.getInstance().getCallbackById(queueItem.originalRequest.callbackId)(jsonData, httpStatus, queueItem.originalRequest.associatedStateName, queueItem.wasOffline);\n            }\n        }\n    }\n    initiateFetchForQueueItem(item) {\n        logger(`Download Manager: initiating fetch for queue item ${item.requestId}`);\n        logger(item);\n        switch (item.originalRequest.type) {\n            case RequestType.POST: {\n                ApiUtil.getInstance().apiFetchJSONWithPost(item);\n                break;\n            }\n            case RequestType.GET: {\n                ApiUtil.getInstance().apiFetchJSONWithGet(item);\n                break;\n            }\n            case RequestType.DELETE: {\n                ApiUtil.getInstance().apiFetchJSONWithDelete(item);\n                break;\n            }\n            case RequestType.PUT: {\n                ApiUtil.getInstance().apiFetchJSONWithPut(item);\n                break;\n            }\n        }\n    }\n}\n//# sourceMappingURL=DownloadManager.js.map","import { Poller } from \"./Poller\";\nimport { IndexedDBStateManager } from \"../state/IndexedDBStateManager\";\nimport { v4 } from \"uuid\";\nimport { DownloadManager } from \"./DownloadManager\";\nimport { NotificationManager, NotificationType } from \"../notification/NotificationManager\";\nimport debug from \"debug\";\nconst logger = debug('offline-manager');\nexport class OfflineManager {\n    constructor() {\n        this.serverBackOnline = this.serverBackOnline.bind(this);\n        const indexedDB = new IndexedDBStateManager();\n        indexedDB.initialise(OfflineManager.DB_NAME, [{ name: OfflineManager.OBJECT_STORE, keyField: '_id' }]);\n        this.persistence = indexedDB;\n        this.persistence.addChangeListenerForName(OfflineManager.OBJECT_STORE, this);\n    }\n    static getInstance() {\n        if (!(OfflineManager._instance)) {\n            OfflineManager._instance = new OfflineManager();\n        }\n        return OfflineManager._instance;\n    }\n    processQueuedResults() {\n        // find any requests in the persistence\n        this.persistence.getStateByName(OfflineManager.OBJECT_STORE);\n    }\n    serverBackOnline() {\n        NotificationManager.getInstance().show('Server', 'Server is back online.');\n        this.processQueuedResults();\n    }\n    areWeOffline() {\n        return Poller.getInstance().isPolling();\n    }\n    addOfflineRequest(jsonRequest) {\n        if (!Poller.getInstance().isPolling()) {\n            Poller.getInstance().startPolling(this.serverBackOnline);\n            NotificationManager.getInstance().show('Server', 'Server is offline, queueing local changes for when server is available', NotificationType.warning);\n        }\n        // save the request with an id\n        jsonRequest._id = v4();\n        logger('Adding offline request');\n        logger(jsonRequest);\n        this.persistence.addNewItemToState(OfflineManager.OBJECT_STORE, jsonRequest, false);\n    }\n    getListenerName() {\n        return \"Offline manager\";\n    }\n    stateChanged(managerName, name, offlineResults) {\n        if (offlineResults && offlineResults.length > 0) {\n            NotificationManager.getInstance().show('Queued Changes', `There are ${offlineResults.length} queued changes, sending to server.`, NotificationType.warning);\n            offlineResults.forEach((request) => {\n                this.persistence.removeItemFromState(OfflineManager.OBJECT_STORE, request, false);\n                logger(`Processing offline request with priority and from offline`);\n                logger(request);\n                DownloadManager.getInstance().addApiRequest(request, true, true);\n            });\n        }\n        this.persistence.forceResetForGet(OfflineManager.OBJECT_STORE);\n    }\n    stateChangedItemAdded(managerName, name, itemAdded) {\n    }\n    stateChangedItemRemoved(managerName, name, itemRemoved) {\n    }\n    stateChangedItemUpdated(managerName, name, itemUpdated, itemNewValue) {\n    }\n    filterResults(managerName, name, filterResults) {\n    }\n}\nOfflineManager.DB_NAME = 'offline.manager.db';\nOfflineManager.OBJECT_STORE = 'offline.manager.db.requests';\n//# sourceMappingURL=OfflineManager.js.map","import debug from \"debug\";\nconst logger = debug('poller');\nexport class Poller {\n    constructor() {\n        this.interval = null;\n        this.isPollingBool = false;\n    }\n    static getInstance() {\n        if (!(Poller._instance)) {\n            Poller._instance = new Poller();\n        }\n        return Poller._instance;\n    }\n    startPolling(callback, delay = Poller.INTERVAL_DEFAULT) {\n        this.isPollingBool = true;\n        this.interval = setInterval(() => {\n            logger(`Checking for server availability`);\n            fetch(Poller.URL_CALL, { method: 'GET' }).then((response) => {\n                logger(`Response code was ${response.status} - server is now available`);\n                this.stopPolling();\n                callback();\n            }).catch((error) => {\n                logger(error);\n            });\n        }, delay);\n    }\n    isPolling() {\n        return this.isPollingBool;\n    }\n    stopPolling() {\n        if (this.interval)\n            clearInterval(this.interval);\n        this.interval = null;\n        this.isPollingBool = false;\n    }\n}\nPoller.INTERVAL_DEFAULT = 10000; // 30 seconds\nPoller.URL_CALL = '/ping';\n//# sourceMappingURL=Poller.js.map","export var RequestType;\n(function (RequestType) {\n    RequestType[RequestType[\"POST\"] = 0] = \"POST\";\n    RequestType[RequestType[\"GET\"] = 1] = \"GET\";\n    RequestType[RequestType[\"PUT\"] = 2] = \"PUT\";\n    RequestType[RequestType[\"DELETE\"] = 3] = \"DELETE\";\n})(RequestType || (RequestType = {}));\nexport var queueType;\n(function (queueType) {\n    queueType[queueType[\"PRIORITY\"] = 0] = \"PRIORITY\";\n    queueType[queueType[\"BACKGROUND\"] = 1] = \"BACKGROUND\";\n})(queueType || (queueType = {}));\n//# sourceMappingURL=Types.js.map","import { Notification } from './Notification';\nimport { NotificationType } from \"./NotificationManager\";\nexport class BootstrapNotification extends Notification {\n    constructor(notificationManager) {\n        super(notificationManager);\n    }\n    // Make the notification visible on the screen\n    show(title, message, topOffset = 0, context, duration = 3000) {\n        let containerId = this.notificationManager.getContainerId();\n        // convert the context to a background colour\n        let bgColorClass = '';\n        switch (context) {\n            case NotificationType.info: {\n                bgColorClass = 'bg-info';\n                break;\n            }\n            case NotificationType.warning: {\n                bgColorClass = 'bg-warning';\n                break;\n            }\n            case NotificationType.message: {\n                bgColorClass = 'bg-primary';\n                break;\n            }\n            case NotificationType.priority: {\n                bgColorClass = 'bg-danger';\n                break;\n            }\n            default: {\n                bgColorClass = \"bg-info\";\n            }\n        }\n        // Creating the notification container div\n        const containerNode = document.createElement('div');\n        containerNode.className = 'notification toast';\n        containerNode.style.top = `${topOffset}px`;\n        containerNode.setAttribute(\"role\", \"alert\");\n        containerNode.setAttribute(\"data-autohide\", \"false\");\n        // Adding the notification title node\n        const titleNode = document.createElement('div');\n        titleNode.className = `toast-header text-white ${bgColorClass}`;\n        const titleTextNode = document.createElement('strong');\n        titleTextNode.className = \"mr-auto\";\n        titleTextNode.textContent = title;\n        // Adding a little button on the notification\n        const closeButtonNode = document.createElement('button');\n        closeButtonNode.className = 'ml-2 mb-1 close';\n        closeButtonNode.textContent = 'x';\n        closeButtonNode.addEventListener('click', () => {\n            this.notificationManager.remove(containerNode);\n        });\n        // Adding the notification message content node\n        const messageNode = document.createElement('div');\n        messageNode.className = 'toast-body';\n        messageNode.textContent = message;\n        // Appending the container with all the elements newly created\n        titleNode.appendChild(titleTextNode);\n        titleNode.appendChild(closeButtonNode);\n        containerNode.appendChild(titleNode);\n        containerNode.appendChild(messageNode);\n        containerNode.classList.add(`is-${context}`);\n        // Inserting the notification to the page body\n        const containerEl = document.getElementById(containerId);\n        if (containerEl)\n            containerEl.appendChild(containerNode);\n        // activate it\n        // @ts-ignore\n        $(\".notification\").toast('show');\n        // Default duration delay\n        if (duration <= 0) {\n            duration = 2000;\n        }\n        setTimeout(() => {\n            this.notificationManager.remove(containerNode);\n        }, duration);\n        return containerNode;\n    }\n}\n//# sourceMappingURL=BootstrapNotification.js.map","export class Notification {\n    constructor(notificationManager) {\n        this.show = this.show.bind(this);\n        this.notificationManager = notificationManager;\n        // Create DOM notification structure when instantiated\n        this.containerId = this.notificationManager.getContainerId();\n    }\n}\n//# sourceMappingURL=Notification.js.map","import { BootstrapNotification } from \"./BootstrapNotification\";\nexport class NotificationFactory {\n    constructor() {\n    }\n    static getInstance() {\n        if (!(NotificationFactory._instance)) {\n            NotificationFactory._instance = new NotificationFactory();\n        }\n        return NotificationFactory._instance;\n    }\n    createNotification(manager) {\n        return new BootstrapNotification(manager);\n    }\n}\n//# sourceMappingURL=NotificationFactory.js.map","import { NotificationFactory } from \"./NotificationFactory\";\nexport var NotificationType;\n(function (NotificationType) {\n    NotificationType[NotificationType[\"info\"] = 0] = \"info\";\n    NotificationType[NotificationType[\"warning\"] = 1] = \"warning\";\n    NotificationType[NotificationType[\"message\"] = 2] = \"message\";\n    NotificationType[NotificationType[\"priority\"] = 3] = \"priority\";\n})(NotificationType || (NotificationType = {}));\nexport class NotificationManager {\n    constructor() {\n        this.notifications = [];\n        this.currentCount = 0;\n        this.offsetPerNotification = 120;\n        this.containerId = 'notifications';\n        this.show = this.show.bind(this);\n    }\n    static getInstance() {\n        if (!(NotificationManager._instance)) {\n            NotificationManager._instance = new NotificationManager();\n        }\n        return NotificationManager._instance;\n    }\n    getContainerId() {\n        return this.containerId;\n    }\n    show(title, message, context = NotificationType.info, duration = 5000) {\n        const notification = NotificationFactory.getInstance().createNotification(this);\n        const notificationNode = notification.show(title, message, this.currentCount * this.offsetPerNotification, context, duration);\n        this.currentCount++;\n        this.notifications.push(notificationNode);\n    }\n    remove(notificationNode) {\n        const foundIndex = this.notifications.findIndex(element => element === notificationNode);\n        if (foundIndex >= 0) {\n            this.notifications.splice(foundIndex, 1);\n            // re-arrange the remaining notifications\n            this.notifications.map((notificationNode, index) => {\n                // @ts-ignore\n                notificationNode.style.top = `${this.offsetPerNotification * index}px`;\n            });\n        }\n        const parentEl = notificationNode.parentElement;\n        if (parentEl !== null)\n            parentEl.removeChild(notificationNode);\n        this.currentCount--;\n        if (this.currentCount < 0)\n            this.currentCount = 0;\n    }\n}\n//# sourceMappingURL=NotificationManager.js.map","import debug from \"debug\";\nconst logger = debug('security-manager');\nexport class SecurityManager {\n    constructor() {\n        this.hash = null;\n        this.logoutEl = null;\n    }\n    static getInstance() {\n        if (!(SecurityManager._instance)) {\n            SecurityManager._instance = new SecurityManager();\n        }\n        return SecurityManager._instance;\n    }\n    onDocumentLoaded(logoutElementId) {\n        this.logoutEl = document.getElementById(logoutElementId);\n        // find the secret hash for the current user (if any)\n        const username = this.getLoggedInUsername();\n        if (username && username.trim().length > 0) {\n            logger(`found user ${username}`);\n            this.hash = localStorage.getItem(username);\n            if (this.hash) {\n                sessionStorage.setItem(username, this.hash);\n            }\n            else {\n                this.hash = sessionStorage.getItem(username);\n            }\n            localStorage.removeItem(username);\n            logger(`found user ${username} hash - removed from local storage`);\n        }\n        if (this.logoutEl) {\n            this.logoutEl.addEventListener('click', (event) => {\n                localStorage.removeItem(username);\n                sessionStorage.removeItem(username);\n            });\n        }\n    }\n    isLoggedIn() {\n        let isLoggedIn = false;\n        try {\n            // @ts-ignore\n            if (loggedInUser) {\n                isLoggedIn = true;\n            }\n        }\n        catch (error) {\n        }\n        return isLoggedIn;\n    }\n    getLoggedInUserId() {\n        let result = '';\n        try {\n            // @ts-ignore\n            if (loggedInUser) {\n                // @ts-ignore\n                result = loggedInUser._id;\n            }\n        }\n        catch (error) {\n        }\n        logger(`Logged in user id is ${result}`);\n        return result;\n    }\n    getLoggedInUsername() {\n        let result = '';\n        try {\n            // @ts-ignore\n            if (loggedInUser) {\n                // @ts-ignore\n                result = loggedInUser.username;\n            }\n        }\n        catch (error) {\n        }\n        logger(`Logged in user is ${result}`);\n        return result;\n    }\n    getCurrentUser() {\n        return this.getLoggedInUserId();\n    }\n    encryptString(value) {\n        let result = value;\n        if (this.hash) {\n            // @ts-ignore\n            result = CryptoJS.AES.encrypt(value, this.hash).toString();\n        }\n        return result;\n    }\n    decryptString(value) {\n        let result = value;\n        if (this.hash) {\n            // @ts-ignore\n            result = CryptoJS.AES.decrypt(value, this.hash).toString(CryptoJS.enc.Utf8);\n        }\n        return result;\n    }\n    encryptObject(dataObj) {\n        return this.encryptString(JSON.stringify(dataObj));\n    }\n    decryptObject(value) {\n        return JSON.parse(this.decryptString(value));\n    }\n}\n//# sourceMappingURL=SecurityManager.js.map","import debug from 'debug';\nimport moment from \"moment\";\nimport { SocketManager } from \"./SocketManager\";\nimport { InviteType, Priority } from \"./Types\";\nimport { BrowserStorageStateManager } from \"../state/BrowserStorageStateManager\";\nimport { v4 } from \"uuid\";\nimport { isSameRoom } from \"../util/EqualityFunctions\";\nvar UserStatus;\n(function (UserStatus) {\n    UserStatus[UserStatus[\"LoggedOut\"] = 0] = \"LoggedOut\";\n    UserStatus[UserStatus[\"LoggedIn\"] = 1] = \"LoggedIn\";\n})(UserStatus || (UserStatus = {}));\nconst cmLogger = debug('chat-manager');\nexport class ChatManager {\n    constructor() {\n        this.blockedList = [];\n        this.favouriteList = [];\n        this.loggedInUsers = [];\n        this.currentUsername = '';\n        this.unreadListener = null;\n        cmLogger('Setting up chat logs, blocked list, and favourites');\n        this.chatLogs = [];\n        this.chatListeners = [];\n        this.chatUserListeners = [];\n        this.localStorage = new BrowserStorageStateManager(true, true, isSameRoom);\n        // connect to the socket manager\n        SocketManager.getInstance().addChatReceiver(this);\n        // bind the receiver methods\n        this.receiveLogin = this.receiveLogin.bind(this);\n        this.receiveLogout = this.receiveLogout.bind(this);\n        this.receiveInvitation = this.receiveInvitation.bind(this);\n        this.receiveMessage = this.receiveMessage.bind(this);\n        this.receiveQueuedMessages = this.receiveQueuedMessages.bind(this);\n        this.receiveQueuedInvites = this.receiveQueuedInvites.bind(this);\n        this.receiveJoinedRoom = this.receiveJoinedRoom.bind(this);\n        this.receivedLeftRoom = this.receivedLeftRoom.bind(this);\n    }\n    static getInstance() {\n        if (!(ChatManager._instance)) {\n            ChatManager._instance = new ChatManager();\n        }\n        return ChatManager._instance;\n    }\n    addChatEventHandler(receiver) {\n        this.chatListeners.push(receiver);\n    }\n    addChatUserEventHandler(receiver) {\n        this.chatUserListeners.push(receiver);\n    }\n    isUserLoggedIn(username) {\n        return (this.loggedInUsers.findIndex((name) => name === username) >= 0);\n    }\n    receiveUserList(users) {\n        this.loggedInUsers = users;\n        this.chatUserListeners.forEach((listener) => listener.handleLoggedInUsersUpdated(users));\n    }\n    addUserToBlockedList(username) {\n        let index = this.blockedList.findIndex((blocked) => blocked === username);\n        if (index < 0) {\n            this.blockedList.push(username);\n            this.saveBlockedList();\n            this.chatUserListeners.forEach((listener) => listener.handleBlockedUsersChanged(this.favouriteList));\n        }\n    }\n    removeUserFromBlockedList(username) {\n        let index = this.blockedList.findIndex((blocked) => blocked === username);\n        if (index >= 0) {\n            this.blockedList.splice(index, 1);\n            this.saveBlockedList();\n            this.chatUserListeners.forEach((listener) => listener.handleBlockedUsersChanged(this.favouriteList));\n        }\n    }\n    isUserInBlockedList(username) {\n        return (this.blockedList.findIndex((blocked) => blocked === username) >= 0);\n    }\n    addUserToFavouriteList(username) {\n        let index = this.favouriteList.findIndex((favourite) => favourite === username);\n        if (index < 0) {\n            this.favouriteList.push(username);\n            this.saveFavouriteList();\n            this.chatUserListeners.forEach((listener) => listener.handleFavouriteUsersChanged(this.favouriteList));\n        }\n    }\n    removeUserFromFavouriteList(username) {\n        let index = this.favouriteList.findIndex((blocked) => blocked === username);\n        if (index >= 0) {\n            this.favouriteList.splice(index, 1);\n            this.saveFavouriteList();\n            this.chatUserListeners.forEach((listener) => listener.handleFavouriteUsersChanged(this.favouriteList));\n        }\n    }\n    isUserInFavouriteList(username) {\n        return (this.favouriteList.findIndex((user) => user === username) >= 0);\n    }\n    getFavouriteUserList() {\n        return [...this.favouriteList];\n    }\n    getBlockedUserList() {\n        return [...this.blockedList];\n    }\n    setCurrentUser(username) {\n        cmLogger(`Setting current user ${username}`);\n        this.currentUsername = username;\n        // load previous logs\n        let savedLogs = this.localStorage.getStateByName(ChatManager.chatLogKey + this.currentUsername);\n        cmLogger(savedLogs);\n        if (savedLogs) {\n            this.chatLogs = savedLogs;\n        }\n        // load previous blocked list\n        let blockedList = this.localStorage.getStateByName(ChatManager.blockedListKey + this.currentUsername);\n        cmLogger(blockedList);\n        if (blockedList) {\n            this.blockedList = blockedList;\n        }\n        // load previous favourite list\n        let favouriteList = this.localStorage.getStateByName(ChatManager.favouriteListKey + this.currentUsername);\n        cmLogger(favouriteList);\n        if (favouriteList) {\n            this.favouriteList = favouriteList;\n        }\n        this.chatListeners.forEach((listener) => listener.handleChatLogsUpdated());\n    }\n    getCurrentUser() {\n        return this.currentUsername;\n    }\n    receiveJoinedRoom(users) {\n        // we get this for all changes to a room, if the username is us can safely ignore\n        //if (users.username === this.currentUsername) return;\n        if (users.type !== InviteType.ChatRoom)\n            return;\n        let log = this.ensureChatLogExists(users.room);\n        cmLogger(`User list for room ${users.room} - ${users.userList.join(',')}`);\n        log.users = users.userList;\n        // add a \"message\" for joined user\n        let created = parseInt(moment().format('YYYYMMDDHHmmss'));\n        const joinDateTime = moment().format('DD/MM/YYYY HH:mm');\n        let message = {\n            from: '',\n            created: created,\n            room: users.room,\n            priority: 0,\n            type: InviteType.ChatRoom,\n            message: `${users.username} joined the chat on ${joinDateTime}`\n        };\n        log.messages.push(message);\n        this.saveLogs();\n        this.chatListeners.forEach((listener) => listener.handleChatLogUpdated(log, false));\n    }\n    receivedLeftRoom(users) {\n        // we get this for all changes to a room, if the username is us can safely ignore\n        if (users.type !== InviteType.ChatRoom)\n            return;\n        if (users.username === this.currentUsername)\n            return;\n        let log = this.ensureChatLogExists(users.room);\n        cmLogger(`User list for room ${users.room} - ${users.userList.join(',')}`);\n        log.users = users.userList;\n        // add a \"message\" for leaving user\n        let created = parseInt(moment().format('YYYYMMDDHHmmss'));\n        const joinDateTime = moment().format('DD/MM/YYYY HH:mm');\n        let message = {\n            from: '',\n            created: created,\n            room: users.room,\n            priority: 0,\n            type: InviteType.ChatRoom,\n            message: `${users.username} left the chat on ${joinDateTime}`\n        };\n        log.messages.push(message);\n        this.saveLogs();\n        this.chatListeners.forEach((listener) => listener.handleChatLogUpdated(log, false));\n    }\n    receiveInvitation(invite) {\n        if (invite.type !== InviteType.ChatRoom)\n            return;\n        //  unless we are receiving an invite from someone in our blocked list, we automatically accept this invite\n        if (!this.isUserInBlockedList(invite.from)) {\n            cmLogger(`Invited to chat ${invite.room}`);\n            const didChatAlreadyExist = this.doesChatRoomExist(invite.room);\n            cmLogger(invite);\n            cmLogger(`Letting the listeners know, if they are all happy to accept then we will join the room`);\n            let happyToProceed = true;\n            if (!didChatAlreadyExist) {\n                this.chatListeners.forEach((listener) => {\n                    if (!listener.handleNewInviteReceived(invite)) {\n                        happyToProceed = false;\n                    }\n                });\n            }\n            if (happyToProceed) {\n                let chatLog = this.ensureChatLogExists(invite.room);\n                // keep a record of the type of invite\n                chatLog.type = invite.type;\n                // add the users in the invitation user list for the room, if not already added\n                if (invite.userList) {\n                    invite.userList.forEach((username) => {\n                        if ((chatLog.users.findIndex((user) => user === username)) < 0)\n                            chatLog.users.push(invite.from);\n                    });\n                }\n                if ((chatLog.users.findIndex((user) => user === invite.from)) < 0)\n                    chatLog.users.push(invite.from);\n                this.saveLogs();\n                cmLogger(`Joining chat ${invite.room}`);\n                SocketManager.getInstance().joinChat(this.getCurrentUser(), invite.room, InviteType.ChatRoom);\n                this.chatListeners.forEach((listener) => listener.handleChatLogUpdated(chatLog, false));\n            }\n        }\n        else {\n            cmLogger(`User ${invite.from} blocked`);\n        }\n    }\n    receiveLogin(username) {\n        cmLogger(`Handle login received for ${username}`);\n        // keep track of the logged in users\n        let index = this.loggedInUsers.findIndex((user) => user === username);\n        if (index < 0)\n            this.loggedInUsers.push(username);\n        cmLogger(this.loggedInUsers);\n        this.chatUserListeners.forEach((listener) => listener.handleLoggedInUsersUpdated(this.loggedInUsers));\n        // if the user in in favourites and not in blocked list passing this on to the listener\n        if (!this.isUserInBlockedList(username) && this.isUserInFavouriteList(username)) {\n            cmLogger(`User ${username} logging in`);\n            this.chatUserListeners.forEach((listener) => listener.handleFavouriteUserLoggedIn(username));\n        }\n    }\n    receiveLogout(username) {\n        let index = this.loggedInUsers.findIndex((user) => user === username);\n        if (index >= 0)\n            this.loggedInUsers.splice(index, 1);\n        this.chatUserListeners.forEach((listener) => listener.handleLoggedInUsersUpdated(this.loggedInUsers));\n        // if the user in in favourites and not in blocked list passing this on to the listener\n        if (!this.isUserInBlockedList(username) && this.isUserInFavouriteList(username)) {\n            cmLogger(`User ${username} logging out`);\n            this.chatUserListeners.forEach((listener) => listener.handleFavouriteUserLoggedOut(username));\n        }\n    }\n    receiveDecline(room, username, type) {\n        if (type !== InviteType.ChatRoom)\n            return;\n        // we get this for all changes to a room, if the username is us can safely ignore\n        if (username === this.currentUsername)\n            return;\n        if (!this.isUserInBlockedList(username)) {\n            cmLogger(`User ${username} declined invitation to room`);\n            this.chatListeners.forEach((listener) => listener.handleInvitationDeclined(room, username));\n        }\n    }\n    setUnreadCountListener(listener) {\n        this.unreadListener = listener;\n    }\n    touchChatLog(room) {\n        let chatLog = this.ensureChatLogExists(room);\n        chatLog.numOfNewMessages = 0;\n        chatLog.lastViewed = parseInt(moment().format('YYYYMMDDHHmmss'));\n        this.emitUnreadMessageCountChanged();\n        this.saveLogs();\n    }\n    getChatLog(room) {\n        let log = null;\n        let index = this.chatLogs.findIndex((log) => log.roomName === room);\n        if (index >= 0)\n            log = this.chatLogs[index];\n        return log;\n    }\n    receiveMessage(message, wasOffline = false) {\n        if (message.type !== InviteType.ChatRoom)\n            return; // ignore messages that aren't for chat rooms\n        // double check the message is not from us somehow\n        if (message.from === this.getCurrentUser())\n            return;\n        // don't receive messages from the blocked users\n        if (!this.isUserInBlockedList(message.from)) {\n            // ok, so we need to add the message to the chat log, increase the new message count, save the logs and pass it on\n            let chatLog = this.ensureChatLogExists(message.room);\n            this.addSenderToRoomIfNotAlreadyPresent(chatLog, message.from);\n            this.addMessageToChatLog(chatLog, message);\n            cmLogger(`Message received`);\n            cmLogger(message);\n            this.chatListeners.forEach((listener) => listener.handleChatLogUpdated(chatLog, wasOffline));\n        }\n        else {\n            cmLogger(`Message received from user ${message.from} - is in blocked list, not passed on.`);\n        }\n    }\n    receiveQueuedInvites(invites) {\n        // just loop through and process each invite\n        invites.forEach((invite) => {\n            this.receiveInvitation(invite);\n        });\n    }\n    receiveQueuedMessages(messages) {\n        // just loop through a process each message\n        messages.forEach((message) => {\n            this.receiveMessage(message, true);\n        });\n        this.chatListeners.forEach((listener) => listener.handleOfflineMessagesReceived(messages));\n    }\n    joinChat(room) {\n        if (this.getCurrentUser().trim().length === 0)\n            return; // we are not logged in\n        this.ensureChatLogExists(room);\n        SocketManager.getInstance().joinChat(this.getCurrentUser(), room, InviteType.ChatRoom);\n    }\n    leaveChat(room) {\n        if (this.getCurrentUser().trim().length === 0)\n            return; // we are not logged in\n        this.removeChatLog(room);\n        SocketManager.getInstance().leaveChat(this.getCurrentUser(), room, InviteType.ChatRoom);\n        this.emitUnreadMessageCountChanged();\n    }\n    login() {\n        if (this.getCurrentUser().trim().length === 0)\n            return; // we are not logged in\n        SocketManager.getInstance().login(this.getCurrentUser());\n        // get the current user list\n        SocketManager.getInstance().getUserList();\n        // connect to the chat rooms already in logs\n        this.chatLogs.forEach((log) => {\n            if (log.type === InviteType.ChatRoom) {\n                SocketManager.getInstance().joinChat(this.currentUsername, log.roomName, InviteType.ChatRoom);\n            }\n        });\n    }\n    logout() {\n        if (this.getCurrentUser().trim().length === 0)\n            return; // we are not logged in\n        SocketManager.getInstance().logout(this.getCurrentUser());\n    }\n    declineInvite(room) {\n        if (this.getCurrentUser().trim().length === 0)\n            return; // we are not logged in\n        SocketManager.getInstance().sendDeclineInvite(room, this.getCurrentUser(), InviteType.ChatRoom);\n    }\n    sendInvite(to, room, type = InviteType.ChatRoom, requiresAcceptDecline = false, subject = '') {\n        if (this.getCurrentUser().trim().length === 0)\n            return; // we are not logged in\n        // can't accidentally send an invite to blacklisted\n        if (this.isUserInBlockedList(to))\n            return;\n        // only send an invite if the user isn't already in the room\n        const log = this.ensureChatLogExists(room);\n        if (log.users.findIndex((user) => user === to) < 0) {\n            SocketManager.getInstance().sendInvite(this.getCurrentUser(), to, room, type, requiresAcceptDecline, subject);\n        }\n    }\n    sendMessage(room, content, priority = Priority.Normal, attachment) {\n        if (this.getCurrentUser().trim().length === 0)\n            return null; // we are not logged in\n        let log = this.ensureChatLogExists(room);\n        // send the message\n        let created = parseInt(moment().format('YYYYMMDDHHmmss'));\n        SocketManager.getInstance().sendMessage(this.getCurrentUser(), room, content, created, InviteType.ChatRoom, Priority.Normal, {});\n        // add the message to the chat log\n        if (!attachment)\n            attachment = {};\n        let sent = {\n            from: this.getCurrentUser(),\n            room: room,\n            message: content,\n            created: created,\n            priority: priority,\n            type: InviteType.ChatRoom,\n            attachment: attachment\n        };\n        this.addMessageToChatLog(log, sent);\n        return sent;\n    }\n    getChatLogs() {\n        return [...this.chatLogs];\n    }\n    startChatWithUser(username) {\n        let roomName = null;\n        if (username) {\n            cmLogger(`Starting chat with ${username}`);\n            // first thing, do we have a chat log with this user (and just this user) already?\n            let chatLog = this.ensureChatLogExistsWithUser(username);\n            this.chatListeners.forEach((listener) => listener.handleChatLogUpdated(chatLog, false));\n            // invite the other user\n            SocketManager.getInstance().sendInvite(this.getCurrentUser(), username, chatLog.roomName, InviteType.ChatRoom, false, '');\n            // ok, lets connect to the server\n            SocketManager.getInstance().joinChat(this.getCurrentUser(), chatLog.roomName, InviteType.ChatRoom);\n            roomName = chatLog.roomName;\n        }\n        return roomName;\n    }\n    saveLogs() {\n        this.localStorage.setStateByName(ChatManager.chatLogKey + this.currentUsername, this.chatLogs, false);\n    }\n    saveBlockedList() {\n        this.localStorage.setStateByName(ChatManager.blockedListKey + this.currentUsername, this.blockedList, false);\n    }\n    saveFavouriteList() {\n        this.localStorage.setStateByName(ChatManager.favouriteListKey + this.currentUsername, this.favouriteList, false);\n    }\n    ensureChatLogExists(room) {\n        let log;\n        let index = this.chatLogs.findIndex((log) => log.roomName === room);\n        if (index < 0) {\n            log = {\n                roomName: room,\n                users: [this.getCurrentUser()],\n                messages: [],\n                lastViewed: parseInt(moment().format('YYYYMMDDHHmmss')),\n                numOfNewMessages: 0,\n                type: InviteType.ChatRoom,\n            };\n            this.chatLogs.push(log);\n            this.saveLogs();\n        }\n        else {\n            log = this.chatLogs[index];\n        }\n        return log;\n    }\n    ensureChatLogExistsWithUser(username) {\n        let foundLog = null;\n        let index = 0;\n        while (index < this.chatLogs.length) {\n            let log = this.chatLogs[index];\n            if (log.users.length === 2) {\n                // is the username in the two of this room?\n                if (log.users.findIndex((value) => value === username) >= 0) {\n                    foundLog = log;\n                    index = this.chatLogs.length;\n                }\n            }\n            index++;\n        }\n        if (!foundLog) {\n            foundLog = {\n                roomName: v4(),\n                users: [this.getCurrentUser(), username],\n                messages: [],\n                lastViewed: parseInt(moment().format('YYYYMMDDHHmmss')),\n                numOfNewMessages: 0,\n                type: InviteType.ChatRoom\n            };\n            this.chatLogs.push(foundLog);\n            this.saveLogs();\n        }\n        return foundLog;\n    }\n    doesChatRoomExist(room) {\n        let index = this.chatLogs.findIndex((log) => log.roomName === room);\n        return (index >= 0);\n    }\n    emitUnreadMessageCountChanged() {\n        var _a;\n        let unreadCount = 0;\n        this.chatLogs.forEach((log) => {\n            unreadCount += log.numOfNewMessages;\n        });\n        (_a = this.unreadListener) === null || _a === void 0 ? void 0 : _a.countChanged(unreadCount);\n    }\n    addMessageToChatLog(log, message) {\n        log.numOfNewMessages++;\n        log.messages.push(message);\n        this.emitUnreadMessageCountChanged();\n        if (message.from === this.getCurrentUser()) {\n            this.touchChatLog(log.roomName); // this will also save the logs\n        }\n        else {\n            this.saveLogs();\n        }\n    }\n    addSenderToRoomIfNotAlreadyPresent(chatLog, sender) {\n        let index = chatLog.users.findIndex((user) => user === sender);\n        if (index < 0) {\n            chatLog.users.push(sender);\n        }\n    }\n    removeChatLog(room) {\n        let index = this.chatLogs.findIndex((log) => log.roomName === room);\n        if (index >= 0) {\n            cmLogger(`Removing Chat log for room ${room}`);\n            let result = this.chatLogs.splice(index, 1);\n            cmLogger(result.length);\n            this.saveLogs();\n        }\n    }\n}\nChatManager.chatLogKey = 'im-board-chat-logs';\nChatManager.blockedListKey = 'im-board-blocked-list';\nChatManager.favouriteListKey = 'im-board-favourite-list';\n//# sourceMappingURL=ChatManager.js.map","import { ChatManager } from \"./ChatManager\";\nimport { NotificationManager, NotificationType } from \"../notification/NotificationManager\";\nimport debug from 'debug';\nimport { InviteType, Priority } from \"./Types\";\nconst notLogger = debug('notification-controller');\nexport class NotificationController {\n    constructor() {\n        this.doNotDisturb = false;\n        this.chatManager = ChatManager.getInstance();\n        this.doNotDisturb = false;\n        this.chatListeners = [];\n        this.chatUserListeners = [];\n        //bind the methods\n        this.handleChatLogUpdated = this.handleChatLogUpdated.bind(this);\n        this.handleLoggedInUsersUpdated = this.handleLoggedInUsersUpdated.bind(this);\n        this.handleFavouriteUserLoggedIn = this.handleFavouriteUserLoggedIn.bind(this);\n        this.handleFavouriteUserLoggedOut = this.handleFavouriteUserLoggedOut.bind(this);\n        this.chatManager.addChatEventHandler(this);\n        this.chatManager.addChatUserEventHandler(this);\n    }\n    static getInstance() {\n        if (!(NotificationController._instance)) {\n            NotificationController._instance = new NotificationController();\n        }\n        return NotificationController._instance;\n    }\n    handleInvitationDeclined(room, username) {\n        if ((this.doNotDisturb))\n            return;\n        // notify the user of the new chat\n        NotificationManager.getInstance().show('Room', `User ${username} has declined the invitation to join you.`, NotificationType.info, 7000);\n    }\n    handleNewInviteReceived(invite) {\n        let result = true;\n        // is this a chat room or score sheet?\n        if (invite.type === InviteType.ScoreSheet)\n            return true;\n        if ((this.doNotDisturb) && (!invite.requiresAcceptDecline))\n            return result;\n        if (invite.requiresAcceptDecline) {\n            // notify the user of the invitation\n            //result = controller.askUserAboutInvitation(invite); ///////TO FIX\n        }\n        else {\n            // notify the user of the new chat\n            NotificationManager.getInstance().show('Chat Room', `User ${invite.from} has invited you.`, NotificationType.info, 7000);\n        }\n        return result;\n    }\n    addListener(listener) {\n        this.chatListeners.push(listener);\n    }\n    addUserListener(listener) {\n        this.chatUserListeners.push(listener);\n    }\n    setDoNotDisturb(dontDisturbMe = true) {\n        this.doNotDisturb = dontDisturbMe;\n    }\n    blackListUser(username, isBlackedListed = true) {\n        if (isBlackedListed) {\n            this.chatManager.addUserToBlockedList(username);\n        }\n        else {\n            this.chatManager.removeUserFromBlockedList(username);\n        }\n    }\n    favouriteUser(username, isFavourited = true) {\n        if (isFavourited) {\n            this.chatManager.addUserToFavouriteList(username);\n        }\n        else {\n            this.chatManager.removeUserFromFavouriteList(username);\n        }\n    }\n    isFavouriteUser(username) {\n        return this.chatManager.isUserInFavouriteList(username);\n    }\n    isBlockedUser(username) {\n        return this.chatManager.isUserInBlockedList(username);\n    }\n    handleChatLogsUpdated() {\n        this.chatListeners.forEach((listener) => listener.handleChatLogsUpdated());\n    }\n    handleChatLogUpdated(log, wasOffline = false) {\n        notLogger(`Handle chat log updated`);\n        notLogger(log);\n        // pass on the changes\n        this.chatListeners.forEach((listener) => listener.handleChatLogUpdated(log, wasOffline));\n        if (!wasOffline) {\n            // get the last message added, it won't be from ourselves (the chat manager takes care of that)\n            if (log.messages.length > 0) {\n                const displayMessage = log.messages[log.messages.length - 1];\n                // provide visual notifications if do not disturb is not on, unless the message is marked priority\n                if (this.doNotDisturb && (displayMessage.priority !== Priority.Urgent))\n                    return;\n                NotificationManager.getInstance().show(displayMessage.from, displayMessage.message, NotificationType.message, 3000);\n            }\n        }\n    }\n    handleLoggedInUsersUpdated(usernames) {\n        notLogger(`Handle logged in users updated`);\n        notLogger(usernames);\n        // allow the view to change the user statuses\n        this.chatUserListeners.forEach((listener) => listener.handleLoggedInUsersUpdated(usernames));\n    }\n    handleFavouriteUserLoggedIn(username) {\n        notLogger(`Handle favourite user ${username} logged in`);\n        // allow the view to change the user statuses\n        this.chatUserListeners.forEach((listener) => listener.handleFavouriteUserLoggedIn(username));\n        // provide visual notifications if do not disturb is not on\n        if (this.doNotDisturb)\n            return;\n        NotificationManager.getInstance().show(username, `User ${username} has logged in.`, NotificationType.warning, 5000);\n    }\n    handleFavouriteUserLoggedOut(username) {\n        notLogger(`Handle favourite user ${username} logged out`);\n        // allow the view to change the user statuses\n        this.chatUserListeners.forEach((listener) => listener.handleFavouriteUserLoggedOut(username));\n        // provide visual notifications if do not disturb is not on\n        if (this.doNotDisturb)\n            return;\n        NotificationManager.getInstance().show(username, `User ${username} has logged out.`, NotificationType.priority, 4000);\n    }\n    handleBlockedUsersChanged(usernames) {\n        notLogger(`Handle blocked users changed to ${usernames}`);\n        this.chatUserListeners.forEach((listener) => listener.handleBlockedUsersChanged(usernames));\n    }\n    handleFavouriteUsersChanged(usernames) {\n        notLogger(`Handle favourite users changed to ${usernames}`);\n        this.chatUserListeners.forEach((listener) => listener.handleFavouriteUsersChanged(usernames));\n    }\n    startChatWithUser(username) {\n        return ChatManager.getInstance().startChatWithUser(username);\n    }\n    handleChatStarted(log) {\n        this.chatListeners.forEach((listener) => listener.handleChatStarted(log));\n    }\n    handleOfflineMessagesReceived(messages) {\n        // provide visual notifications if do not disturb is not on\n        if (this.doNotDisturb)\n            return;\n        if (messages.length === 0)\n            return;\n        NotificationManager.getInstance().show(\"Offline messages received\", `You have received ${messages.length} messages since you last logged out.`);\n    }\n}\n//# sourceMappingURL=NotificationController.js.map","import debug from 'debug';\nimport { InviteType, Priority } from \"./Types\";\nconst sDebug = debug('socket-ts');\nexport class SocketManager {\n    constructor() {\n        this.chatReceivers = [];\n        this.callbackForMessage = this.callbackForMessage.bind(this);\n        this.callbackForData = this.callbackForData.bind(this);\n        this.listener = null;\n        this.socket = null;\n        this.chatReceivers = [];\n        this.callbackForMessage = this.callbackForMessage.bind(this);\n        this.callbackForLogin = this.callbackForLogin.bind(this);\n        this.callbackForLogout = this.callbackForLogout.bind(this);\n        this.callbackForJoinRoom = this.callbackForJoinRoom.bind(this);\n        this.callbackForExitRoom = this.callbackForExitRoom.bind(this);\n        this.callbackForInvite = this.callbackForInvite.bind(this);\n        this.callbackForChat = this.callbackForChat.bind(this);\n        this.callbackForQueue = this.callbackForQueue.bind(this);\n        this.callbackForUserList = this.callbackForUserList.bind(this);\n        this.callbackForDeclineInvite = this.callbackForDeclineInvite.bind(this);\n    }\n    static getInstance() {\n        if (!(SocketManager._instance)) {\n            SocketManager._instance = new SocketManager();\n        }\n        return SocketManager._instance;\n    }\n    addChatReceiver(receiver) {\n        this.chatReceivers.push(receiver);\n    }\n    setListener(listener) {\n        sDebug('Setting listener');\n        this.listener = listener;\n        sDebug('Creating socket connection');\n        // @ts-ignore\n        this.socket = io();\n        sDebug('Waiting for messages');\n        this.socket.on('message', this.callbackForMessage);\n        this.socket.on('data', this.callbackForData);\n        this.socket.on('login', this.callbackForLogin);\n        this.socket.on('logout', this.callbackForLogout);\n        this.socket.on('joinroom', this.callbackForJoinRoom);\n        this.socket.on('exitroom', this.callbackForExitRoom);\n        this.socket.on('invite', this.callbackForInvite);\n        this.socket.on('declineinvite', this.callbackForDeclineInvite);\n        this.socket.on('chat', this.callbackForChat);\n        this.socket.on('queue', this.callbackForQueue);\n        this.socket.on('userlist', this.callbackForUserList);\n    }\n    login(username) {\n        this.socket.emit('login', { username });\n    }\n    logout(username) {\n        this.socket.emit('logout', { username });\n    }\n    joinChat(username, room, type) {\n        this.socket.emit('joinroom', { username, room, type });\n    }\n    leaveChat(username, room, type) {\n        this.socket.emit('exitroom', { username, room, type });\n    }\n    sendInvite(from, to, room, type = InviteType.ChatRoom, requiresAcceptDecline = false, subject = '', attachment = {}) {\n        let inviteObj = {\n            from: from,\n            to: to,\n            room: room,\n            type: type,\n            requiresAcceptDecline: requiresAcceptDecline,\n            subject: subject,\n            attachment: attachment\n        };\n        sDebug(`Sending invite`);\n        sDebug(inviteObj);\n        this.socket.emit('invite', inviteObj);\n    }\n    sendMessage(from, room, message, created, type, priority = Priority.Normal, attachment = {}) {\n        let messageObj = {\n            from: from,\n            room: room,\n            message: message,\n            created: created,\n            priority: priority,\n            type: type,\n            attachment: attachment\n        };\n        this.socket.emit('chat', messageObj);\n    }\n    getUserList() {\n        this.socket.emit('userlist');\n    }\n    sendDeclineInvite(room, from, type) {\n        this.socket.emit('declineinvite', { room, from, type });\n    }\n    callbackForMessage(content) {\n        sDebug(`Received message : ${content}`);\n        try {\n            sDebug(content);\n            // should be a server side ChatMessage {room, message,user}\n            const dataObj = JSON.parse(content);\n            this.chatReceivers.forEach((receiver) => receiver.receiveMessage(dataObj));\n        }\n        catch (err) {\n            sDebug(err);\n            sDebug('Not JSON data');\n        }\n    }\n    callbackForLogin(message) {\n        sDebug(`Received login : ${message}`);\n        this.chatReceivers.forEach((receiver) => receiver.receiveLogin(message));\n    }\n    callbackForUserList(message) {\n        sDebug(`Received user list : ${message}`);\n        this.chatReceivers.forEach((receiver) => receiver.receiveUserList(message));\n    }\n    callbackForLogout(message) {\n        sDebug(`Received logout : ${message}`);\n        this.chatReceivers.forEach((receiver) => receiver.receiveLogout(message));\n    }\n    callbackForJoinRoom(data) {\n        sDebug(`Received joined room : ${data}`);\n        try {\n            const dataObj = JSON.parse(data);\n            sDebug(dataObj);\n            this.chatReceivers.forEach((receiver) => receiver.receiveJoinedRoom(dataObj));\n        }\n        catch (err) {\n            sDebug('Not JSON data');\n        }\n    }\n    callbackForExitRoom(data) {\n        sDebug(`Received left room : ${data}`);\n        try {\n            const dataObj = JSON.parse(data);\n            sDebug(dataObj);\n            this.chatReceivers.forEach((receiver) => receiver.receivedLeftRoom(dataObj));\n        }\n        catch (err) {\n            sDebug('Not JSON data');\n        }\n    }\n    callbackForInvite(data) {\n        sDebug(`Received invite : ${data}`);\n        try {\n            const dataObj = JSON.parse(data);\n            sDebug(dataObj);\n            this.chatReceivers.forEach((receiver) => receiver.receiveInvitation(dataObj));\n        }\n        catch (err) {\n            sDebug('Not JSON data');\n        }\n    }\n    callbackForDeclineInvite(data) {\n        sDebug(`Received declined invite : ${data}`);\n        try {\n            const dataObj = JSON.parse(data);\n            sDebug(dataObj);\n            this.chatReceivers.forEach((receiver) => receiver.receiveDecline(dataObj.room, dataObj.username, dataObj.type));\n        }\n        catch (err) {\n            sDebug(err);\n            sDebug('Not JSON data');\n        }\n    }\n    callbackForChat(content) {\n        sDebug(`Received chat : ${content}`);\n        try {\n            // should be a server side ChatMessage {room, message,user}\n            const dataObj = JSON.parse(content);\n            sDebug(dataObj);\n            this.chatReceivers.forEach((receiver) => receiver.receiveMessage(dataObj));\n        }\n        catch (err) {\n            sDebug('Not JSON data');\n        }\n    }\n    callbackForQueue(data) {\n        sDebug(`Received queued items : ${data}`);\n        try {\n            const dataObj = JSON.parse(data);\n            sDebug(dataObj);\n            // this object should contain two arrays of invites and messages\n            if (dataObj.invites && (dataObj.invites.length > 0)) {\n                this.chatReceivers.forEach((receiver) => receiver.receiveQueuedInvites(dataObj.invites));\n            }\n            if (dataObj.messages && (dataObj.messages.length > 0)) {\n                this.chatReceivers.forEach((receiver) => receiver.receiveQueuedMessages(dataObj.messages));\n            }\n        }\n        catch (err) {\n            sDebug('Not JSON data');\n        }\n    }\n    /*\n    *\n    *  expecting a JSON data object with the following attributes\n    *  1.  type: \"create\"|\"update\"|\"delete\"\n    *  2.  objectType: string name of the object type changed\n    *  3.  data: the new representation of the object\n    *  4.  user: application specific id for the user who made the change\n    *        - the application view is required to implement getCurrentUser() to compare the user who made the change\n    *\n     */\n    callbackForData(message) {\n        sDebug(`Received data`);\n        try {\n            const dataObj = JSON.parse(message);\n            sDebug(dataObj);\n            if (this.listener === null)\n                return;\n            if (dataObj.user === this.listener.getCurrentUser()) {\n                sDebug(\"change made by this user, ignoring\");\n            }\n            else {\n                sDebug(\"change made by another user, passing off to the application\");\n                this.listener.handleDataChangedByAnotherUser(dataObj);\n            }\n        }\n        catch (err) {\n            sDebug('Not JSON data');\n        }\n    }\n}\n//# sourceMappingURL=SocketManager.js.map","export var Priority;\n(function (Priority) {\n    Priority[Priority[\"Normal\"] = 0] = \"Normal\";\n    Priority[Priority[\"High\"] = 1] = \"High\";\n    Priority[Priority[\"Urgent\"] = 2] = \"Urgent\";\n})(Priority || (Priority = {}));\nexport var InviteType;\n(function (InviteType) {\n    InviteType[InviteType[\"ChatRoom\"] = 0] = \"ChatRoom\";\n    InviteType[InviteType[\"ScoreSheet\"] = 1] = \"ScoreSheet\";\n})(InviteType || (InviteType = {}));\n//# sourceMappingURL=Types.js.map","import debug from 'debug';\nimport { StateEventType, StateManagerType } from \"./StateManager\";\nimport { StateChangedDelegate } from \"./StateChangedDelegate\";\nimport { ComparisonType } from \"../CommonTypes\";\nconst smLogger = debug('state-manager-ts');\nexport class AbstractStateManager {\n    constructor(managerName, defaultEquality, fnPerState = null) {\n        this.forceSaves = true;\n        this.managerName = '';\n        this.equalityFns = null;\n        this.delegate = new StateChangedDelegate(managerName);\n        this.managerName = managerName;\n        this.defaultEquality = defaultEquality;\n        if (fnPerState) {\n            this.equalityFns = fnPerState;\n        }\n        this.emitEvents();\n        this.forceSaves = true;\n    }\n    receivedFilterResults(name, filterResults) {\n        this.delegate.informChangeListenersForStateWithName(name, filterResults, StateEventType.FilterResults, null);\n    }\n    suppressEvents() {\n        this.delegate.suppressEvents();\n    }\n    emitEvents() {\n        this.delegate.emitEvents();\n    }\n    dontForceSavesOnAddRemoveUpdate() {\n        this.forceSaves = false;\n    }\n    forceSavesOnAddRemoveUpdate() {\n        this.forceSaves = true;\n    }\n    informChangeListenersForStateWithName(name, stateObjValue, eventType = StateEventType.StateChanged, previousObjValue = null) {\n        this.delegate.informChangeListenersForStateWithName(name, stateObjValue, eventType, previousObjValue);\n    }\n    addChangeListenerForName(name, listener) {\n        this.delegate.addChangeListenerForName(name, listener);\n    }\n    _findItemsInState(name, filters) {\n        let results = [];\n        const state = this._getState(name);\n        try {\n            state.value.forEach((item) => {\n                let isMatch = true;\n                filters.forEach((filter) => {\n                    if (isMatch) { // don't bother with other filters if we have already failed\n                        let attributeValue = item[filter.attributeName];\n                        if (filter.evaluator) {\n                            isMatch = filter.evaluator(item, filter);\n                        }\n                        else {\n                            switch (filter.comparison) {\n                                case ComparisonType.isNull: {\n                                    isMatch = !(attributeValue);\n                                    break;\n                                }\n                                case ComparisonType.isNotNull: {\n                                    if (attributeValue) {\n                                        isMatch = true;\n                                    }\n                                    break;\n                                }\n                                case ComparisonType.equals: {\n                                    isMatch = ((attributeValue) && (attributeValue === filter.value));\n                                    break;\n                                }\n                                case ComparisonType.lessThan: {\n                                    isMatch = ((attributeValue) && (attributeValue < filter.value));\n                                    break;\n                                }\n                                case ComparisonType.greaterThan: {\n                                    isMatch = ((attributeValue) && (attributeValue > filter.value));\n                                    break;\n                                }\n                                case ComparisonType.lessThanEqual: {\n                                    isMatch = ((attributeValue) && (attributeValue <= filter.value));\n                                    break;\n                                }\n                                case ComparisonType.greaterThanEqual: {\n                                    isMatch = ((attributeValue) && (attributeValue >= filter.value));\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                });\n                if (isMatch)\n                    results.push(item);\n            });\n        }\n        catch (err) {\n            smLogger(`filter, state value for ${state.name} is not any array`);\n        }\n        return results;\n    }\n    addStateByName(name, stateObjForName) {\n        this._ensureStatePresent(name);\n        /* create a new state attribute for the application state */\n        const state = {\n            name,\n            value: stateObjForName,\n        };\n        /* get the current state value and replace it */\n        this._replaceNamedStateInStorage(state);\n        this.informChangeListenersForStateWithName(name, stateObjForName, StateEventType.StateChanged);\n        return stateObjForName;\n    }\n    getStateByName(name) {\n        this._ensureStatePresent(name);\n        smLogger(`State Manager: Getting state for ${name}`);\n        let stateValueObj = {};\n        // get the current state\n        const state = this._getState(name);\n        stateValueObj = state.value;\n        smLogger(`State Manager: Found previous state for ${name}`);\n        smLogger(stateValueObj);\n        return stateValueObj;\n    }\n    setStateByName(name, stateObjectForName, informListeners = true) {\n        this._ensureStatePresent(name);\n        smLogger(`State Manager: Setting state for ${name}`);\n        smLogger(stateObjectForName);\n        // set the current state\n        const state = this._getState(name);\n        state.value = stateObjectForName;\n        if (this.forceSaves)\n            this._saveState(name, stateObjectForName);\n        if (informListeners)\n            this.informChangeListenersForStateWithName(name, stateObjectForName);\n        return stateObjectForName;\n    }\n    addNewItemToState(name, item, isPersisted = false) {\n        this._ensureStatePresent(name);\n        smLogger(`State Manager: Adding item to state ${name}`);\n        // const state = this.getStateByName(name);\n        // state.push(item);\n        // smLogger(state);\n        this._addItemToState(name, item, isPersisted);\n        this.informChangeListenersForStateWithName(name, item, StateEventType.ItemAdded);\n    }\n    findItemInState(name, item) {\n        this._ensureStatePresent(name);\n        let result = {};\n        const state = this.getStateByName(name);\n        const foundIndex = state.findIndex((element) => this.getEqualityFnForName(name)(element, item));\n        smLogger(`Finding item in state ${name} - found index ${foundIndex}`);\n        smLogger(item);\n        if (foundIndex >= 0) {\n            result = state[foundIndex];\n        }\n        return result;\n    }\n    isItemInState(name, item) {\n        this._ensureStatePresent(name);\n        let result = false;\n        const state = this.getStateByName(name);\n        const foundIndex = state.findIndex((element) => this.getEqualityFnForName(name)(element, item));\n        if (foundIndex >= 0) {\n            result = true;\n        }\n        return result;\n    }\n    removeItemFromState(name, item, isPersisted) {\n        this._ensureStatePresent(name);\n        let result = true;\n        let oldItem = this.findItemInState(name, item);\n        // remove the item from the state\n        smLogger(`State Manager: Found item - removing, is persisted ${isPersisted}`);\n        this._removeItemFromState(name, item, isPersisted);\n        this.informChangeListenersForStateWithName(name, oldItem, StateEventType.ItemDeleted);\n        return result;\n    }\n    updateItemInState(name, item, isPersisted) {\n        this._ensureStatePresent(name);\n        let result = true;\n        let oldItem = this.findItemInState(name, item);\n        smLogger('State Manager: Found item - replacing ');\n        this._updateItemInState(name, item, isPersisted);\n        this.informChangeListenersForStateWithName(name, item, StateEventType.ItemUpdated, oldItem);\n        return result;\n    }\n    findItemsInState(name, filters) {\n        this._ensureStatePresent(name);\n        return this._findItemsInState(name, filters);\n    }\n    getType() {\n        return StateManagerType.Local;\n    }\n    getEqualityFnForName(name) {\n        let result = this.defaultEquality;\n        if (this.equalityFns) {\n            const foundIndex = this.equalityFns.findIndex((fn) => fn.name === name);\n            if (foundIndex >= 0)\n                result = this.equalityFns[foundIndex].equality;\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=AbstractStateManager.js.map","import debug from 'debug';\nimport { AbstractStateManager } from \"./AbstractStateManager\";\nconst aggLogger = debug('state-manager-aggregate');\nexport class AggregateStateManager extends AbstractStateManager {\n    constructor(defaultEq, equalityFns = null) {\n        super('aggregate', defaultEq, equalityFns);\n        this.stateManagers = [];\n        this.emitEvents();\n    }\n    addStateManager(stateManager, filters = [], emitEvents) {\n        let mWF = {\n            manager: stateManager,\n            filters: filters\n        };\n        this.stateManagers.push(mWF);\n        if (!emitEvents)\n            stateManager.suppressEvents();\n        aggLogger('adding state manager with/without filters');\n    }\n    _addNewNamedStateToStorage(state) {\n        this.stateManagers.forEach((managerWithFilters) => {\n            if (!this.stateNameInFilters(state.name, managerWithFilters.filters)) {\n                managerWithFilters.manager._addNewNamedStateToStorage(state);\n            }\n        });\n    }\n    _getState(name) {\n        let state = {\n            name: name,\n            value: []\n        };\n        this.stateManagers.forEach((sm) => {\n            if (!this.stateNameInFilters(state.name, sm.filters)) {\n                aggLogger(`get state from state manager for state ${name}`);\n                aggLogger(sm.manager);\n                sm.manager._getState(name);\n            }\n        });\n        // assuming the state manager is holding all the values\n        if (this.stateManagers.length > 0) {\n            state = this.stateManagers[0].manager._getState(name);\n        }\n        return state;\n    }\n    _ensureStatePresent(name) {\n        this.stateManagers.forEach((managerWithFilters) => {\n            if (!this.stateNameInFilters(name, managerWithFilters.filters)) {\n                managerWithFilters.manager._ensureStatePresent(name);\n            }\n        });\n    }\n    _replaceNamedStateInStorage(state) {\n        this.stateManagers.forEach((managerWithFilters) => {\n            if (!this.stateNameInFilters(state.name, managerWithFilters.filters)) {\n                managerWithFilters.manager._replaceNamedStateInStorage(state);\n            }\n        });\n    }\n    _saveState(name, stateObj) {\n        this.stateManagers.forEach((managerWithFilters) => {\n            if (!this.stateNameInFilters(name, managerWithFilters.filters)) {\n                aggLogger(`saving state in state manager for state ${name}`);\n                aggLogger(managerWithFilters.manager);\n                aggLogger(stateObj);\n                managerWithFilters.manager._saveState(name, stateObj);\n            }\n        });\n    }\n    _addItemToState(name, stateObj, isPersisted = false) {\n        this.stateManagers.forEach((managerWithFilters) => {\n            if (!this.stateNameInFilters(name, managerWithFilters.filters)) {\n                aggLogger(`adding item to state in  state manager for state ${name}, is persisted = ${isPersisted}`);\n                aggLogger(managerWithFilters.manager);\n                aggLogger(stateObj);\n                managerWithFilters.manager._addItemToState(name, stateObj, isPersisted);\n            }\n        });\n    }\n    _removeItemFromState(name, stateObj, isPersisted) {\n        this.stateManagers.forEach((managerWithFilters) => {\n            if (!this.stateNameInFilters(name, managerWithFilters.filters)) {\n                aggLogger(`removing item from state in state manager for state ${name}, is persisted = ${isPersisted}`);\n                aggLogger(managerWithFilters.manager);\n                aggLogger(stateObj);\n                managerWithFilters.manager._removeItemFromState(name, stateObj, isPersisted);\n            }\n        });\n    }\n    _updateItemInState(name, stateObj, isPersisted) {\n        this.stateManagers.forEach((managerWithFilters) => {\n            if (!this.stateNameInFilters(name, managerWithFilters.filters)) {\n                aggLogger(`updating item in state in  state manager for state ${name}`);\n                aggLogger(managerWithFilters.manager);\n                aggLogger(stateObj);\n                managerWithFilters.manager._updateItemInState(name, stateObj, isPersisted);\n            }\n        });\n    }\n    _findItemsInState(name, filters) {\n        let state = {\n            name: name,\n            value: []\n        };\n        this.stateManagers.forEach((sm) => {\n            if (!this.stateNameInFilters(state.name, sm.filters)) {\n                aggLogger(`get state from state manager for state ${name}`);\n                aggLogger(sm.manager);\n                sm.manager._findItemsInState(name, filters);\n            }\n        });\n        // assuming the state manager is holding all the values\n        if (this.stateManagers.length > 0) {\n            state = this.stateManagers[0].manager._getState(name);\n        }\n        return state.value;\n    }\n    stateNameInFilters(name, filters) {\n        let foundIndex = filters.findIndex((filter) => filter === name);\n        return (foundIndex >= 0);\n    }\n}\n//# sourceMappingURL=AggregateStateManager.js.map","import debug from 'debug';\nimport { AbstractStateManager } from \"./AbstractStateManager\";\nconst asyncLogger = debug('state-manager-async');\nexport class AsyncStateManagerWrapper extends AbstractStateManager {\n    constructor(topLevelSM, wrappedSM, defaultEq) {\n        super('async', defaultEq);\n        this.topLevelSM = topLevelSM;\n        this.wrappedSM = wrappedSM;\n        this.forceSaves = false;\n        this.wrappedSM.emitEvents();\n        let stateNamesToMonitor = this.wrappedSM.getConfiguredStateNames();\n        this.stateChanged = this.stateChanged.bind(this);\n        this.stateChangedItemAdded = this.stateChangedItemAdded.bind(this);\n        this.stateChangedItemRemoved = this.stateChangedItemRemoved.bind(this);\n        this.stateChangedItemUpdated = this.stateChangedItemUpdated.bind(this);\n        stateNamesToMonitor.forEach((stateName) => {\n            this.wrappedSM.addChangeListenerForName(stateName, this);\n        });\n    }\n    getType() {\n        return this.wrappedSM.getType();\n    }\n    _findItemsInState(name, filters) {\n        asyncLogger(`finding items with filters`);\n        return this.wrappedSM.findItemsInState(name, filters);\n    }\n    _addItemToState(name, stateObj, isPersisted = false) {\n        asyncLogger(`adding item to state ${name} - is persisted ${isPersisted}`);\n        this.wrappedSM.addNewItemToState(name, stateObj, isPersisted);\n    }\n    _getState(name) {\n        // assume wrapped SM is asynchronous\n        // make the call to get state but supply the caller with an empty state for now\n        asyncLogger(`getting state ${name}`);\n        this.wrappedSM.getStateByName(name);\n        return { name: name, value: [] };\n    }\n    _removeItemFromState(name, stateObj, isPersisted) {\n        asyncLogger(`removing item from state ${name} is persisted ${isPersisted}`);\n        this.wrappedSM.removeItemFromState(name, stateObj, isPersisted);\n    }\n    _updateItemInState(name, stateObj, isPersisted) {\n        asyncLogger(`updating item in state ${name}`);\n        this.wrappedSM.updateItemInState(name, stateObj, isPersisted);\n    }\n    _ensureStatePresent(name) {\n    } // assume already present\n    _addNewNamedStateToStorage(state) {\n    } // assume already present\n    _replaceNamedStateInStorage(state) {\n    } // not implemented, not replacing state wholesale\n    _saveState(name, stateObj) {\n    } // not implemented, not replacing state wholesale\n    stateChangedItemRemoved(managerName, name, itemRemoved) {\n    } // not implemented, assumes called to wrapped SM worked\n    stateChangedItemUpdated(managerName, name, itemUpdated, itemNewValue) {\n    } // not implemented, assumes called to wrapped SM worked\n    stateChanged(managerName, name, newValue) {\n        // received new state from the wrapped SM\n        // pass the received state to the top level SM\n        asyncLogger(`Wrapped SM has supplied new state ${name} passing to top level SM`);\n        asyncLogger(newValue);\n        this.topLevelSM.setStateByName(name, newValue);\n    }\n    stateChangedItemAdded(managerName, name, itemAdded) {\n        asyncLogger(`Wrapped SM has supplied new completed item for state ${name} passing to top level SM`);\n        this.topLevelSM.addNewItemToState(name, itemAdded, true);\n    }\n    getListenerName() {\n        return \"Async Manager\";\n    }\n    filterResults(managerName, name, filterResults) {\n        asyncLogger(`Wrapped SM has supplied filter results ${name} passing to top level SM`);\n        this.topLevelSM.receivedFilterResults(name, filterResults);\n    }\n}\n//# sourceMappingURL=AsyncStateManagerWrapper.js.map","import debug from 'debug';\nimport { AbstractStateManager } from \"./AbstractStateManager\";\nconst lsLogger = debug('browser-storage');\nexport class BrowserStorageStateManager extends AbstractStateManager {\n    constructor(useLocalStorage = false, allowPersistence = false, defaultEq, equalFns = null) {\n        super('browser', defaultEq, equalFns);\n        // @ts-ignore\n        this.configuration = [];\n        this.storage = window.sessionStorage;\n        this.allowPersistence = allowPersistence;\n        if (useLocalStorage)\n            this.storage = window.localStorage;\n        this.forceSaves = true;\n    }\n    _ensureStatePresent(name) {\n        if (this.storage.getItem(name) === null) {\n            this._addNewNamedStateToStorage({ name: name, value: [] });\n        }\n    }\n    _addNewNamedStateToStorage(state) {\n        lsLogger(`Local Storage: Saving with key ${state.name}`);\n        lsLogger(state);\n        const stringifiedSaveData = JSON.stringify(state.value);\n        lsLogger(stringifiedSaveData);\n        this.storage.setItem(state.name, stringifiedSaveData);\n    }\n    _replaceNamedStateInStorage(state) {\n        this._addNewNamedStateToStorage(state);\n    }\n    _getState(name) {\n        let savedResults = [];\n        lsLogger(`Local Storage: Loading with key ${name}`);\n        const savedResultsJSON = this.storage.getItem(name);\n        lsLogger(savedResultsJSON);\n        if (savedResultsJSON !== null) {\n            savedResults = JSON.parse(savedResultsJSON);\n        }\n        return { name: name, value: savedResults };\n    }\n    _saveState(name, newValue) {\n        this._addNewNamedStateToStorage({ name: name, value: newValue });\n    }\n    _addItemToState(name, stateObj, isPersisted = false) {\n        if (!isPersisted) {\n            if (!this.allowPersistence) {\n                return;\n            }\n        }\n        let state = this._getState(name);\n        lsLogger(`adding item to state ${name}`);\n        lsLogger(stateObj);\n        state.value.push(stateObj);\n        this._replaceNamedStateInStorage(state);\n    }\n    _removeItemFromState(name, stateObj, isPersisted) {\n        let state = this._getState(name);\n        const valueIndex = state.value.findIndex((element) => this.getEqualityFnForName(name)(element, stateObj));\n        if (valueIndex >= 0) {\n            lsLogger(`removing item from state ${name}`);\n            lsLogger(stateObj);\n            state.value.splice(valueIndex, 1);\n        }\n        this._replaceNamedStateInStorage(state);\n    }\n    _updateItemInState(name, stateObj, isPersisted) {\n        let state = this._getState(name);\n        const valueIndex = state.value.findIndex((element) => this.getEqualityFnForName(name)(element, stateObj));\n        if (valueIndex >= 0) {\n            state.value.splice(valueIndex, 1, stateObj);\n            lsLogger(`updating item in state ${name}`);\n            lsLogger(stateObj);\n        }\n        this._replaceNamedStateInStorage(state);\n    }\n    forceResetForGet(stateName) {\n    }\n    getConfiguredStateNames() {\n        return this.configuration;\n    }\n    hasCompletedRun(stateName) {\n        return false;\n    }\n    initialise(config) {\n        this.configuration = config;\n    }\n}\n//# sourceMappingURL=BrowserStorageStateManager.js.map","import debug from 'debug';\nimport { BrowserStorageStateManager } from \"./BrowserStorageStateManager\";\nimport { SecurityManager } from \"../security/SecurityManager\";\nconst lsLogger = debug('browser-storage-encrypted');\nexport class EncryptedBrowserStorageStateManager extends BrowserStorageStateManager {\n    constructor(useLocalStorage = false, defaultEq, equalFns = null) {\n        super(useLocalStorage, true, defaultEq, equalFns);\n        this._addNewNamedStateToStorage = this._addNewNamedStateToStorage.bind(this);\n    }\n    _addNewNamedStateToStorage(state) {\n        lsLogger(`Saving with key ${state.name}`);\n        lsLogger(state);\n        const stringifiedSaveData = SecurityManager.getInstance().encryptObject(state.value);\n        lsLogger(stringifiedSaveData);\n        const userStateName = SecurityManager.getInstance().getLoggedInUsername().trim() + '.' + state.name;\n        this.storage.setItem(userStateName, stringifiedSaveData);\n    }\n    _getState(name) {\n        let savedResults = [];\n        lsLogger(`Loading with key ${name}`);\n        const userStateName = SecurityManager.getInstance().getLoggedInUsername().trim() + '.' + name;\n        const savedResultsJSON = this.storage.getItem(userStateName);\n        if (savedResultsJSON !== null) {\n            savedResults = SecurityManager.getInstance().decryptObject(savedResultsJSON);\n            lsLogger(`Loading with key ${name} decrypted to `);\n            lsLogger(`Loading with key ${name} decrypted to `);\n            lsLogger(savedResults);\n        }\n        return { name: name, value: savedResults };\n    }\n}\n//# sourceMappingURL=EncryptedBrowserStorageStateManager.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport debug from 'debug';\nimport { openDB } from \"idb\";\nimport { IndexedDBStateManager } from \"./IndexedDBStateManager\";\nimport { SecurityManager } from \"../security/SecurityManager\";\nimport { StateEventType } from \"./StateManager\";\nconst logger = debug('indexeddb-ts-encrypted');\nexport class EncryptedIndexedDBStateManager extends IndexedDBStateManager {\n    constructor() {\n        super();\n        this.initialise = this.initialise.bind(this);\n    }\n    initialise(dbName, collections) {\n        const _super = Object.create(null, {\n            initialise: { get: () => super.initialise }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`opening encrypted database for ${dbName} with collections`);\n            const username = SecurityManager.getInstance().getLoggedInUsername();\n            this.dbName = `${username}.${dbName}`;\n            _super.initialise.call(this, this.dbName, collections);\n        });\n    }\n    /* add a new item to the local storage if not already there */\n    addNewItemToCollection(key, item, keyField = 'id') {\n        const _super = Object.create(null, {\n            addNewItemToCollection: { get: () => super.addNewItemToCollection }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (item !== null) {\n                let encrypted = {};\n                // @ts-ignore\n                encrypted[keyField] = item[keyField];\n                // @ts-ignore\n                encrypted.data = SecurityManager.getInstance().encryptObject(item);\n                logger(encrypted);\n                _super.addNewItemToCollection.call(this, key, encrypted, keyField);\n            }\n        });\n    }\n    updateItemInCollection(key, item, keyField = 'id') {\n        const _super = Object.create(null, {\n            updateItemInCollection: { get: () => super.updateItemInCollection }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (item) {\n                let encrypted = {};\n                // @ts-ignore\n                encrypted[keyField] = item[keyField];\n                // @ts-ignore\n                encrypted.data = SecurityManager.getInstance().encryptObject(item);\n                logger(encrypted);\n                _super.updateItemInCollection.call(this, key, encrypted, keyField);\n            }\n        });\n    }\n    getWithCollectionKey(key, keyField = 'id') {\n        return __awaiter(this, void 0, void 0, function* () {\n            let savedResults = [];\n            logger(`Loading with key ${key}`);\n            let db = yield openDB(this.dbName, 1);\n            yield this.checkForObjectStore(db, key, keyField);\n            // @ts-ignore\n            let transaction = db.transaction([key]);\n            // @ts-ignore\n            let objectStore = transaction.store;\n            // @ts-ignore\n            let cursor = yield objectStore.openCursor();\n            while (cursor) {\n                let item = SecurityManager.getInstance().decryptObject(cursor.value.data);\n                logger(item);\n                // @ts-ignore\n                savedResults.push(item);\n                // @ts-ignore\n                cursor = yield cursor.continue();\n            }\n            logger(savedResults);\n            this.callbackForGetItems(savedResults, key);\n        });\n    }\n    callbackForAddItem(data, associatedStateName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`callback for add encrypted item for state ${associatedStateName}  - FORWARDING`);\n            let decryptedItem = SecurityManager.getInstance().decryptObject(data.data);\n            logger(decryptedItem);\n            this.delegate.informChangeListenersForStateWithName(associatedStateName, decryptedItem, StateEventType.ItemAdded, null);\n        });\n    }\n}\n//# sourceMappingURL=EncryptedIndexedDBStateManager.js.map","import { StateEventType, StateManagerType } from \"./StateManager\";\nimport { RequestType } from \"../network/Types\";\nimport { DownloadManager } from \"../network/DownloadManager\";\nimport debug from 'debug';\nimport { StateChangedDelegate } from \"./StateChangedDelegate\";\nimport { CallbackRegistry } from \"../network/CallbackRegistry\";\n/*\n*\n*   WORK IN PROGRESS\n*\n */\nconst logger = debug('state-manager-graphql');\nexport class GraphQLApiStateManager {\n    constructor() {\n        this.configuration = [];\n        this.delegate = new StateChangedDelegate('graphql');\n        this.emitEvents();\n        this.bHasCompletedRun = [];\n        this.callbackForAddItem = this.callbackForAddItem.bind(this);\n        this.callbackForRemoveItem = this.callbackForRemoveItem.bind(this);\n        this.callbackForUpdateItem = this.callbackForUpdateItem.bind(this);\n        this.callbackForGetItems = this.callbackForGetItems.bind(this);\n        CallbackRegistry.getInstance().addRegisterCallback(GraphQLApiStateManager.FUNCTION_ID_ADD_ITEM, this.callbackForAddItem);\n        CallbackRegistry.getInstance().addRegisterCallback(GraphQLApiStateManager.FUNCTION_ID_REMOVE_ITEM, this.callbackForRemoveItem);\n        CallbackRegistry.getInstance().addRegisterCallback(GraphQLApiStateManager.FUNCTION_ID_UPDATE_ITEM, this.callbackForUpdateItem);\n        CallbackRegistry.getInstance().addRegisterCallback(GraphQLApiStateManager.FUNCTION_ID_GET_ITEMS, this.callbackForGetItems);\n    }\n    static getInstance() {\n        if (!(GraphQLApiStateManager._instance)) {\n            GraphQLApiStateManager._instance = new GraphQLApiStateManager();\n        }\n        return GraphQLApiStateManager._instance;\n    }\n    getConfiguredStateNames() {\n        let results = [];\n        this.configuration.forEach((config) => {\n            results.push(config.stateName);\n        });\n        return results;\n    }\n    hasCompletedRun(stateName) {\n        let result = false;\n        let foundIndex = this.configuration.findIndex((config) => config.stateName === stateName);\n        if (foundIndex >= 0) {\n            result = this.bHasCompletedRun[foundIndex];\n        }\n        return result;\n    }\n    setCompletedRun(stateName) {\n        let foundIndex = this.configuration.findIndex((config) => config.stateName === stateName);\n        if (foundIndex >= 0) {\n            this.bHasCompletedRun[foundIndex] = true;\n        }\n    }\n    forceResetForGet(stateName) {\n        let foundIndex = this.configuration.findIndex((config) => config.stateName === stateName);\n        if (foundIndex >= 0) {\n            this.bHasCompletedRun[foundIndex] = false;\n        }\n    }\n    initialise(config) {\n        this.configuration = config;\n        let runsComplete = [];\n        this.configuration.forEach((configItem) => {\n            runsComplete.push(false);\n        });\n        this.bHasCompletedRun = runsComplete;\n    }\n    _addNewNamedStateToStorage(state) {\n    }\n    _getState(name) {\n        logger(`Getting All ${name}`);\n        if (this.hasCompletedRun(name)) {\n            logger(`Getting All ${name} - not done - previously retrieved`);\n        }\n        else {\n            let config = this.getConfigurationForStateName(name);\n            if (config.isActive) {\n                let query = config.apis.findAll;\n                const jsonRequest = {\n                    url: config.serverURL + config.apiURL,\n                    type: RequestType.POST,\n                    params: { query },\n                    callbackId: GraphQLApiStateManager.FUNCTION_ID_GET_ITEMS,\n                    associatedStateName: name\n                };\n                logger(`Getting All ${name} with query \"${query}\"`);\n                DownloadManager.getInstance().addApiRequest(jsonRequest, true);\n            }\n            else {\n                logger(`No configuration for state ${name}`);\n            }\n        }\n        let state = { name: name, value: [] };\n        return state;\n    }\n    _ensureStatePresent(name) {\n    }\n    _replaceNamedStateInStorage(state) {\n    }\n    _saveState(name, stateObj) {\n    }\n    _addItemToState(name, stateObj, isPersisted = false) {\n        if (isPersisted)\n            return; // dont add complete objects to the state - they are already processed\n        logger(`Adding item to ${name}`);\n        logger(stateObj);\n        let config = this.getConfigurationForStateName(name);\n        if (config.isActive) {\n            DownloadManager.getInstance().addQLApiRequest(config.serverURL + config.apiURL, config.apis.create, { data: stateObj }, GraphQLApiStateManager.FUNCTION_ID_ADD_ITEM, name, false);\n        }\n        else {\n            logger(`No configuration for state ${name}`);\n        }\n    }\n    _removeItemFromState(name, stateObj, isPersisted) {\n        if (isPersisted)\n            return; // dont remove complete objects to the state - they are already processed\n        logger(`Removing item to ${name}`);\n        logger(stateObj);\n        let config = this.getConfigurationForStateName(name);\n        if (config.isActive) {\n            let identifier = stateObj.id;\n            if (config.idField) {\n                identifier = stateObj[config.idField];\n            }\n            DownloadManager.getInstance().addQLApiRequest(config.serverURL + config.apiURL, config.apis.destroy, { identifier: identifier }, GraphQLApiStateManager.FUNCTION_ID_UPDATE_ITEM, name, false);\n        }\n        else {\n            logger(`No configuration for state ${name}`);\n        }\n    }\n    _updateItemInState(name, stateObj, isPersisted) {\n        if (isPersisted)\n            return; // dont update complete objects to the state - they are already processed\n        logger(`Updating item in ${name}`);\n        logger(stateObj);\n        let config = this.getConfigurationForStateName(name);\n        if (config.isActive) {\n            DownloadManager.getInstance().addQLApiRequest(config.serverURL + config.apiURL, config.apis.update, { data: stateObj }, GraphQLApiStateManager.FUNCTION_ID_REMOVE_ITEM, name, false);\n        }\n        else {\n            logger(`No configuration for state ${name}`);\n        }\n    }\n    addChangeListenerForName(name, listener) {\n        this.delegate.addChangeListenerForName(name, listener);\n    }\n    addNewItemToState(name, item, isPersisted) {\n        this._addItemToState(name, item, isPersisted);\n    }\n    emitEvents() {\n        this.delegate.emitEvents();\n    }\n    findItemInState(name, item) {\n        throw Error(\"not implemented\");\n    }\n    getStateByName(name) {\n        this._getState(name);\n    }\n    informChangeListenersForStateWithName(name, stateObjValue, eventType, previousObjValue) {\n        this.delegate.informChangeListenersForStateWithName(name, stateObjValue, eventType, previousObjValue);\n    }\n    isItemInState(name, item) {\n        return true;\n    }\n    removeItemFromState(name, item, isPersisted) {\n        this._removeItemFromState(name, item, isPersisted);\n        return true;\n    }\n    setStateByName(name, stateObjectForName, informListeners) {\n    }\n    suppressEvents() {\n        this.delegate.suppressEvents();\n    }\n    updateItemInState(name, item, isPersisted) {\n        this._updateItemInState(name, item, isPersisted);\n        return true;\n    }\n    _findItemsInState(name, filters) {\n        return [];\n    }\n    findItemsInState(name, filters) {\n        return [];\n    }\n    getType() {\n        return StateManagerType.AsyncRemote;\n    }\n    getConfigurationForStateName(name) {\n        let config = {\n            stateName: name,\n            serverURL: '',\n            apiURL: '/graphql',\n            apis: {\n                findAll: '',\n                create: '',\n                destroy: '',\n                update: '',\n                find: ''\n            },\n            data: {\n                findAll: '',\n                create: '',\n                destroy: '',\n                update: '',\n                find: ''\n            },\n            isActive: false\n        };\n        let foundIndex = this.configuration.findIndex((config) => config.stateName === name);\n        if (foundIndex >= 0) {\n            config = this.configuration[foundIndex];\n        }\n        return config;\n    }\n    callbackForRemoveItem(data, status, associatedStateName) {\n        logger(`callback for remove item for state ${associatedStateName} with status ${status} - not forwarded`);\n        if (status >= 200 && status <= 299) { // do we have any data?\n        }\n        logger(data);\n    }\n    callbackForUpdateItem(data, status, associatedStateName) {\n        logger(`callback for update item for state ${associatedStateName} with status ${status} - not forwarded`);\n        if (status >= 200 && status <= 299) { // do we have any data?\n        }\n        logger(data);\n    }\n    callbackForGetItems(data, status, associatedStateName) {\n        logger(`callback for get items for state ${associatedStateName} with status ${status} - FORWARDING`);\n        if (status >= 200 && status <= 299) { // do we have any data?\n            logger(data);\n            let config = this.getConfigurationForStateName(associatedStateName);\n            let dataAttribute = config.data.findAll;\n            this.setCompletedRun(associatedStateName);\n            this.delegate.informChangeListenersForStateWithName(associatedStateName, data.data[dataAttribute], StateEventType.StateChanged, null);\n        }\n    }\n    callbackForAddItem(data, status, associatedStateName, wasOffline) {\n        logger(`callback for add item for state ${associatedStateName} with status ${status} - FORWARDING`);\n        if (status >= 200 && status <= 299) { // do we have any data?\n            logger(data);\n            if (!wasOffline) {\n                this.delegate.informChangeListenersForStateWithName(associatedStateName, data, StateEventType.ItemAdded, null);\n            }\n            else {\n                logger('Item was added offline, update the current data');\n                this.delegate.informChangeListenersForStateWithName(associatedStateName, data, StateEventType.ItemUpdated, null);\n            }\n        }\n        // did the call fail? (server loss)\n        if (status === 500) {\n            logger(`Item adding - offline, but will be queued later`);\n            this.delegate.informChangeListenersForStateWithName(associatedStateName, data, StateEventType.ItemAdded, null);\n        }\n    }\n}\nGraphQLApiStateManager.FUNCTION_ID_ADD_ITEM = 'graphql.api.state.manager.add.item';\nGraphQLApiStateManager.FUNCTION_ID_REMOVE_ITEM = 'graphql.api.state.manager.remove.item';\nGraphQLApiStateManager.FUNCTION_ID_UPDATE_ITEM = 'graphql.api.state.manager.update.item';\nGraphQLApiStateManager.FUNCTION_ID_GET_ITEMS = 'graphql.api.state.manager.get.items';\n//# sourceMappingURL=GraphQLApiStateManager.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport debug from 'debug';\nimport { openDB } from \"idb\";\nimport { StateEventType, StateManagerType } from \"./StateManager\";\nimport { StateChangedDelegate } from \"./StateChangedDelegate\";\nconst logger = debug('indexeddb-ts');\nexport class IndexedDBStateManager {\n    constructor() {\n        this.dbName = 'default';\n        this.delegate = new StateChangedDelegate('indexeddb');\n        this.emitEvents();\n        this.bHasCompletedRun = [];\n        this.collections = [];\n        this.callbackForAddItem = this.callbackForAddItem.bind(this);\n        this.callbackForRemoveItem = this.callbackForRemoveItem.bind(this);\n        this.callbackForUpdateItem = this.callbackForUpdateItem.bind(this);\n        this.callbackForGetItems = this.callbackForGetItems.bind(this);\n    }\n    static getInstance() {\n        if (!IndexedDBStateManager.instance) {\n            IndexedDBStateManager.instance = new IndexedDBStateManager();\n        }\n        return IndexedDBStateManager.instance;\n    }\n    hasCompletedRun(stateName) {\n        let result = false;\n        let foundIndex = this.collections.findIndex((collection) => collection.name === stateName);\n        if (foundIndex >= 0) {\n            result = this.bHasCompletedRun[foundIndex];\n        }\n        return result;\n    }\n    setCompletedRun(stateName) {\n        let foundIndex = this.collections.findIndex((collection) => collection.name === stateName);\n        if (foundIndex >= 0) {\n            this.bHasCompletedRun[foundIndex] = true;\n        }\n    }\n    forceResetForGet(stateName) {\n        let foundIndex = this.collections.findIndex((collection) => collection.name === stateName);\n        if (foundIndex >= 0) {\n            this.bHasCompletedRun[foundIndex] = false;\n        }\n    }\n    initialise(dbName, collections) {\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`opening database for ${dbName} with collections`);\n            logger(collections);\n            this.dbName = dbName;\n            this.collections = collections;\n            let runsComplete = [];\n            this.collections.forEach((collection) => {\n                runsComplete.push(false);\n            });\n            this.bHasCompletedRun = runsComplete;\n            yield openDB(dbName, 1, {\n                upgrade(db, oldVersion, newVersion, transaction) {\n                    collections.forEach((collection) => {\n                        logger(`creating collection for ${collection.name} with key ${collection.keyField}`);\n                        db.createObjectStore(collection.name, { keyPath: collection.keyField, autoIncrement: false });\n                    });\n                },\n                blocked() {\n                    // \n                },\n                blocking() {\n                    // \n                },\n                terminated() {\n                    // \n                },\n            });\n        });\n    }\n    _addNewNamedStateToStorage(state) {\n    }\n    _getState(name) {\n        if (this.hasCompletedRun(name)) {\n            logger(`Getting All ${name} - not done - previously retrieved`);\n        }\n        else {\n            logger(`getting state ${name}`);\n            this.getWithCollectionKey(name, this.getKeyFieldForKey(name));\n        }\n        let state = { name: name, value: [] };\n        return state;\n    }\n    _ensureStatePresent(name) {\n    } // should be present with initialise\n    _replaceNamedStateInStorage(state) {\n        let fn = () => __awaiter(this, void 0, void 0, function* () {\n            logger(`replacing item in storage ${state.name}`);\n            logger(state.value);\n            yield this.removeAllItemsFromCollectionKey(state.name, this.getKeyFieldForKey(state.name));\n            yield this.saveWithCollectionKey(state.name, state.value, this.getKeyFieldForKey(state.name));\n        });\n        fn();\n    }\n    _addItemToState(name, stateObj, isPersisted = false) {\n        if (isPersisted)\n            return;\n        this.addNewItemToCollection(name, stateObj, this.getKeyFieldForKey(name));\n    }\n    _removeItemFromState(name, stateObj, isPersisted) {\n        if (isPersisted)\n            return;\n        this.removeItemFromCollection(name, stateObj, this.getKeyFieldForKey(name));\n    }\n    _updateItemInState(name, stateObj, isPersisted) {\n        if (isPersisted)\n            return;\n        this.updateItemInCollection(name, stateObj, this.getKeyFieldForKey(name));\n    }\n    _saveState(name, stateObj) {\n        let fn = () => __awaiter(this, void 0, void 0, function* () {\n            logger(`saving state ${name}`);\n            yield this.removeAllItemsFromCollectionKey(name, this.getKeyFieldForKey(name));\n            yield this.saveWithCollectionKey(name, stateObj, this.getKeyFieldForKey(name));\n        });\n        fn();\n    }\n    saveWithCollectionKey(key, saveData, keyField = 'id') {\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`Saving array with key ${key}`);\n            logger(saveData);\n            let db = yield openDB(this.dbName, 1);\n            // @ts-ignore\n            let transaction = db.transaction([key], \"readwrite\");\n            transaction.oncomplete = function (ev) {\n                logger('Success');\n                logger(ev);\n            };\n            transaction.onerror = function (ev) {\n                logger('Error');\n                logger(ev);\n            };\n            // @ts-ignore\n            let objectStore = transaction.store;\n            // @ts-ignore\n            yield this.saveItemsToCollection(objectStore, saveData, keyField);\n        });\n    }\n    /* add a new item to the local storage if not already there */\n    addNewItemToCollection(key, item, keyField = 'id') {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (item !== null) {\n                logger(`Adding with key ${key}`);\n                logger(item);\n                let db = yield openDB(this.dbName, 1);\n                // @ts-ignore\n                let transaction = db.transaction([key], \"readwrite\").objectStore(key).add(item);\n                transaction.oncomplete = function (ev) {\n                    logger('Success');\n                    logger(ev);\n                };\n                transaction.onerror = function (ev) {\n                    logger('Error');\n                    logger(ev);\n                };\n                this.callbackForAddItem(item, key);\n            }\n        });\n    }\n    removeItemFromCollection(key, item, keyField = 'id') {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (item !== null) {\n                logger(`Removing with key ${key} item ${item[keyField]}`);\n                logger(item);\n                let db = yield openDB(this.dbName, 1);\n                // @ts-ignore\n                let transaction = db.transaction([key], \"readwrite\").objectStore(key).delete(item[keyField]);\n                transaction.oncomplete = function (ev) {\n                    logger('Success');\n                    logger(ev);\n                };\n                transaction.onerror = function (ev) {\n                    logger('Error');\n                    logger(ev);\n                };\n                yield transaction.done;\n                this.callbackForRemoveItem(item, key);\n            }\n        });\n    }\n    updateItemInCollection(key, item, keyField = 'id') {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (item) {\n                logger(`Updating item in storage ${key}`);\n                logger(item);\n                let db = yield openDB(this.dbName, 1);\n                // @ts-ignore\n                let transaction = db.transaction([key], \"readwrite\").objectStore(key).put(item);\n                transaction.oncomplete = function (ev) {\n                    logger('Success');\n                    logger(ev);\n                };\n                transaction.onerror = function (ev) {\n                    logger('Error');\n                    logger(ev);\n                };\n                // @ts-ignore\n                yield transaction.done;\n                this.callbackForUpdateItem(item, key);\n            }\n        });\n    }\n    addChangeListenerForName(name, listener) {\n        this.delegate.addChangeListenerForName(name, listener);\n    }\n    addNewItemToState(name, item, isPersisted) {\n        this._addItemToState(name, item, isPersisted);\n    }\n    emitEvents() {\n        this.delegate.emitEvents();\n    }\n    findItemInState(name, item) {\n        throw Error(\"not implemented\");\n    }\n    getStateByName(name) {\n        this._getState(name);\n    }\n    informChangeListenersForStateWithName(name, stateObjValue, eventType, previousObjValue) {\n        this.delegate.informChangeListenersForStateWithName(name, stateObjValue, eventType, previousObjValue);\n    }\n    isItemInState(name, item) {\n        return true;\n    }\n    removeItemFromState(name, item, isPersisted) {\n        logger(`Removing item from state ${name} is persisted ${isPersisted}`);\n        logger(item);\n        this._removeItemFromState(name, item, isPersisted);\n        return true;\n    }\n    setStateByName(name, stateObjectForName, informListeners) {\n        this._replaceNamedStateInStorage({ name: name, value: stateObjectForName });\n        if (informListeners)\n            this.delegate.informChangeListenersForStateWithName(name, stateObjectForName, StateEventType.StateChanged, null);\n    }\n    suppressEvents() {\n        this.delegate.suppressEvents();\n    }\n    updateItemInState(name, item, isPersisted) {\n        this._updateItemInState(name, item, isPersisted);\n        return true;\n    }\n    getWithCollectionKey(key, keyField = 'id') {\n        return __awaiter(this, void 0, void 0, function* () {\n            let savedResults = [];\n            logger(`Loading with key ${key}`);\n            let db = yield openDB(this.dbName, 1);\n            yield this.checkForObjectStore(db, key, keyField);\n            // @ts-ignore\n            let transaction = db.transaction([key]);\n            // @ts-ignore\n            let objectStore = transaction.store;\n            // @ts-ignore\n            let cursor = yield objectStore.openCursor();\n            while (cursor) {\n                // @ts-ignore\n                savedResults.push(cursor.value);\n                // @ts-ignore\n                cursor = yield cursor.continue();\n            }\n            logger(savedResults);\n            this.callbackForGetItems(savedResults, key);\n        });\n    }\n    getConfiguredStateNames() {\n        let result = [];\n        this.collections.forEach((collection) => {\n            result.push(collection.name);\n        });\n        return result;\n    }\n    _findItemsInState(name, filters) {\n        return [];\n    }\n    findItemsInState(name, filters) {\n        return [];\n    }\n    getType() {\n        return StateManagerType.AsyncLocal;\n    }\n    getKeyFieldForKey(key) {\n        let result = '_id';\n        const foundIndex = this.collections.findIndex((collection) => collection.name === key);\n        if (foundIndex >= 0) {\n            result = this.collections[foundIndex].keyField;\n        }\n        return result;\n    }\n    checkForObjectStore(db, key, keyField) {\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`Checking for collection ${key}`);\n            if (!db.objectStoreNames.contains(key)) {\n                // @ts-ignore\n                logger(`Checking for collection ${key} - NOT found, creating`);\n                yield db.createObjectStore(key, { keyPath: keyField, autoIncrement: false });\n            }\n        });\n    }\n    saveItemsToCollection(objectStore, saveData, keyField = 'id') {\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`Saving items to collection`);\n            saveData.forEach((data) => {\n                // @ts-ignore\n                objectStore.add(data);\n            });\n        });\n    }\n    removeAllItemsFromCollectionKey(key, keyField = 'id') {\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`Clearing collection ${key}`);\n            let db = yield openDB(this.dbName, 1);\n            yield this.checkForObjectStore(db, key, keyField);\n            // @ts-ignore\n            let transaction = db.transaction([key], \"readwrite\");\n            // @ts-ignore\n            let objectStore = transaction.store;\n            // @ts-ignore\n            yield objectStore.clear();\n        });\n    }\n    callbackForRemoveItem(data, associatedStateName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`callback for remove item for state ${associatedStateName}  - not forwarded`);\n            logger(data);\n        });\n    }\n    callbackForUpdateItem(data, associatedStateName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`callback for update item for state ${associatedStateName}  - not forwarded`);\n            logger(data);\n        });\n    }\n    callbackForGetItems(data, associatedStateName) {\n        logger(`callback for get items for state ${associatedStateName} - FORWARDING`);\n        logger(data);\n        this.setCompletedRun(associatedStateName);\n        this.delegate.informChangeListenersForStateWithName(associatedStateName, data, StateEventType.StateChanged, null);\n    }\n    callbackForAddItem(data, associatedStateName) {\n        return __awaiter(this, void 0, void 0, function* () {\n            logger(`callback for add item for state ${associatedStateName}  - FORWARDING`);\n            logger(data);\n            this.delegate.informChangeListenersForStateWithName(associatedStateName, data, StateEventType.ItemAdded, null);\n        });\n    }\n}\n//# sourceMappingURL=IndexedDBStateManager.js.map","import debug from 'debug';\nimport { AbstractStateManager } from './AbstractStateManager';\nconst msManager = debug('state-manager-ms');\n/** To Do - make state unchangeable outside of this class (i.e. deep copies) */\nexport class MemoryBufferStateManager extends AbstractStateManager {\n    constructor(defaultEq, equalFns = null) {\n        super('memory', defaultEq, equalFns);\n        this.applicationState = [];\n        this.forceSaves = true;\n    }\n    _ensureStatePresent(name) {\n        let foundIndex = this.applicationState.findIndex(element => element.name === name);\n        if (foundIndex < 0) {\n            let state = {\n                name: name,\n                value: []\n            };\n            this.applicationState.push(state);\n        }\n    }\n    _addNewNamedStateToStorage(state) {\n        msManager(`Adding new complete state ${name}`);\n        msManager(state.value);\n        this.applicationState.push(state);\n    }\n    _replaceNamedStateInStorage(state) {\n        let foundIndex = this.applicationState.findIndex(element => element.name === state.name);\n        if (foundIndex >= 0) {\n            msManager(`replacing complete state ${name}`);\n            msManager(state.value);\n            this.applicationState.splice(foundIndex, 1, state);\n        }\n    }\n    _getState(name) {\n        // @ts-ignore\n        let state = this.applicationState.find(element => element.name === name);\n        msManager(`getting complete state ${name}`);\n        msManager(state.value);\n        return state;\n    }\n    _saveState(name, stateObject) {\n        let foundIndex = this.applicationState.findIndex(element => element.name === name);\n        if (foundIndex >= 0) {\n            let state = this.applicationState[foundIndex];\n            msManager(`SAVING complete state ${name}`);\n            msManager(state.value);\n            state.value = stateObject;\n        }\n    }\n    _addItemToState(name, stateObj, isPersisted = false) {\n        if (!isPersisted)\n            return; // dont add incomplete objects to the state\n        let foundIndex = this.applicationState.findIndex(element => element.name === name);\n        if (foundIndex >= 0) {\n            let state = this.applicationState[foundIndex];\n            msManager(`adding item to state ${name}`);\n            msManager(stateObj);\n            state.value.push(stateObj);\n        }\n    }\n    _removeItemFromState(name, stateObj, isPersisted) {\n        let foundIndex = this.applicationState.findIndex(element => element.name === name);\n        if (foundIndex >= 0) {\n            let state = this.applicationState[foundIndex];\n            const valueIndex = state.value.findIndex((element) => this.getEqualityFnForName(name)(element, stateObj));\n            if (valueIndex >= 0) {\n                msManager(`removing item from state ${name}`);\n                msManager(stateObj);\n                state.value.splice(valueIndex, 1);\n            }\n        }\n    }\n    _updateItemInState(name, stateObj, isPersisted) {\n        let foundIndex = this.applicationState.findIndex(element => element.name === name);\n        if (foundIndex >= 0) {\n            let state = this.applicationState[foundIndex];\n            const valueIndex = state.value.findIndex((element) => this.getEqualityFnForName(name)(element, stateObj));\n            if (valueIndex >= 0) {\n                state.value.splice(valueIndex, 1, stateObj);\n                msManager(`updating item in state ${name}`);\n                msManager(stateObj);\n            }\n        }\n        else {\n            this._addItemToState(name, stateObj, true);\n        }\n    }\n}\n//# sourceMappingURL=MemoryBufferStateManager.js.map","import { StateEventType, StateManagerType } from \"./StateManager\";\nimport { RequestType } from \"../network/Types\";\nimport { DownloadManager } from \"../network/DownloadManager\";\nimport debug from 'debug';\nimport { StateChangedDelegate } from \"./StateChangedDelegate\";\nimport { CallbackRegistry } from \"../network/CallbackRegistry\";\nconst logger = debug('state-manager-api');\nexport class RESTApiStateManager {\n    constructor() {\n        this.configuration = [];\n        this.delegate = new StateChangedDelegate('restapi');\n        this.emitEvents();\n        this.bHasCompletedRun = [];\n        this.callbackForAddItem = this.callbackForAddItem.bind(this);\n        this.callbackForRemoveItem = this.callbackForRemoveItem.bind(this);\n        this.callbackForUpdateItem = this.callbackForUpdateItem.bind(this);\n        this.callbackForGetItems = this.callbackForGetItems.bind(this);\n        CallbackRegistry.getInstance().addRegisterCallback(RESTApiStateManager.FUNCTION_ID_ADD_ITEM, this.callbackForAddItem);\n        CallbackRegistry.getInstance().addRegisterCallback(RESTApiStateManager.FUNCTION_ID_REMOVE_ITEM, this.callbackForRemoveItem);\n        CallbackRegistry.getInstance().addRegisterCallback(RESTApiStateManager.FUNCTION_ID_UPDATE_ITEM, this.callbackForUpdateItem);\n        CallbackRegistry.getInstance().addRegisterCallback(RESTApiStateManager.FUNCTION_ID_GET_ITEMS, this.callbackForGetItems);\n    }\n    static getInstance() {\n        if (!(RESTApiStateManager._instance)) {\n            RESTApiStateManager._instance = new RESTApiStateManager();\n        }\n        return RESTApiStateManager._instance;\n    }\n    getConfiguredStateNames() {\n        let results = [];\n        this.configuration.forEach((config) => {\n            results.push(config.stateName);\n        });\n        return results;\n    }\n    hasCompletedRun(stateName) {\n        let result = false;\n        let foundIndex = this.configuration.findIndex((config) => config.stateName === stateName);\n        if (foundIndex >= 0) {\n            result = this.bHasCompletedRun[foundIndex];\n        }\n        return result;\n    }\n    setCompletedRun(stateName) {\n        let foundIndex = this.configuration.findIndex((config) => config.stateName === stateName);\n        if (foundIndex >= 0) {\n            this.bHasCompletedRun[foundIndex] = true;\n        }\n    }\n    forceResetForGet(stateName) {\n        let foundIndex = this.configuration.findIndex((config) => config.stateName === stateName);\n        if (foundIndex >= 0) {\n            this.bHasCompletedRun[foundIndex] = false;\n        }\n    }\n    initialise(config) {\n        this.configuration = config;\n        let runsComplete = [];\n        this.configuration.forEach((configItem) => {\n            runsComplete.push(false);\n        });\n        this.bHasCompletedRun = runsComplete;\n    }\n    _addNewNamedStateToStorage(state) {\n    }\n    _getState(name) {\n        logger(`Getting All ${name}`);\n        if (this.hasCompletedRun(name)) {\n            logger(`Getting All ${name} - not done - previously retrieved`);\n        }\n        else {\n            let config = this.getConfigurationForStateName(name);\n            if (config.isActive) {\n                const jsonRequest = {\n                    url: config.serverURL + config.api,\n                    type: RequestType.GET,\n                    params: {},\n                    callbackId: RESTApiStateManager.FUNCTION_ID_GET_ITEMS,\n                    associatedStateName: name\n                };\n                DownloadManager.getInstance().addApiRequest(jsonRequest, true);\n            }\n            else {\n                logger(`No configuration for state ${name}`);\n            }\n        }\n        let state = { name: name, value: [] };\n        return state;\n    }\n    _ensureStatePresent(name) {\n    }\n    _replaceNamedStateInStorage(state) {\n    }\n    _saveState(name, stateObj) {\n    }\n    _addItemToState(name, stateObj, isPersisted = false) {\n        if (isPersisted)\n            return; // dont add complete objects to the state - they are already processed\n        logger(`Adding item to ${name}`);\n        logger(stateObj);\n        let config = this.getConfigurationForStateName(name);\n        if (config.isActive) {\n            const jsonRequest = {\n                url: config.serverURL + config.api,\n                type: RequestType.POST,\n                params: stateObj,\n                callbackId: RESTApiStateManager.FUNCTION_ID_ADD_ITEM,\n                associatedStateName: name\n            };\n            DownloadManager.getInstance().addApiRequest(jsonRequest, true);\n        }\n        else {\n            logger(`No configuration for state ${name}`);\n        }\n    }\n    _removeItemFromState(name, stateObj, isPersisted) {\n        if (isPersisted)\n            return; // dont remove complete objects to the state - they are already processed\n        logger(`Removing item from ${name}`);\n        logger(stateObj);\n        let config = this.getConfigurationForStateName(name);\n        let identifier = stateObj.id;\n        if (config.idField) {\n            identifier = stateObj[config.idField];\n        }\n        if (config.isActive) {\n            const jsonRequest = {\n                url: config.serverURL + config.api,\n                type: RequestType.DELETE,\n                params: {\n                    id: identifier\n                },\n                callbackId: RESTApiStateManager.FUNCTION_ID_REMOVE_ITEM,\n                associatedStateName: name\n            };\n            DownloadManager.getInstance().addApiRequest(jsonRequest, true);\n        }\n        else {\n            logger(`No configuration for state ${name}`);\n        }\n    }\n    _updateItemInState(name, stateObj, isPersisted) {\n        if (isPersisted)\n            return; // dont update complete objects to the state - they are already processed\n        logger(`Updating item in ${name}`);\n        logger(stateObj);\n        let config = this.getConfigurationForStateName(name);\n        if (config.isActive) {\n            const jsonRequest = {\n                url: config.serverURL + config.api,\n                type: RequestType.PUT,\n                params: stateObj,\n                callbackId: RESTApiStateManager.FUNCTION_ID_UPDATE_ITEM,\n                associatedStateName: name\n            };\n            DownloadManager.getInstance().addApiRequest(jsonRequest, true);\n        }\n        else {\n            logger(`No configuration for state ${name}`);\n        }\n    }\n    addChangeListenerForName(name, listener) {\n        this.delegate.addChangeListenerForName(name, listener);\n    }\n    addNewItemToState(name, item, isPersisted) {\n        this._addItemToState(name, item, isPersisted);\n    }\n    emitEvents() {\n        this.delegate.emitEvents();\n    }\n    findItemInState(name, item) {\n        throw Error(\"not implemented\");\n    }\n    getStateByName(name) {\n        this._getState(name);\n    }\n    informChangeListenersForStateWithName(name, stateObjValue, eventType, previousObjValue) {\n        this.delegate.informChangeListenersForStateWithName(name, stateObjValue, eventType, previousObjValue);\n    }\n    isItemInState(name, item) {\n        return true;\n    }\n    removeItemFromState(name, item, isPersisted) {\n        logger(`Removing item from state ${name} is persisted ${isPersisted}`);\n        logger(item);\n        this._removeItemFromState(name, item, isPersisted);\n        return true;\n    }\n    setStateByName(name, stateObjectForName, informListeners) {\n    }\n    suppressEvents() {\n        this.delegate.suppressEvents();\n    }\n    updateItemInState(name, item, isPersisted) {\n        this._updateItemInState(name, item, isPersisted);\n        return true;\n    }\n    _findItemsInState(name, filters) {\n        // TO DO\n        return [];\n    }\n    findItemsInState(name, filters) {\n        return this._findItemsInState(name, filters);\n    }\n    getType() {\n        return StateManagerType.AsyncRemote;\n    }\n    getConfigurationForStateName(name) {\n        let config = {\n            stateName: name,\n            serverURL: '',\n            api: '',\n            isActive: false\n        };\n        let foundIndex = this.configuration.findIndex((config) => config.stateName === name);\n        if (foundIndex >= 0) {\n            config = this.configuration[foundIndex];\n        }\n        return config;\n    }\n    callbackForRemoveItem(data, status, associatedStateName) {\n        logger(`callback for remove item for state ${associatedStateName} with status ${status} - not forwarded`);\n        if (status >= 200 && status <= 299) { // do we have any data?\n        }\n        logger(data);\n    }\n    callbackForUpdateItem(data, status, associatedStateName) {\n        logger(`callback for update item for state ${associatedStateName} with status ${status} - not forwarded`);\n        if (status >= 200 && status <= 299) { // do we have any data?\n        }\n        logger(data);\n    }\n    callbackForGetItems(data, status, associatedStateName) {\n        logger(`callback for get items for state ${associatedStateName} with status ${status} - FORWARDING`);\n        logger(data);\n        if (status >= 200 && status <= 299) { // do we have any data?\n            this.setCompletedRun(associatedStateName);\n            this.delegate.informChangeListenersForStateWithName(associatedStateName, data, StateEventType.StateChanged, null);\n        }\n    }\n    callbackForAddItem(data, status, associatedStateName, wasOffline) {\n        logger(`callback for add item for state ${associatedStateName} with status ${status} - FORWARDING`);\n        if (status >= 200 && status <= 299) { // do we have any data?\n            logger(data);\n            if (!wasOffline) {\n                this.delegate.informChangeListenersForStateWithName(associatedStateName, data, StateEventType.ItemAdded, null);\n            }\n            else {\n                logger('Item was added offline, update the current data');\n                this.delegate.informChangeListenersForStateWithName(associatedStateName, data, StateEventType.ItemUpdated, null);\n            }\n        }\n        // did the call fail? (server loss)\n        if (status === 500) {\n            logger(data);\n            logger(`Item adding - offline, but will be queued later`);\n            this.delegate.informChangeListenersForStateWithName(associatedStateName, data, StateEventType.ItemAdded, null);\n        }\n    }\n}\nRESTApiStateManager.FUNCTION_ID_ADD_ITEM = 'rest.api.state.manager.add.item';\nRESTApiStateManager.FUNCTION_ID_REMOVE_ITEM = 'rest.api.state.manager.remove.item';\nRESTApiStateManager.FUNCTION_ID_UPDATE_ITEM = 'rest.api.state.manager.update.item';\nRESTApiStateManager.FUNCTION_ID_GET_ITEMS = 'rest.api.state.manager.get.items';\n//# sourceMappingURL=RESTApiStateManager.js.map","import { StateEventType } from \"./StateManager\";\nimport debug from \"debug\";\nconst smLogger = debug('state-manager-delegate');\nexport class StateChangedDelegate {\n    constructor(managerName) {\n        this.suppressEventEmits = false;\n        this.managerName = managerName;\n        this.stateChangeListeners = [];\n    }\n    suppressEvents() {\n        this.suppressEventEmits = true;\n    }\n    emitEvents() {\n        this.suppressEventEmits = false;\n    }\n    informChangeListenersForStateWithName(name, stateObjValue, eventType = StateEventType.StateChanged, previousObjValue = null) {\n        smLogger(`State Manager: Informing state listeners of ${name}`);\n        if (this.suppressEventEmits) {\n            smLogger(`State Manager: Events suppressed`);\n            return;\n        }\n        const foundIndex = this.stateChangeListeners.findIndex(element => element.name === name);\n        if (foundIndex >= 0) {\n            smLogger(`State Manager: Found state listeners of ${name} with event type ${eventType}`);\n            /* let each state change listener know */\n            const changeListenersForName = this.stateChangeListeners[foundIndex];\n            changeListenersForName.listeners.forEach((listener) => {\n                smLogger(`State Manager: Found state listener of ${name} with name ${listener.getListenerName()} - informing`);\n                try {\n                    switch (eventType) {\n                        case (StateEventType.StateChanged): {\n                            listener.stateChanged(this.managerName, name, stateObjValue);\n                            break;\n                        }\n                        case (StateEventType.ItemAdded): {\n                            listener.stateChangedItemAdded(this.managerName, name, stateObjValue);\n                            break;\n                        }\n                        case (StateEventType.ItemUpdated): {\n                            listener.stateChangedItemUpdated(this.managerName, name, previousObjValue, stateObjValue);\n                            break;\n                        }\n                        case (StateEventType.ItemDeleted): {\n                            listener.stateChangedItemRemoved(this.managerName, name, stateObjValue);\n                            break;\n                        }\n                        case (StateEventType.FilterResults): {\n                            listener.filterResults(this.managerName, name, stateObjValue);\n                            break;\n                        }\n                    }\n                }\n                catch (err) {\n                    console.log(err);\n                }\n            });\n        }\n    }\n    /*\n          Add a state listener for a given state name\n          the listener should be a function with two parameters\n          name - string - the name of the state variable that they want to be informed about\n          stateObjValue - object - the new state value\n         */\n    addChangeListenerForName(name, listener) {\n        this.ensureListenerSetupForName(name);\n        smLogger(`State Manager: Adding state listener for ${name} with name ${listener.getListenerName()}`);\n        const foundIndex = this.stateChangeListeners.findIndex(element => element.name === name);\n        if (foundIndex >= 0) {\n            smLogger(`State Manager: Adding state listener for ${name} with name ${listener.getListenerName()} with index ${foundIndex}`);\n            let changeListenersForName = this.stateChangeListeners[foundIndex];\n            changeListenersForName.listeners.push(listener);\n        }\n    }\n    ensureListenerSetupForName(name) {\n        const foundIndex = this.stateChangeListeners.findIndex(element => element.name === name);\n        if (foundIndex < 0) {\n            const listenersNameArrayPair = {\n                name,\n                listeners: [],\n            };\n            this.stateChangeListeners.push(listenersNameArrayPair);\n        }\n    }\n}\n//# sourceMappingURL=StateChangedDelegate.js.map","export var StateEventType;\n(function (StateEventType) {\n    StateEventType[StateEventType[\"ItemAdded\"] = 0] = \"ItemAdded\";\n    StateEventType[StateEventType[\"ItemUpdated\"] = 1] = \"ItemUpdated\";\n    StateEventType[StateEventType[\"ItemDeleted\"] = 2] = \"ItemDeleted\";\n    StateEventType[StateEventType[\"StateChanged\"] = 3] = \"StateChanged\";\n    StateEventType[StateEventType[\"FilterResults\"] = 4] = \"FilterResults\";\n})(StateEventType || (StateEventType = {}));\nexport var StateManagerType;\n(function (StateManagerType) {\n    StateManagerType[StateManagerType[\"Local\"] = 0] = \"Local\";\n    StateManagerType[StateManagerType[\"AsyncLocal\"] = 1] = \"AsyncLocal\";\n    StateManagerType[StateManagerType[\"AsyncRemote\"] = 2] = \"AsyncRemote\";\n})(StateManagerType || (StateManagerType = {}));\n//# sourceMappingURL=StateManager.js.map","export const DRAGGABLE_KEY_ID = 'text/plain';\nexport const DRAGGABLE_TYPE = 'draggedType';\nexport const DRAGGABLE_FROM = 'draggedFrom';\nexport const EXTRA_ACTION_ATTRIBUTE_NAME = 'view-extra-action';\nexport var Modifier;\n(function (Modifier) {\n    Modifier[Modifier[\"normal\"] = 0] = \"normal\";\n    Modifier[Modifier[\"active\"] = 1] = \"active\";\n    Modifier[Modifier[\"inactive\"] = 2] = \"inactive\";\n    Modifier[Modifier[\"warning\"] = 3] = \"warning\";\n})(Modifier || (Modifier = {}));\nexport var KeyType;\n(function (KeyType) {\n    KeyType[KeyType[\"number\"] = 0] = \"number\";\n    KeyType[KeyType[\"string\"] = 1] = \"string\";\n    KeyType[KeyType[\"boolean\"] = 2] = \"boolean\";\n    KeyType[KeyType[\"collection\"] = 3] = \"collection\";\n})(KeyType || (KeyType = {}));\nexport var SidebarLocation;\n(function (SidebarLocation) {\n    SidebarLocation[SidebarLocation[\"top\"] = 0] = \"top\";\n    SidebarLocation[SidebarLocation[\"right\"] = 1] = \"right\";\n    SidebarLocation[SidebarLocation[\"left\"] = 2] = \"left\";\n    SidebarLocation[SidebarLocation[\"bottom\"] = 3] = \"bottom\";\n})(SidebarLocation || (SidebarLocation = {}));\nexport var RowPosition;\n(function (RowPosition) {\n    RowPosition[RowPosition[\"first\"] = 0] = \"first\";\n    RowPosition[RowPosition[\"last\"] = 1] = \"last\";\n})(RowPosition || (RowPosition = {}));\nexport const SCREEN_WIDTH_LARGE = 992;\nexport const SCREEN_WIDTH_MEDIUM = 769;\nexport const SCREEN_WIDTH_SMALL = 415;\n//# sourceMappingURL=ConfigurationTypes.js.map","export var AlertType;\n(function (AlertType) {\n    AlertType[AlertType[\"cancelled\"] = 0] = \"cancelled\";\n    AlertType[AlertType[\"confirmed\"] = 1] = \"confirmed\";\n})(AlertType || (AlertType = {}));\n//# sourceMappingURL=AlertListener.js.map","import { AlertType } from \"./AlertListener\";\nimport debug from 'debug';\nconst ALERT_MODAL_ID = 'alert';\nconst ALERT_TITLE = 'alert-title';\nconst ALERT_CONTENT = 'alert-content';\nconst ALERT_CANCEL = 'alert-cancel';\nconst ALERT_CONFRIM = 'alert-confirm';\nconst ALERT_hideClass = \"d-none\";\nconst ALERT_showClass = \"d-block\";\nconst logger = debug('alert');\nexport class AlertManager {\n    constructor() {\n        this.alertDiv = document.getElementById(ALERT_MODAL_ID);\n        this.alertTitle = document.getElementById(ALERT_TITLE);\n        this.alertContent = document.getElementById(ALERT_CONTENT);\n        this.cancelButton = document.getElementById(ALERT_CANCEL);\n        this.confirmButton = document.getElementById(ALERT_CONFRIM);\n    }\n    static getInstance() {\n        if (!(AlertManager._instance)) {\n            AlertManager._instance = new AlertManager();\n        }\n        return AlertManager._instance;\n    }\n    startAlert(listener, title, content, context) {\n        this.alertTitle.innerHTML = title;\n        this.alertContent.innerHTML = content;\n        // @ts-ignore\n        this.alertDiv.classList.remove(ALERT_hideClass);\n        // @ts-ignore\n        this.alertDiv.classList.add(ALERT_showClass);\n        const confirmHandler = (event) => {\n            logger(`Handling confirm event from alert`);\n            listener.completed({ outcome: AlertType.confirmed, context: context });\n            // @ts-ignore\n            this.alertDiv.classList.add(ALERT_hideClass);\n            // @ts-ignore\n            this.alertDiv.classList.remove(ALERT_showClass);\n            // @ts-ignore\n            event.target.removeEventListener('click', confirmHandler);\n        };\n        const cancelHandler = (event) => {\n            logger(`Handling cancel event from alert`);\n            listener.completed({ outcome: AlertType.cancelled, context: context });\n            // @ts-ignore\n            this.alertDiv.classList.add(ALERT_hideClass);\n            // @ts-ignore\n            this.alertDiv.classList.remove(ALERT_showClass);\n            // @ts-ignore\n            event.target.removeEventListener('click', cancelHandler);\n        };\n        this.confirmButton.addEventListener('click', confirmHandler);\n        this.cancelButton.addEventListener('click', cancelHandler);\n    }\n}\n//# sourceMappingURL=AlertManager.js.map","import debug from 'debug';\nimport { NotificationController } from \"../../socket/NotificationController\";\nimport { ChatManager } from \"../../socket/ChatManager\";\nimport { AbstractStatefulCollectionView } from \"../view/implementation/AbstractStatefulCollectionView\";\nimport { KeyType, Modifier } from \"../ConfigurationTypes\";\nimport { ListViewRenderer } from \"../view/renderer/ListViewRenderer\";\nimport { DRAGGABLE, STATE_NAMES, VIEW_NAME } from \"./ChatTypes\";\nconst vLogger = debug('user-search-sidebar');\nexport class BlockedUserView extends AbstractStatefulCollectionView {\n    constructor(stateManager) {\n        super(BlockedUserView.DOMConfig, stateManager, STATE_NAMES.users);\n        // list renderer\n        this.renderer = new ListViewRenderer(this, this);\n        // handler binding\n        this.handleLoggedInUsersUpdated = this.handleLoggedInUsersUpdated.bind(this);\n        this.handleFavouriteUserLoggedIn = this.handleFavouriteUserLoggedIn.bind(this);\n        this.handleFavouriteUserLoggedOut = this.handleFavouriteUserLoggedOut.bind(this);\n        this.handleFavouriteUsersChanged = this.handleFavouriteUsersChanged.bind(this);\n        this.handleBlockedUsersChanged = this.handleBlockedUsersChanged.bind(this);\n        this.handleLoggedInUsersUpdated = this.handleLoggedInUsersUpdated.bind(this);\n        NotificationController.getInstance().addUserListener(this);\n    }\n    static getInstance(stateManager) {\n        if (!(BlockedUserView._instance)) {\n            BlockedUserView._instance = new BlockedUserView(stateManager);\n        }\n        return BlockedUserView._instance;\n    }\n    onDocumentLoaded() {\n        super.onDocumentLoaded();\n        this.addEventListener(this);\n    }\n    canDeleteItem(view, selectedItem) {\n        return true;\n    }\n    documentLoaded(view) {\n    }\n    itemDeleted(view, selectedItem) {\n        // @ts-ignore\n        vLogger(`Blocked user ${selectedItem.username} with id ${selectedItem.id} deleted - removing`);\n        ChatManager.getInstance().removeUserFromBlockedList(selectedItem.username);\n    }\n    itemSelected(view, selectedItem) {\n        throw new Error('Method not implemented.');\n    }\n    itemDragStarted(view, selectedItem) {\n        throw new Error('Method not implemented.');\n    }\n    itemAction(view, actionName, selectedItem) {\n        throw new Error('Method not implemented.');\n    }\n    hideRequested(view) {\n        throw new Error('Method not implemented.');\n    }\n    showRequested(view) {\n        throw new Error('Method not implemented.');\n    }\n    handleLoggedInUsersUpdated(usernames) {\n    }\n    handleFavouriteUserLoggedIn(username) {\n    }\n    handleFavouriteUserLoggedOut(username) {\n    }\n    handleFavouriteUsersChanged(usernames) {\n    }\n    handleBlockedUsersChanged(usernames) {\n        vLogger(`Handle Blocked Users changed to ${usernames}`);\n        this.updateViewForNamedCollection('', {});\n    }\n    renderDisplayForItemInNamedCollection(containerEl, name, item) {\n        containerEl.innerHTML = item.username;\n    }\n    getSecondaryModifierForItemInNamedCollection(name, item) {\n        return Modifier.warning;\n    }\n    getIdForItemInNamedCollection(name, item) {\n        return item._id;\n    }\n    updateViewForNamedCollection(name, newState) {\n        var _a;\n        // find the blocked users in the user list\n        let blockedUsers = [];\n        const users = (_a = this.stateManager) === null || _a === void 0 ? void 0 : _a.getStateByName(STATE_NAMES.users);\n        if (users) {\n            users.forEach((user) => {\n                if (ChatManager.getInstance().isUserInBlockedList(user.username)) {\n                    blockedUsers.push(user);\n                }\n            });\n        }\n        super.updateViewForNamedCollection(name, blockedUsers);\n    }\n    itemDropped(view, droppedItem) {\n        if (ChatManager.getInstance().isUserInBlockedList(droppedItem.username)) {\n            vLogger(`${droppedItem.username} already in blocked list, ignoring`);\n            return;\n        }\n        // add the user to the Chat Manager and we should get an event about it\n        ChatManager.getInstance().addUserToBlockedList(droppedItem.username);\n    }\n    itemDeselected(view, selectedItem) {\n    }\n    canSelectItem(view, selectedItem) {\n        return false;\n    }\n}\nBlockedUserView.DOMConfig = {\n    viewConfig: {\n        resultsContainerId: 'blockedUsers',\n        dataSourceId: VIEW_NAME.blockedUsers,\n        drop: {\n            acceptFrom: [DRAGGABLE.fromUserSearch, DRAGGABLE.fromFavourites],\n            acceptTypes: [DRAGGABLE.typeUser],\n        }\n    },\n    resultsElementType: 'a',\n    resultsElementAttributes: [{ name: 'href', value: '#' }],\n    resultsClasses: 'list-group-item my-list-item truncate-notification list-group-item-action',\n    keyId: '_id',\n    keyType: KeyType.string,\n    modifiers: {\n        normal: 'list-group-item-primary',\n        inactive: 'list-group-item-light',\n        active: 'list-group-item-info',\n        warning: 'list-group-item-danger'\n    },\n    icons: {\n        normal: 'fas fa-comment',\n        inactive: 'fas fa-comment',\n        active: 'fas fa-heart',\n        warning: 'fas fa-exclamation-circle'\n    },\n    detail: {\n        containerClasses: 'd-flex w-100 justify-content-between',\n        textElementType: 'span',\n        textElementClasses: 'mb-1',\n        select: true,\n        quickDelete: true,\n        delete: {\n            buttonClasses: 'btn bg-danger text-white btn-circle btn-sm',\n            iconClasses: 'fas fa-trash-alt',\n        },\n    },\n};\n//# sourceMappingURL=BlockedUserView.js.map","import debug from 'debug';\nimport { NotificationController } from \"../../socket/NotificationController\";\nimport { ChatManager } from \"../../socket/ChatManager\";\nimport browserUtil from \"../../util/BrowserUtil\";\nimport moment from \"moment\";\nimport { Priority } from \"../../socket/Types\";\nimport { DRAGGABLE_KEY_ID, DRAGGABLE_TYPE } from \"../ConfigurationTypes\";\nimport { NotificationManager } from \"../../notification/NotificationManager\";\nimport { DRAGGABLE, STATE_NAMES, VIEW_NAME } from \"./ChatTypes\";\nimport { SecurityManager } from \"../../security/SecurityManager\";\nconst csLoggerDetail = debug('chat-sidebar:detail');\nexport class ChatLogDetailView {\n    constructor(stateManager) {\n        this.stateManager = stateManager;\n        this.selectedChatLog = null;\n        // handler binding\n        this.handleAddMessage = this.handleAddMessage.bind(this);\n        this.handleChatLogsUpdated = this.handleChatLogsUpdated.bind(this);\n        this.handleChatLogUpdated = this.handleChatLogUpdated.bind(this);\n        this.handleChatStarted = this.handleChatStarted.bind(this);\n        this.handleUserDrop = this.handleUserDrop.bind(this);\n        this.leaveChat = this.leaveChat.bind(this);\n        this.eventUserSelected = this.eventUserSelected.bind(this);\n        NotificationController.getInstance().addListener(this);\n        this.stateManager.addChangeListenerForName(STATE_NAMES.users, this);\n    }\n    static getInstance(stateManager) {\n        if (!(ChatLogDetailView._instance)) {\n            ChatLogDetailView._instance = new ChatLogDetailView(stateManager);\n        }\n        return ChatLogDetailView._instance;\n    }\n    hasActionPermission(actionName, from, item) {\n        return true;\n    }\n    getListenerName() {\n        return 'Chat Log Details';\n    }\n    canSelectItem(view, selectedItem) {\n        return true;\n    }\n    hasPermissionToDeleteItemInNamedCollection(name, item) {\n        return true;\n    }\n    hasPermissionToUpdateItemInNamedCollection(name, item) {\n        return true;\n    }\n    hasChanged() {\n        return false;\n    }\n    setContainedBy(container) {\n    }\n    addEventListener(listener) {\n    }\n    getIdForItemInNamedCollection(name, item) {\n        throw new Error('Method not implemented.');\n    }\n    getDisplayValueForItemInNamedCollection(name, item) {\n        throw new Error('Method not implemented.');\n    }\n    compareItemsForEquality(item1, item2) {\n        throw new Error('Method not implemented.');\n    }\n    getModifierForItemInNamedCollection(name, item) {\n        throw new Error('Method not implemented.');\n    }\n    getSecondaryModifierForItemInNamedCollection(name, item) {\n        throw new Error('Method not implemented.');\n    }\n    getBadgeValueForItemInNamedCollection(name, item) {\n        throw new Error('Method not implemented.');\n    }\n    getBackgroundImageForItemInNamedCollection(name, item) {\n        throw new Error('Method not implemented.');\n    }\n    updateViewForNamedCollection(name, newState) {\n        throw new Error('Method not implemented.');\n    }\n    itemDeselected(view, selectedItem) {\n        csLoggerDetail(`Chat Log with id ${selectedItem.roomName} deselected`);\n        if (this.selectedChatLog && (selectedItem.roomName === this.selectedChatLog.roomName)) {\n            this.selectedChatLog = null;\n            this.checkCanComment();\n            this.clearChatLog();\n        }\n    }\n    itemSelected(view, selectedItem) {\n        this.selectedChatLog = selectedItem;\n        if (this.selectedChatLog) {\n            csLoggerDetail(`Chat Log with id ${selectedItem.roomName} selected`);\n            this.checkCanComment();\n            this.renderChatLog(this.selectedChatLog);\n        }\n    }\n    canDeleteItem(view, selectedItem) {\n        return true;\n    }\n    itemDeleted(view, selectedItem) {\n        csLoggerDetail(`Chat Log with ${selectedItem.roomName} deleting`);\n        if (this.selectedChatLog && (this.selectedChatLog.roomName === selectedItem.roomName)) {\n            this.checkCanComment();\n            this.renderChatLog(this.selectedChatLog);\n        }\n    }\n    hideRequested(view) {\n        this.selectedChatLog = null;\n        this.checkCanComment();\n        this.clearChatLog();\n    }\n    handleUserDrop(event) {\n        csLoggerDetail('drop event on current chat room');\n        if (this.selectedChatLog) {\n            // @ts-ignore\n            const draggedObjectJSON = event.dataTransfer.getData(DRAGGABLE_KEY_ID);\n            const draggedObject = JSON.parse(draggedObjectJSON);\n            csLoggerDetail(draggedObject);\n            if (draggedObject[DRAGGABLE_TYPE] === DRAGGABLE.typeUser) {\n                //add the user to the current chat if not already there\n                ChatManager.getInstance().sendInvite(draggedObject.username, this.selectedChatLog.roomName);\n                NotificationManager.getInstance().show('Chat', `Invited ${draggedObject.username} to the chat.`);\n            }\n        }\n    }\n    handleChatLogUpdated(log) {\n        csLoggerDetail(`Handling chat log updates`);\n        this.checkCanComment();\n        this.renderChatLog(log);\n    }\n    handleAddMessage(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        csLoggerDetail(`Handling message event`);\n        if (this.selectedChatLog) {\n            // @ts-ignore\n            if (this.commentEl && this.commentEl.value.trim().length === 0)\n                return;\n            // @ts-ignore\n            const messageContent = this.commentEl.value.trim();\n            // @ts-ignore\n            this.commentEl.value = '';\n            let sentMessage = ChatManager.getInstance().sendMessage(this.selectedChatLog.roomName, messageContent, Priority.Normal, {});\n            if (sentMessage) {\n                // add the message to our display\n                let messageEl = this.addChatMessage(sentMessage);\n                // scroll to bottom\n                browserUtil.scrollSmoothTo(messageEl);\n            }\n        }\n    }\n    onDocumentLoaded() {\n        // @ts-ignore\n        this.chatLogDiv = document.getElementById(ChatLogDetailView.chatLogId);\n        // @ts-ignore\n        this.commentEl = document.getElementById(ChatLogDetailView.commentId);\n        // @ts-ignore\n        this.chatForm = document.getElementById(ChatLogDetailView.newFormId);\n        // @ts-ignore\n        this.sendMessageButton = document.getElementById(ChatLogDetailView.submitCommentId);\n        // @ts-ignore\n        this.leaveChatButton = document.getElementById(ChatLogDetailView.leaveChatId);\n        // @ts-ignore\n        this.chatRoomDiv = document.getElementById(ChatLogDetailView.chatLogRoomId);\n        // @ts-ignore\n        this.fastUserSearch = document.getElementById(ChatLogDetailView.chatFastSearchUserNames);\n        this.chatRoomDiv.addEventListener('dragover', (event) => {\n            csLoggerDetail('Dragged over');\n            if (this.selectedChatLog)\n                event.preventDefault();\n        });\n        this.chatRoomDiv.addEventListener('drop', this.handleUserDrop);\n        this.chatForm.addEventListener('submit', this.handleAddMessage);\n        this.leaveChatButton.addEventListener('click', this.leaveChat);\n        this.checkCanComment();\n        // fast user search\n        // @ts-ignore\n        const fastSearchEl = $(`#${ChatLogDetailView.chatFastSearchUserNames}`);\n        // @ts-ignore\n        fastSearchEl.on('autocompleteselect', this.eventUserSelected);\n    }\n    eventUserSelected(event, ui) {\n        event.preventDefault();\n        event.stopPropagation();\n        csLoggerDetail(`User ${ui.item.label} with id ${ui.item.value} selected`);\n        // @ts-ignore\n        event.target.innerText = '';\n        // add to the chat, if one selected\n        if (this.selectedChatLog)\n            ChatManager.getInstance().sendInvite(ui.item.label, this.selectedChatLog.roomName);\n        NotificationManager.getInstance().show('Chat', `Invited ${ui.item.label} to the chat.`);\n    }\n    addChatMessage(message) {\n        let chatMessageEl = document.createElement('div');\n        browserUtil.addRemoveClasses(chatMessageEl, \"message\");\n        // are we dealing with an \"join\"/\"exit\" message?\n        if (message.from.trim().length === 0) {\n            let messageSenderEl = document.createElement('div');\n            browserUtil.addRemoveClasses(messageSenderEl, 'message-sender');\n            messageSenderEl.innerText = message.message;\n            chatMessageEl.appendChild(messageSenderEl);\n        }\n        else {\n            if (message.from === ChatManager.getInstance().getCurrentUser()) {\n                browserUtil.addRemoveClasses(chatMessageEl, \"my-message\");\n            }\n            else {\n                let messageSenderEl = document.createElement('div');\n                browserUtil.addRemoveClasses(messageSenderEl, 'message-sender');\n                messageSenderEl.innerText = message.from + '   ' + moment(message.created, 'YYYYMMDDHHmmss').format('DD/MM/YYYY ');\n                chatMessageEl.appendChild(messageSenderEl);\n            }\n            let contentEl = document.createElement('div');\n            if (message.from === ChatManager.getInstance().getCurrentUser()) {\n                browserUtil.addRemoveClasses(contentEl, \"my-message-content\");\n            }\n            else {\n                browserUtil.addRemoveClasses(contentEl, 'message-content');\n            }\n            contentEl.innerText = message.message;\n            chatMessageEl.appendChild(contentEl);\n        }\n        this.chatLogDiv.appendChild(chatMessageEl);\n        return chatMessageEl;\n    }\n    reRenderChatMessages(chatLog) {\n        browserUtil.removeAllChildren(this.chatLogDiv);\n        let messageEl = null;\n        chatLog.messages.forEach((message) => {\n            messageEl = this.addChatMessage(message);\n        });\n        // scroll to the last message (if any)\n        if (messageEl)\n            browserUtil.scrollTo(messageEl);\n    }\n    renderChatLog(chatLog) {\n        csLoggerDetail(`Chat Log ${chatLog.roomName} rendering`);\n        if (this.selectedChatLog) {\n            if (this.selectedChatLog.roomName === chatLog.roomName) {\n                this.selectedChatLog = chatLog;\n                ChatManager.getInstance().touchChatLog(chatLog.roomName);\n                // render the chat conversation\n                this.reRenderChatMessages(chatLog);\n            }\n        }\n    }\n    handleChatLogsUpdated() {\n        if (this.selectedChatLog) {\n            ChatManager.getInstance().touchChatLog(this.selectedChatLog.roomName);\n            // render the chat conversation\n            this.reRenderChatMessages(this.selectedChatLog);\n        }\n        this.checkCanComment();\n    }\n    handleChatStarted(log) {\n        this.selectedChatLog = log;\n        this.renderChatLog(log);\n    }\n    stateChanged(managerName, name, newValue) {\n        if (name === STATE_NAMES.users) {\n            // @ts-ignore\n            const fastSearchEl = $(`#${ChatLogDetailView.ssFastSearchUserNames}`);\n            // what is my username?\n            let myUsername = SecurityManager.getInstance().getLoggedInUsername();\n            // for each name, construct the patient details to display and the id referenced\n            const fastSearchValues = [];\n            newValue.forEach((item) => {\n                const searchValue = {\n                    label: item.username,\n                    value: item._id,\n                };\n                // @ts-ignore\n                if (myUsername !== item.username)\n                    fastSearchValues.push(searchValue); // don't search for ourselves\n            });\n            fastSearchEl.autocomplete({ source: fastSearchValues });\n            fastSearchEl.autocomplete('option', { disabled: false, minLength: 1 });\n        }\n    }\n    stateChangedItemAdded(managerName, name, itemAdded) {\n        this.stateChanged(managerName, name, this.stateManager.getStateByName(name));\n    }\n    stateChangedItemRemoved(managerName, name, itemRemoved) {\n    }\n    stateChangedItemUpdated(managerName, name, itemUpdated, itemNewValue) {\n    }\n    handleOfflineMessagesReceived(messages) {\n    }\n    handleInvitationDeclined(room, username) {\n    }\n    handleNewInviteReceived(invite) {\n        return true;\n    }\n    itemDragStarted(view, selectedItem) {\n    }\n    itemAction(view, actionName, selectedItem) {\n    }\n    documentLoaded(view) {\n    }\n    showRequested(view) {\n    }\n    itemDropped(view, droppedItem) {\n    }\n    getName() {\n        return VIEW_NAME.chatLog;\n    }\n    hidden() {\n        this.hideRequested(this);\n    }\n    getDataSourceKeyId() {\n        return \"\";\n    }\n    getUIConfig() {\n        // @ts-ignore\n        return undefined;\n    }\n    render() {\n    }\n    show() {\n    }\n    getItemDescription(from, item) {\n        return \"\";\n    }\n    getItemId(from, item) {\n        return \"\";\n    }\n    filterResults(managerName, name, filterResults) {\n    }\n    leaveChat(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        if (this.selectedChatLog) {\n            ChatManager.getInstance().leaveChat(this.selectedChatLog.roomName);\n            this.selectedChatLog = null;\n            this.clearChatLog();\n            this.checkCanComment();\n        }\n    }\n    checkCanComment() {\n        if (this.selectedChatLog) {\n            if (this.commentEl)\n                this.commentEl.removeAttribute(\"readonly\");\n            if (this.commentEl)\n                this.commentEl.removeAttribute(\"disabled\");\n            if (this.sendMessageButton)\n                this.sendMessageButton.removeAttribute(\"disabled\");\n            if (this.leaveChatButton)\n                this.leaveChatButton.removeAttribute(\"disabled\");\n            if (this.fastUserSearch)\n                this.fastUserSearch.removeAttribute(\"disabled\");\n        }\n        else {\n            if (this.commentEl)\n                this.commentEl.setAttribute(\"readonly\", \"true\");\n            if (this.commentEl)\n                this.commentEl.setAttribute(\"disabled\", \"true\");\n            if (this.sendMessageButton)\n                this.sendMessageButton.setAttribute(\"disabled\", \"true\");\n            if (this.leaveChatButton)\n                this.leaveChatButton.setAttribute(\"disabled\", \"true\");\n            if (this.fastUserSearch)\n                this.fastUserSearch.setAttribute(\"disabled\", \"true\");\n        }\n    }\n    clearChatLog() {\n        browserUtil.removeAllChildren(this.chatLogDiv);\n    }\n}\nChatLogDetailView.newFormId = \"newMessage\";\nChatLogDetailView.commentId = \"message\";\nChatLogDetailView.submitCommentId = \"submitMessage\";\nChatLogDetailView.chatLogId = 'chatLog';\nChatLogDetailView.chatLogRoomId = 'chatLogRoom';\nChatLogDetailView.leaveChatId = 'leaveChat';\nChatLogDetailView.chatFastSearchUserNames = 'chatFastSearchUserNames';\n//# sourceMappingURL=ChatLogDetailView.js.map","import debug from 'debug';\nimport { NotificationController } from \"../../socket/NotificationController\";\nimport { ChatManager } from \"../../socket/ChatManager\";\nimport { AbstractStatefulCollectionView } from \"../view/implementation/AbstractStatefulCollectionView\";\nimport { KeyType, Modifier } from \"../ConfigurationTypes\";\nimport { MemoryBufferStateManager } from \"../../state/MemoryBufferStateManager\";\nimport { isSameRoom } from \"../../util/EqualityFunctions\";\nimport { ListViewRenderer } from \"../view/renderer/ListViewRenderer\";\nimport { STATE_NAMES, VIEW_NAME } from \"./ChatTypes\";\nconst csLogger = debug('chat-sidebar');\nexport class ChatLogsView extends AbstractStatefulCollectionView {\n    constructor() {\n        super(ChatLogsView.DOMConfig, new MemoryBufferStateManager(isSameRoom), STATE_NAMES.chatLogs);\n        this.selectedChatLog = null;\n        this.renderer = new ListViewRenderer(this, this);\n        // handler binding\n        this.handleChatLogsUpdated = this.handleChatLogsUpdated.bind(this);\n        this.handleChatLogUpdated = this.handleChatLogUpdated.bind(this);\n        this.handleChatStarted = this.handleChatStarted.bind(this);\n        NotificationController.getInstance().addListener(this);\n    }\n    static getInstance() {\n        if (!(ChatLogsView._instance)) {\n            ChatLogsView._instance = new ChatLogsView();\n        }\n        return ChatLogsView._instance;\n    }\n    compareItemsForEquality(item1, item2) {\n        return isSameRoom(item1, item2);\n    }\n    handleNewInviteReceived(invite) {\n        return true;\n    }\n    handleChatLogUpdated(log) {\n        csLogger(`Handling chat log updates`);\n        this.updateStateManager();\n    }\n    onDocumentLoaded() {\n        super.onDocumentLoaded();\n        this.addEventCollectionListener(this);\n        this.updateStateManager();\n    }\n    getIdForItemInNamedCollection(name, item) {\n        return item.roomName;\n    }\n    renderDisplayForItemInNamedCollection(containerEl, name, item) {\n        containerEl.innerHTML = item.users.join(',');\n    }\n    getModifierForItemInNamedCollection(name, item) {\n        let result = Modifier.inactive;\n        if (this.selectedChatLog) {\n            if (this.selectedChatLog.roomName === item.roomName) {\n                result = Modifier.active;\n            }\n        }\n        return result;\n    }\n    getSecondaryModifierForItemInNamedCollection(name, item) {\n        return this.getModifierForItemInNamedCollection(name, item);\n    }\n    selectChatRoom(roomName) {\n        let room = ChatManager.getInstance().getChatLog(roomName);\n        this.selectedChatLog = room;\n        this.eventForwarder.itemSelected(this, this.selectedChatLog);\n        this.updateStateManager();\n    }\n    handleChatLogsUpdated() {\n        if (this.selectedChatLog) {\n            ChatManager.getInstance().touchChatLog(this.selectedChatLog.roomName);\n        }\n        this.updateStateManager();\n    }\n    handleChatStarted(log) {\n        this.selectedChatLog = log;\n        this.eventForwarder.itemSelected(this, this.selectedChatLog);\n        this.updateStateManager();\n    }\n    getBadgeValueForItemInNamedCollection(name, item) {\n        return item.numOfNewMessages;\n    }\n    canDeleteItem(view, selectedItem) {\n        return true;\n    }\n    itemDeleted(view, selectedItem) {\n        csLogger(`Deleting chat ${selectedItem.roomName}`);\n        ChatManager.getInstance().leaveChat(selectedItem.roomName);\n        if (this.selectedChatLog && (this.selectedChatLog.roomName === selectedItem.roomName)) {\n            this.eventForwarder.itemDeselected(this, this.selectedChatLog);\n            this.selectedChatLog = null;\n        }\n        this.updateStateManager();\n    }\n    hideRequested(view) {\n        if (this.selectedChatLog) {\n            this.eventForwarder.itemDeselected(this, this.selectedChatLog);\n            this.selectedChatLog = null;\n        }\n    }\n    hidden() {\n        this.hideRequested(this);\n    }\n    documentLoaded(view) {\n    }\n    itemAction(view, actionName, selectedItem) {\n    }\n    itemDragStarted(view, selectedItem) {\n    }\n    itemDropped(view, droppedItem) {\n    }\n    itemSelected(view, selectedItem) {\n        this.selectedChatLog = selectedItem;\n        this.updateStateManager();\n    }\n    itemDeselected(view, selectedItem) {\n        this.selectedChatLog = null;\n        this.updateStateManager();\n    }\n    showRequested(view) {\n    }\n    handleOfflineMessagesReceived(messages) {\n    }\n    handleInvitationDeclined(room, username) {\n    }\n    canSelectItem(view, selectedItem) {\n        return true;\n    }\n    updateStateManager() {\n        csLogger(`Updating state with chat manager`);\n        let newState = ChatManager.getInstance().getChatLogs();\n        csLogger(newState);\n        this.stateManager.setStateByName(STATE_NAMES.chatLogs, newState, true);\n    }\n}\nChatLogsView.DOMConfig = {\n    viewConfig: {\n        resultsContainerId: 'chatLogs',\n        dataSourceId: VIEW_NAME.chatLogs,\n    },\n    resultsElementType: 'a',\n    resultsElementAttributes: [{ name: 'href', value: '#' }],\n    resultsClasses: 'list-group-item my-list-item truncate-notification list-group-item-action',\n    keyId: 'roomName',\n    keyType: KeyType.string,\n    modifiers: {\n        normal: '',\n        inactive: 'list-group-item-dark',\n        active: 'list-group-item-primary',\n        warning: ''\n    },\n    detail: {\n        containerClasses: 'd-flex w-100 justify-content-between',\n        textElementType: 'span',\n        textElementClasses: 'mb-1',\n        select: true,\n        delete: {\n            buttonClasses: 'btn bg-danger text-white btn-circle btn-sm',\n            iconClasses: 'text-black fas fa-sign-out-alt',\n        },\n        badge: {\n            elementType: 'span',\n            elementClasses: 'badge badge-pill badge-primary mr-1',\n        }\n    },\n};\n//# sourceMappingURL=ChatLogsView.js.map","import { SidebarViewContainer } from '../container/SidebarViewContainer';\nimport { SidebarLocation } from \"../ConfigurationTypes\";\nimport { ChatLogsView } from \"./ChatLogsView\";\nimport { ChatLogDetailView } from \"./ChatLogDetailView\";\nexport class ChatRoomsSidebar extends SidebarViewContainer {\n    constructor(stateManager) {\n        super(ChatRoomsSidebar.SidebarPrefs);\n        const chatView = ChatLogsView.getInstance();\n        this.addView(chatView, { containerId: ChatRoomsSidebar.SidebarContainers.chatLogs });\n        const chatLogView = ChatLogDetailView.getInstance(stateManager);\n        this.addView(chatLogView, { containerId: ChatRoomsSidebar.SidebarContainers.chatLog });\n        chatView.addEventListener(chatLogView);\n    }\n    static getInstance(stateManager) {\n        if (!(ChatRoomsSidebar._instance)) {\n            ChatRoomsSidebar._instance = new ChatRoomsSidebar(stateManager);\n        }\n        return ChatRoomsSidebar._instance;\n    }\n}\nChatRoomsSidebar.SidebarPrefs = {\n    id: 'chatSideBar',\n    expandedSize: '35%',\n    location: SidebarLocation.right\n};\nChatRoomsSidebar.SidebarContainers = {\n    chatLogs: 'chatLogs',\n    chatLog: 'chatLogRoom'\n};\n//# sourceMappingURL=ChatRoomsSidebar.js.map","export const STATE_NAMES = {\n    users: 'user',\n    chatLogs: 'chatLog',\n    recentUserSearches: 'recentUserSearch'\n};\nexport const DRAGGABLE = {\n    typeUser: 'user',\n    fromUserSearch: 'userSearch',\n    fromFavourites: 'favourites',\n};\nexport const VIEW_NAME = {\n    blockedUsers: 'blockedUsers',\n    chatLog: 'chatLog',\n    chatLogs: 'chatLogs',\n    favouriteUsers: 'favouriteUsers',\n    userSearch: 'userSearch',\n};\n//# sourceMappingURL=ChatTypes.js.map","import debug from 'debug';\nimport { NotificationController } from \"../../socket/NotificationController\";\nimport { ChatManager } from \"../../socket/ChatManager\";\nimport { AbstractStatefulCollectionView } from \"../view/implementation/AbstractStatefulCollectionView\";\nimport { KeyType, Modifier } from \"../ConfigurationTypes\";\nimport { ListViewRenderer } from \"../view/renderer/ListViewRenderer\";\nimport { DRAGGABLE, STATE_NAMES, VIEW_NAME } from \"./ChatTypes\";\nconst vLogger = debug('user-search-sidebar');\nconst vLoggerDetail = debug('user-search-sidebar:detail');\nexport class FavouriteUserView extends AbstractStatefulCollectionView {\n    constructor(stateManager) {\n        super(FavouriteUserView.DOMConfig, stateManager, STATE_NAMES.users);\n        this.renderer = new ListViewRenderer(this, this);\n        // handler binding\n        this.handleLoggedInUsersUpdated = this.handleLoggedInUsersUpdated.bind(this);\n        this.handleFavouriteUserLoggedIn = this.handleFavouriteUserLoggedIn.bind(this);\n        this.handleFavouriteUserLoggedOut = this.handleFavouriteUserLoggedOut.bind(this);\n        this.handleFavouriteUsersChanged = this.handleFavouriteUsersChanged.bind(this);\n        this.handleBlockedUsersChanged = this.handleBlockedUsersChanged.bind(this);\n        this.handleLoggedInUsersUpdated = this.handleLoggedInUsersUpdated.bind(this);\n        NotificationController.getInstance().addUserListener(this);\n    }\n    static getInstance(stateManager) {\n        if (!(FavouriteUserView._instance)) {\n            FavouriteUserView._instance = new FavouriteUserView(stateManager);\n        }\n        return FavouriteUserView._instance;\n    }\n    onDocumentLoaded() {\n        super.onDocumentLoaded();\n        this.addEventCollectionListener(this);\n    }\n    handleLoggedInUsersUpdated(usernames) {\n        vLogger(`Received new list of users who are logged in `);\n        this.updateViewForNamedCollection('', {});\n    }\n    handleFavouriteUserLoggedIn(username) {\n        vLogger(`Handle Favourite User ${username} logged in`);\n        this.updateViewForNamedCollection('', {});\n    }\n    handleFavouriteUserLoggedOut(username) {\n        vLogger(`Handle Favourite User ${username} logged in`);\n        this.updateViewForNamedCollection('', {});\n    }\n    handleFavouriteUsersChanged(usernames) {\n        vLogger(`Handle Favourite Users changed to ${usernames}`);\n        this.updateViewForNamedCollection('', {});\n    }\n    getIdForItemInNamedCollection(name, item) {\n        return item._id;\n    }\n    renderDisplayForItemInNamedCollection(containerEl, name, item) {\n        containerEl.innerHTML = item.username;\n    }\n    getModifierForItemInNamedCollection(name, item) {\n        let result = Modifier.normal;\n        // if the user is currently logged out make the item inactive\n        if (!ChatManager.getInstance().isUserLoggedIn(item.username)) {\n            result = Modifier.inactive;\n        }\n        return result;\n    }\n    getSecondaryModifierForItemInNamedCollection(name, item) {\n        let result = Modifier.normal;\n        vLoggerDetail(`Checking for item secondary modifiers ${item.username}`);\n        // if the user is in the black list then show warning and a favourite user is highlighted\n        if (NotificationController.getInstance().isFavouriteUser(item.username)) {\n            vLoggerDetail(`is favourite`);\n            result = Modifier.active;\n        }\n        if (NotificationController.getInstance().isBlockedUser(item.username)) {\n            vLoggerDetail(`is blocked`);\n            result = Modifier.warning;\n        }\n        return result;\n    }\n    updateViewForNamedCollection(name, newState) {\n        var _a;\n        // find the blocked users in the user list\n        let favUsers = [];\n        const users = (_a = this.stateManager) === null || _a === void 0 ? void 0 : _a.getStateByName(STATE_NAMES.users);\n        if (users) {\n            users.forEach((user) => {\n                if (ChatManager.getInstance().isUserInFavouriteList(user.username)) {\n                    favUsers.push(user);\n                }\n            });\n        }\n        super.updateViewForNamedCollection(name, favUsers);\n    }\n    documentLoaded(view) {\n    }\n    handleBlockedUsersChanged(usernames) {\n        this.updateViewForNamedCollection('', {});\n    }\n    hideRequested(view) {\n    }\n    itemAction(view, actionName, selectedItem) {\n        // @ts-ignore\n        if (actionName === this.collectionUIConfig.extraActions[0].name) {\n            if (ChatManager.getInstance().isUserInBlockedList(selectedItem.username)) {\n                vLogger(`${selectedItem.username} already in fav list, ignoring`);\n                return;\n            }\n            ChatManager.getInstance().addUserToBlockedList(selectedItem.username);\n        }\n    }\n    canDeleteItem(view, selectedItem) {\n        return true;\n    }\n    itemDeleted(view, selectedItem) {\n        vLogger(`Favourite user ${selectedItem.username} with id ${selectedItem.id} deleted - removing`);\n        ChatManager.getInstance().removeUserFromFavouriteList(selectedItem.username);\n    }\n    itemDragStarted(view, selectedItem) {\n    }\n    itemDeselected(view, selectedItem) {\n    }\n    itemDropped(view, droppedItem) {\n        vLogger(`Handling item dropped ${droppedItem.username}`);\n        if (ChatManager.getInstance().isUserInFavouriteList(droppedItem.username)) {\n            vLogger(`${droppedItem.username} already in fav list, ignoring`);\n            return;\n        }\n        // add the user to the Chat Manager and we should get an event about it\n        ChatManager.getInstance().addUserToFavouriteList(droppedItem.username);\n    }\n    itemSelected(view, selectedItem) {\n        const roomName = NotificationController.getInstance().startChatWithUser(selectedItem.username);\n    }\n    showRequested(view) {\n    }\n    canSelectItem(view, selectedItem) {\n        return true;\n    }\n}\nFavouriteUserView.DOMConfig = {\n    viewConfig: {\n        resultsContainerId: 'favouriteUsers',\n        drop: {\n            acceptFrom: [DRAGGABLE.fromUserSearch],\n            acceptTypes: [DRAGGABLE.typeUser],\n        },\n        dataSourceId: VIEW_NAME.favouriteUsers,\n    },\n    resultsElementType: 'a',\n    resultsElementAttributes: [{ name: 'href', value: '#' }],\n    resultsClasses: 'list-group-item my-list-item truncate-notification list-group-item-action',\n    keyId: '_id',\n    keyType: KeyType.string,\n    modifiers: {\n        normal: 'list-group-item-primary',\n        inactive: 'list-group-item-light',\n        active: 'list-group-item-info',\n        warning: 'list-group-item-danger'\n    },\n    icons: {\n        normal: 'fas fa-comment',\n        inactive: 'fas fa-comment',\n        active: 'fas fa-heart',\n        warning: 'fas fa-exclamation-circle'\n    },\n    detail: {\n        containerClasses: 'd-flex w-100 justify-content-between',\n        textElementType: 'span',\n        textElementClasses: 'mb-1',\n        select: true,\n        quickDelete: true,\n        delete: {\n            buttonClasses: 'btn bg-danger text-white btn-circle btn-sm',\n            iconClasses: 'fas fa-trash-alt',\n        },\n        drag: {\n            type: DRAGGABLE.typeUser,\n            from: DRAGGABLE.fromFavourites\n        },\n    },\n    extraActions: [\n        {\n            name: 'block',\n            buttonClasses: 'btn bg-warning text-white btn-circle btn-sm mr-1',\n            iconClasses: 'fas fa-user-slash'\n        }\n    ]\n};\n//# sourceMappingURL=FavouriteUserView.js.map","import { SidebarViewContainer } from '../container/SidebarViewContainer';\nimport { SidebarLocation } from \"../ConfigurationTypes\";\nimport { UserSearchView } from \"./UserSearchView\";\nimport { FavouriteUserView } from \"./FavouriteUserView\";\nimport { BlockedUserView } from \"./BlockedUserView\";\nimport { ChatRoomsSidebar } from \"./ChatRoomsSidebar\";\nexport class UserSearchSidebar extends SidebarViewContainer {\n    constructor(stateManager) {\n        super(UserSearchSidebar.SidebarPrefs);\n        const recentSearches = UserSearchView.getInstance(stateManager);\n        this.addView(recentSearches, { containerId: UserSearchSidebar.SidebarContainers.recentSearches });\n        const favouriteUsers = FavouriteUserView.getInstance(stateManager);\n        this.addView(favouriteUsers, { containerId: UserSearchSidebar.SidebarContainers.favourites });\n        const blockedUsers = BlockedUserView.getInstance(stateManager);\n        this.addView(blockedUsers, { containerId: UserSearchSidebar.SidebarContainers.blocked });\n        this.logSB = ChatRoomsSidebar.getInstance(stateManager);\n    }\n    static getInstance(stateManager) {\n        if (!(UserSearchSidebar._instance)) {\n            UserSearchSidebar._instance = new UserSearchSidebar(stateManager);\n        }\n        return UserSearchSidebar._instance;\n    }\n}\nUserSearchSidebar.SidebarPrefs = {\n    id: 'userSearchSideBar',\n    expandedSize: '35%',\n    location: SidebarLocation.left\n};\nUserSearchSidebar.SidebarContainers = {\n    recentSearches: 'userSearchZone',\n    favourites: 'favouriteUsersDropZone',\n    blocked: 'blockedUsersDropZone'\n};\n//# sourceMappingURL=UserSearchSidebar.js.map","import debug from 'debug';\nimport { isSameMongo } from '../../util/EqualityFunctions';\nimport { NotificationController } from \"../../socket/NotificationController\";\nimport { BrowserStorageStateManager } from \"../../state/BrowserStorageStateManager\";\nimport { ChatManager } from \"../../socket/ChatManager\";\nimport { KeyType, Modifier } from \"../ConfigurationTypes\";\nimport { AbstractStatefulCollectionView } from \"../view/implementation/AbstractStatefulCollectionView\";\nimport { ListViewRenderer } from \"../view/renderer/ListViewRenderer\";\nimport { DRAGGABLE, STATE_NAMES, VIEW_NAME } from \"./ChatTypes\";\nimport { SecurityManager } from \"../../security/SecurityManager\";\nimport { ChatRoomsSidebar } from \"./ChatRoomsSidebar\";\nimport { ChatLogsView } from \"./ChatLogsView\";\nconst vLogger = debug('user-search');\nconst vLoggerDetail = debug('user-search-detail');\nexport class UserSearchView extends AbstractStatefulCollectionView {\n    constructor(stateManager) {\n        super(UserSearchView.DOMConfig, stateManager, STATE_NAMES.users);\n        this.loggedInUsers = [];\n        this.renderer = new ListViewRenderer(this, this);\n        // handler binding\n        this.updateViewForNamedCollection = this.updateViewForNamedCollection.bind(this);\n        this.eventUserSelected = this.eventUserSelected.bind(this);\n        this.handleLoggedInUsersUpdated = this.handleLoggedInUsersUpdated.bind(this);\n        this.handleFavouriteUserLoggedIn = this.handleFavouriteUserLoggedIn.bind(this);\n        this.handleFavouriteUserLoggedOut = this.handleFavouriteUserLoggedOut.bind(this);\n        this.handleFavouriteUsersChanged = this.handleFavouriteUsersChanged.bind(this);\n        this.handleBlockedUsersChanged = this.handleBlockedUsersChanged.bind(this);\n        this.handleLoggedInUsersUpdated = this.handleLoggedInUsersUpdated.bind(this);\n        this.itemDeleted = this.itemDeleted.bind(this);\n        // register state change listening\n        this.localisedSM = new BrowserStorageStateManager(true, false, isSameMongo);\n        this.localisedSM.addChangeListenerForName(STATE_NAMES.recentUserSearches, this);\n        NotificationController.getInstance().addUserListener(this);\n        vLogger(this.localisedSM.getStateByName(STATE_NAMES.recentUserSearches));\n    }\n    static getInstance(stateManager) {\n        if (!(UserSearchView._instance)) {\n            UserSearchView._instance = new UserSearchView(stateManager);\n        }\n        return UserSearchView._instance;\n    }\n    handleLoggedInUsersUpdated(usernames) {\n        vLogger(`Received new list of users who are logged in `);\n        vLogger(usernames);\n        this.loggedInUsers = usernames;\n        this.updateViewForNamedCollection(STATE_NAMES.recentUserSearches, {});\n    }\n    handleFavouriteUserLoggedIn(username) {\n        vLogger(`Handle Favourite User ${username} logged in`);\n        this.updateViewForNamedCollection(STATE_NAMES.recentUserSearches, {});\n    }\n    handleFavouriteUserLoggedOut(username) {\n        vLogger(`Handle Favourite User ${username} logged in`);\n        this.updateViewForNamedCollection(STATE_NAMES.recentUserSearches, {});\n    }\n    handleFavouriteUsersChanged(usernames) {\n        vLogger(`Handle Favourite Users changed to ${usernames}`);\n        this.updateViewForNamedCollection(STATE_NAMES.recentUserSearches, {});\n    }\n    handleBlockedUsersChanged(usernames) {\n        vLogger(`Handle Blocked Users changed to ${usernames}`);\n        this.updateViewForNamedCollection(STATE_NAMES.recentUserSearches, {});\n    }\n    onDocumentLoaded() {\n        super.onDocumentLoaded();\n        // @ts-ignore\n        const fastSearchEl = $(`#${UserSearchView.fastSearchInputId}`);\n        // @ts-ignore\n        fastSearchEl.on('autocompleteselect', this.eventUserSelected);\n    }\n    getIdForItemInNamedCollection(name, item) {\n        return item._id;\n    }\n    renderDisplayForItemInNamedCollection(containerEl, name, item) {\n        containerEl.innerHTML = item.username;\n    }\n    getModifierForItemInNamedCollection(name, item) {\n        let result = Modifier.normal;\n        vLoggerDetail(`Checking for item modifiers`);\n        vLoggerDetail(item);\n        // if the user is currently logged out make the item inactive\n        if (!ChatManager.getInstance().isUserLoggedIn(item.username)) {\n            result = Modifier.inactive;\n        }\n        return result;\n    }\n    getSecondaryModifierForItemInNamedCollection(name, item) {\n        let result = Modifier.normal;\n        vLoggerDetail(`Checking for item secondary modifiers ${item.username}`);\n        // if the user is in the black list then show warning and a favourite user is highlighted\n        if (NotificationController.getInstance().isFavouriteUser(item.username)) {\n            vLoggerDetail(`is favourite`);\n            result = Modifier.active;\n        }\n        if (NotificationController.getInstance().isBlockedUser(item.username)) {\n            vLoggerDetail(`is blocked`);\n            result = Modifier.warning;\n        }\n        return result;\n    }\n    eventUserSelected(event, ui) {\n        event.preventDefault();\n        event.stopPropagation();\n        vLogger(`User ${ui.item.label} with id ${ui.item.value} selected`);\n        // @ts-ignore\n        event.target.innerText = '';\n        // add the selected user to the recent user searches\n        if (this.localisedSM.isItemInState(STATE_NAMES.recentUserSearches, { _id: ui.item.value }))\n            return;\n        const recentUserSearches = this.localisedSM.getStateByName(STATE_NAMES.recentUserSearches);\n        vLogger(`saved searches too long? ${STATE_NAMES.recentUserSearches}`);\n        if (recentUserSearches.length >= UserSearchView.dataLimit) {\n            vLogger('saved searches too long - removing first');\n            // remove the first item from recent searches\n            const item = recentUserSearches.shift();\n            this.localisedSM.removeItemFromState(STATE_NAMES.recentUserSearches, item, true);\n        }\n        // save the searches\n        this.localisedSM.addNewItemToState(STATE_NAMES.recentUserSearches, {\n            _id: ui.item.value,\n            username: ui.item.label\n        }, true);\n    }\n    updateViewForNamedCollection(name, newState) {\n        if (name === STATE_NAMES.recentUserSearches) {\n            vLogger(`Updating for recent searches`);\n            newState = this.localisedSM.getStateByName(STATE_NAMES.recentUserSearches);\n            vLogger(newState);\n            super.updateViewForNamedCollection(name, newState);\n        }\n        if (name === STATE_NAMES.users) {\n            // load the search names into the search field\n            // what is my username?\n            let myUsername = SecurityManager.getInstance().getLoggedInUsername();\n            // @ts-ignore\n            const fastSearchEl = $(`#${UserSearchView.fastSearchInputId}`);\n            // for each name, construct the patient details to display and the id referenced\n            const fastSearchValues = [];\n            newState.forEach((item) => {\n                const searchValue = {\n                    label: item.username,\n                    value: item._id,\n                };\n                if (myUsername !== item.username)\n                    fastSearchValues.push(searchValue); // don't search for ourselves\n            });\n            fastSearchEl.autocomplete({ source: fastSearchValues });\n            fastSearchEl.autocomplete('option', { disabled: false, minLength: 1 });\n        }\n    }\n    itemAction(view, actionName, selectedItem) {\n        // @ts-ignore\n        if (actionName === this.collectionUIConfig.extraActions[0].name) {\n            if (ChatManager.getInstance().isUserInFavouriteList(selectedItem.username)) {\n                vLogger(`${selectedItem.username} already in fav list, ignoring`);\n                return;\n            }\n            ChatManager.getInstance().addUserToFavouriteList(selectedItem.username);\n        }\n        // @ts-ignore\n        if (actionName === this.collectionUIConfig.extraActions[1].name) {\n            if (ChatManager.getInstance().isUserInBlockedList(selectedItem.username)) {\n                vLogger(`${selectedItem.username} already in blocked list, ignoring`);\n                return;\n            }\n            ChatManager.getInstance().addUserToBlockedList(selectedItem.username);\n        }\n    }\n    compareItemsForEquality(item1, item2) {\n        return isSameMongo(item1, item2);\n    }\n    itemDeleted(view, selectedItem) {\n        vLoggerDetail(selectedItem);\n        vLogger(`Recent search user ${selectedItem.username} with id ${selectedItem.id} deleted - removing`);\n        this.localisedSM.removeItemFromState(STATE_NAMES.recentUserSearches, selectedItem, true);\n    }\n    itemSelected(view, selectedItem) {\n        const roomName = NotificationController.getInstance().startChatWithUser(selectedItem.username);\n        ChatRoomsSidebar.getInstance(this.stateManager).eventShow(null);\n        if (roomName)\n            ChatLogsView.getInstance().selectChatRoom(roomName);\n    }\n}\nUserSearchView.fastSearchInputId = 'fastSearchUserNames';\nUserSearchView.dataLimit = 10;\nUserSearchView.DOMConfig = {\n    viewConfig: {\n        resultsContainerId: 'recentUserSearches',\n        dataSourceId: VIEW_NAME.userSearch,\n    },\n    resultsElementType: 'a',\n    resultsElementAttributes: [{ name: 'href', value: '#' }],\n    resultsClasses: 'list-group-item my-list-item truncate-notification list-group-item-action',\n    keyId: '_id',\n    keyType: KeyType.string,\n    modifiers: {\n        normal: 'list-group-item-primary',\n        inactive: 'list-group-item-light',\n        active: 'list-group-item-info',\n        warning: 'list-group-item-danger'\n    },\n    icons: {\n        normal: 'fas fa-comment',\n        inactive: 'fas fa-comment',\n        active: 'fas fa-heart',\n        warning: 'fas fa-exclamation-circle'\n    },\n    detail: {\n        containerClasses: 'd-flex w-100 justify-content-between',\n        textElementType: 'span',\n        textElementClasses: 'mb-1',\n        select: true,\n        quickDelete: true,\n        delete: {\n            buttonClasses: 'btn bg-danger text-white btn-circle btn-sm',\n            iconClasses: 'fas fa-trash-alt',\n        },\n        drag: {\n            type: DRAGGABLE.typeUser,\n            from: DRAGGABLE.fromUserSearch\n        },\n    },\n    extraActions: [\n        {\n            name: 'favourite',\n            buttonClasses: 'btn bg-info text-white btn-circle btn-sm mr-1',\n            iconClasses: 'fas fa-user-plus',\n        },\n        {\n            name: 'block',\n            buttonClasses: 'btn bg-warning text-white btn-circle btn-sm mr-1',\n            iconClasses: 'fas fa-user-slash'\n        }\n    ]\n};\n//# sourceMappingURL=UserSearchView.js.map","import { SidebarLocation } from \"../ConfigurationTypes\";\nimport debug from 'debug';\nconst sbvcLogger = debug('sidebar-container');\nexport class SidebarViewContainer {\n    constructor(prefs) {\n        this.prefs = prefs;\n        this.views = [];\n        // event handlers\n        this.eventHide = this.eventHide.bind(this);\n        this.eventShow = this.eventShow.bind(this);\n    }\n    addView(view, config) {\n        sbvcLogger(`Adding view to container, with containing div of ${config.containerId}`);\n        const viewContainer = document.getElementById(config.containerId);\n        if (viewContainer) {\n            sbvcLogger(`Adding view to container, with containing div of ${config.containerId} - FOUND`);\n            view.setContainedBy(viewContainer);\n        }\n        this.views.push(view);\n        view.addEventListener(this);\n    }\n    onDocumentLoaded() {\n        // hide the side bar panel\n        this.eventHide(null);\n        // add the event listener for the close button\n        const sidePanelEl = document.getElementById(this.prefs.id);\n        if (sidePanelEl === null)\n            return;\n        const closeButtonEl = sidePanelEl.querySelector('.close');\n        if (closeButtonEl) {\n            closeButtonEl.addEventListener('click', this.eventHide);\n        }\n        this.views.forEach((view) => {\n            view.onDocumentLoaded();\n        });\n    }\n    eventHide(event) {\n        if (event)\n            event.preventDefault();\n        this.showHide('0%');\n        this.views.forEach((view) => {\n            view.hidden();\n        });\n    }\n    eventShow(event) {\n        let size = this.prefs.expandedSize;\n        if (window.innerWidth < 769) {\n            size = '50%';\n        }\n        if (window.innerWidth < 415) {\n            size = '100%';\n        }\n        this.showHide(size);\n    }\n    documentLoaded(view) {\n    }\n    itemAction(view, actionName, selectedItem) {\n    }\n    canDeleteItem(view, selectedItem) {\n        return true;\n    }\n    itemDeleted(view, selectedItem) {\n    }\n    itemDragStarted(view, selectedItem) {\n    }\n    itemSelected(view, selectedItem) {\n    }\n    itemDeselected(view, selectedItem) {\n    }\n    itemDropped(view, droppedItem) {\n    }\n    showRequested(view) {\n        this.eventShow(null);\n    }\n    /*\n      Contained views can request show and hide of the sidebar container\n     */\n    hideRequested(view) {\n        this.eventHide(null);\n    }\n    canSelectItem(view, selectedItem) {\n        return true;\n    }\n    showHide(newStyleValue) {\n        const sidePanelEl = document.getElementById(this.prefs.id);\n        if (sidePanelEl === null)\n            return;\n        switch (this.prefs.location) {\n            case SidebarLocation.left: {\n                sidePanelEl.style.width = newStyleValue;\n                break;\n            }\n            case SidebarLocation.right: {\n                sidePanelEl.style.width = newStyleValue;\n                break;\n            }\n            case SidebarLocation.bottom: {\n                sidePanelEl.style.height = newStyleValue;\n                break;\n            }\n            case SidebarLocation.top: {\n                sidePanelEl.style.height = newStyleValue;\n                break;\n            }\n        }\n    }\n}\n//# sourceMappingURL=SidebarViewContainer.js.map","import { EXTRA_ACTION_ATTRIBUTE_NAME } from \"../ConfigurationTypes\";\nimport browserUtil from \"../../util/BrowserUtil\";\nimport debug from 'debug';\nimport { AbstractCollectionView } from \"../view/implementation/AbstractCollectionView\";\nconst logger = debug('context-helper');\nexport var TogglePlacement;\n(function (TogglePlacement) {\n    TogglePlacement[TogglePlacement[\"top\"] = 0] = \"top\";\n    TogglePlacement[TogglePlacement[\"bottom\"] = 1] = \"bottom\";\n    TogglePlacement[TogglePlacement[\"right\"] = 2] = \"right\";\n    TogglePlacement[TogglePlacement[\"left\"] = 3] = \"left\";\n})(TogglePlacement || (TogglePlacement = {}));\nconst defaultIdentifier = function (name, item) {\n    return '';\n};\nexport class ContextualInformationHelper {\n    constructor() {\n        this.registry = [];\n        this.menuDivEl = null;\n        this.menuContentEl = null;\n        this.handleContextMenu = this.handleContextMenu.bind(this);\n        this.hideContextMenu = this.hideContextMenu.bind(this);\n    }\n    static getInstance() {\n        if (!(ContextualInformationHelper._instance)) {\n            ContextualInformationHelper._instance = new ContextualInformationHelper();\n        }\n        return ContextualInformationHelper._instance;\n    }\n    onDocumentLoaded() {\n        // @ts-ignore\n        document.addEventListener('click', this.hideContextMenu);\n        this.menuDivEl = document.getElementById('contextmenu');\n        this.menuContentEl = document.getElementById('contextMenuItems');\n    }\n    addContextFromView(view, internalType, displayName) {\n        let context = this.ensureInRegistry(view.getName());\n        context.view = view;\n        context.defaultType.internalType = internalType;\n        context.defaultType.displayName = displayName;\n        context.defaultType.identifier = view.getItemId;\n        context.defaultType.description = view.getItemDescription;\n        return context;\n    }\n    addContextToElement(source, type, item, element, addTooltip = false, placement = TogglePlacement.bottom) {\n        const context = this.ensureInRegistry(source);\n        element.setAttribute(ContextualInformationHelper.SOURCE, context.source);\n        element.setAttribute(ContextualInformationHelper.TYPE, context.defaultType.internalType);\n        element.setAttribute(ContextualInformationHelper.DISPLAYNAME, context.defaultType.displayName);\n        element.setAttribute(ContextualInformationHelper.IDENTIFIER, context.defaultType.identifier(type, item));\n        element.setAttribute(ContextualInformationHelper.DESCRIPTION, context.defaultType.description(type, item));\n        if (addTooltip) {\n            element.setAttribute(ContextualInformationHelper.BOOTSTRAP_TOGGLE, ContextualInformationHelper.BOOTSTRAP_TOOLTIP_VALUE);\n            element.setAttribute(ContextualInformationHelper.BOOTSTRAP_TOGGLE_HTML, ContextualInformationHelper.BOOTSTRAP_TOGGLE_HTML_VALUE);\n            switch (placement) {\n                case TogglePlacement.bottom: {\n                    element.setAttribute(ContextualInformationHelper.BOOTSTRAP_PLACEMENT, ContextualInformationHelper.BOOTSTRAP_PLACEMENT_BOTTOM);\n                    break;\n                }\n                case TogglePlacement.top: {\n                    element.setAttribute(ContextualInformationHelper.BOOTSTRAP_PLACEMENT, ContextualInformationHelper.BOOTSTRAP_PLACEMENT_TOP);\n                    break;\n                }\n                case TogglePlacement.left: {\n                    element.setAttribute(ContextualInformationHelper.BOOTSTRAP_PLACEMENT, ContextualInformationHelper.BOOTSTRAP_PLACEMENT_LEFT);\n                    break;\n                }\n                case TogglePlacement.right: {\n                    element.setAttribute(ContextualInformationHelper.BOOTSTRAP_PLACEMENT, ContextualInformationHelper.BOOTSTRAP_PLACEMENT_RIGHT);\n                    break;\n                }\n            }\n            // @ts-ignore\n            $('[data-toggle=\"tooltip\"]').tooltip({ html: true });\n        }\n    }\n    findContextFromEvent(event) {\n        let result = null;\n        if (event.target) {\n            let target = event.target;\n            // @ts-ignore\n            result = this.findContextFromElement(event.target);\n        }\n        return result;\n    }\n    addActionToContext(context, actionName, displayName, handler, icon, permissionCheck) {\n        let action = {\n            actionName: actionName,\n            displayName: displayName,\n            handler: handler,\n            hasPermission: permissionCheck,\n            elementDefinition: {\n                elementType: 'a',\n                elementAttributes: [{ name: 'href', value: '#' }],\n                elementClasses: 'list-group-item list-group-item-action bg-dark text-white',\n            },\n            iconClasses: icon\n        };\n        this.addContextActionToContext(context, action);\n    }\n    handleContextMenu(event) {\n        logger('Right click');\n        logger(event.target);\n        // are we over a context sensitive item?\n        // find a context if possible\n        // @ts-ignore\n        const context = this.findContextFromElement(event.target);\n        logger(context);\n        if (context && this.buildContextMenu(context)) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.showContextMenu(event);\n            return false;\n        }\n        // otherwise let the default behaviour happen\n        return true;\n    }\n    ensureInRegistry(source) {\n        let result;\n        let foundIndex = this.registry.findIndex((context) => context.source === source);\n        if (foundIndex < 0) {\n            result = {\n                source: source,\n                defaultType: {\n                    internalType: '',\n                    displayName: '',\n                    identifier: defaultIdentifier,\n                    description: defaultIdentifier,\n                    actions: []\n                }\n            };\n            this.registry.push(result);\n        }\n        else {\n            result = this.registry[foundIndex];\n        }\n        return result;\n    }\n    findContextFromElement(element) {\n        // do we have context information in this element?\n        let result = null;\n        const source = element.getAttribute(ContextualInformationHelper.SOURCE);\n        if (source) {\n            const type = element.getAttribute(ContextualInformationHelper.TYPE);\n            const name = element.getAttribute(ContextualInformationHelper.DISPLAYNAME);\n            const id = element.getAttribute(ContextualInformationHelper.IDENTIFIER);\n            const desc = element.getAttribute(ContextualInformationHelper.DESCRIPTION);\n            // @ts-ignore\n            result = { source: source, internalType: type, displayName: name, identifier: id, description: desc };\n        }\n        else {\n            const parent = element.parentElement;\n            if (parent) {\n                result = this.findContextFromElement(parent);\n            }\n        }\n        return result;\n    }\n    findAllContextsFromElement(element, contexts) {\n        // do we have context information in this element?\n        const source = element.getAttribute(ContextualInformationHelper.SOURCE);\n        if (source) {\n            const type = element.getAttribute(ContextualInformationHelper.TYPE);\n            const name = element.getAttribute(ContextualInformationHelper.DISPLAYNAME);\n            const id = element.getAttribute(ContextualInformationHelper.IDENTIFIER);\n            const desc = element.getAttribute(ContextualInformationHelper.DESCRIPTION);\n            // @ts-ignore\n            if (type && name && id && desc) {\n                let result = {\n                    source: source,\n                    internalType: type,\n                    displayName: name,\n                    identifier: id,\n                    description: desc\n                };\n                contexts.push(result);\n            }\n        }\n        const parent = element.parentElement;\n        if (parent) {\n            this.findAllContextsFromElement(parent, contexts);\n        }\n    }\n    addContextActionToContext(context, action) {\n        logger(`Adding action to context ${context.source}`);\n        logger(action);\n        context.defaultType.actions.push(action);\n    }\n    buildContextMenu(context) {\n        logger(`building context menu`);\n        let result = false;\n        // find the context for these details\n        const contextDef = this.ensureInRegistry(context.source);\n        let selectedItem = null;\n        if (contextDef && contextDef.view && (contextDef.view instanceof AbstractCollectionView)) {\n            logger(`collection view context - finding item with identifier ${context.identifier}`);\n            let collectionView = (contextDef.view);\n            let compareWith = {};\n            // @ts-ignore\n            compareWith[collectionView.getCollectionUIConfig().keyId] = context.identifier;\n            selectedItem = collectionView.getItemInNamedCollection(context.internalType, compareWith);\n        }\n        logger(`found item for context menu`);\n        logger(selectedItem);\n        if (contextDef.defaultType.actions.length > 0) {\n            if (this.menuContentEl && this.menuContentEl) {\n                browserUtil.removeAllChildren(this.menuContentEl);\n                contextDef.defaultType.actions.forEach((action) => {\n                    logger('Adding action');\n                    logger(action);\n                    if ((selectedItem && action.hasPermission && action.hasPermission(action.actionName, contextDef.defaultType.internalType, selectedItem)) ||\n                        !(action.hasPermission)) {\n                        let itemEl = document.createElement(action.elementDefinition.elementType);\n                        if (itemEl && this.menuContentEl) {\n                            browserUtil.addAttributes(itemEl, action.elementDefinition.elementAttributes);\n                            browserUtil.addRemoveClasses(itemEl, action.elementDefinition.elementClasses);\n                            itemEl.setAttribute(ContextualInformationHelper.SOURCE, context.source);\n                            itemEl.setAttribute(ContextualInformationHelper.TYPE, context.internalType);\n                            itemEl.setAttribute(ContextualInformationHelper.DISPLAYNAME, context.displayName);\n                            itemEl.setAttribute(ContextualInformationHelper.IDENTIFIER, context.identifier);\n                            itemEl.setAttribute(ContextualInformationHelper.DESCRIPTION, context.description);\n                            itemEl.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, action.actionName);\n                            itemEl.addEventListener('click', (event) => {\n                                this.hideContextMenu(event);\n                                action.handler(event);\n                            });\n                            itemEl.innerHTML = `${action.displayName}`;\n                            if (action.iconClasses) {\n                                itemEl.innerHTML += `&nbsp;&nbsp;<i class=\"${action.iconClasses}\"></i>`;\n                            }\n                            this.menuContentEl.appendChild(itemEl);\n                            logger('new menu element is ');\n                            logger(this.menuContentEl);\n                            result = true;\n                        }\n                    }\n                });\n            }\n        }\n        else {\n            logger(`building context menu - no actions for ${context.source}`);\n        }\n        return result;\n    }\n    hideContextMenu(event) {\n        if (this.menuDivEl) {\n            browserUtil.addRemoveClasses(this.menuDivEl, 'd-none');\n        }\n    }\n    showContextMenu(event) {\n        if (this.menuDivEl) {\n            logger(`Showing context menu at ${event.pageX},${event.pageY}`);\n            browserUtil.addRemoveClasses(this.menuDivEl, 'd-none', false);\n            this.menuDivEl.style.left = event.pageX + 'px';\n            this.menuDivEl.style.top = event.pageY + 'px';\n        }\n    }\n}\nContextualInformationHelper.SOURCE = 'context-source';\nContextualInformationHelper.TYPE = 'context-type';\nContextualInformationHelper.DISPLAYNAME = 'context-display-name';\nContextualInformationHelper.IDENTIFIER = 'context-id';\nContextualInformationHelper.DESCRIPTION = 'title';\nContextualInformationHelper.BOOTSTRAP_TOGGLE = 'data-toggle';\nContextualInformationHelper.BOOTSTRAP_PLACEMENT = 'data-placement';\nContextualInformationHelper.BOOTSTRAP_TOOLTIP_VALUE = 'tooltip';\nContextualInformationHelper.BOOTSTRAP_POPOVER_VALUE = 'popover';\nContextualInformationHelper.BOOTSTRAP_TOGGLE_HTML = 'data-html';\nContextualInformationHelper.BOOTSTRAP_TOGGLE_HTML_VALUE = 'true';\nContextualInformationHelper.BOOTSTRAP_PLACEMENT_TOP = 'top';\nContextualInformationHelper.BOOTSTRAP_PLACEMENT_BOTTOM = 'bottom';\nContextualInformationHelper.BOOTSTRAP_PLACEMENT_RIGHT = 'right';\nContextualInformationHelper.BOOTSTRAP_PLACEMENT_LEFT = 'left';\n//# sourceMappingURL=ContextualInformationHelper.js.map","import { FormEventType } from \"./FormListener\";\nimport debug from 'debug';\nimport { ValidationManager } from \"./validation/ValidationManager\";\nimport { AlertType } from \"../alert/AlertListener\";\nimport { AlertManager } from \"../alert/AlertManager\";\nimport { ConditionResponse } from \"./validation/ValidationTypeDefs\";\nimport { v4 } from \"uuid\";\nconst logger = debug('abstract-form');\nconst dlogger = debug('abstract-form-detail');\nconst vlogger = debug('abstract-form-detail-validation');\nexport class AbstractForm {\n    constructor(containerId, dataObjDef) {\n        this.formListeners = [];\n        this.fieldListeners = [];\n        this.uiDef = null;\n        this.isVisible = false;\n        this.fields = [];\n        this.isInitialised = false;\n        this.hasChangedBoolean = false;\n        this.isDisplayOnly = false;\n        this.containerEl = document.getElementById(containerId);\n        if (!(this.containerEl))\n            throw new Error(`container ${containerId} for form ${dataObjDef.id} does not exist`);\n        this.map = [];\n        this.dataObjDef = dataObjDef;\n        this.currentDataObj = {};\n        this.id = v4();\n        // sub-classes need to create the form and it's fields\n        // listen to ourselves\n        this.addFormListener(this);\n    }\n    hasChanged() {\n        return this.hasChangedBoolean;\n    }\n    getName() {\n        return this.dataObjDef.displayName;\n    }\n    valueChanged(formId, field, newValue) {\n        this.hasChangedBoolean = true;\n        this.setUnsavedMessage();\n        logger(`Form has changed`);\n    }\n    failedValidation(formId, field, currentValue, message) {\n        this.hasChangedBoolean = true;\n        logger(`Form has changed`);\n    }\n    initialise(displayOrder, hasDeleteButton, hideModifierFields = false) {\n        if (this.isInitialised)\n            return;\n        this.isInitialised = true;\n        this._initialise(displayOrder, hasDeleteButton, hideModifierFields);\n    }\n    addFieldListener(listener) {\n        this.fieldListeners.push(listener);\n    }\n    addFormListener(listener) {\n        this.formListeners.push(listener);\n    }\n    reset() {\n        logger(`Resetting form`);\n        this.clearUnsavedMessage();\n        this.isDisplayOnly = false;\n        this.hasChangedBoolean = false;\n        // inform the listeners\n        if (this.uiDef) {\n            let formEvent = {\n                formId: this.id,\n                target: this,\n                eventType: FormEventType.RESETTING\n            };\n            this.informFormListeners(formEvent, this.currentDataObj);\n        }\n        this.currentDataObj = {};\n        this._reset();\n        // reset all the fields\n        this.fields.forEach((field) => {\n            field.reset();\n        });\n        this.hasChangedBoolean = false;\n    }\n    setIsVisible(isVisible) {\n        logger(`Changing visibility to ${isVisible}`);\n        this.isVisible = isVisible;\n        if (this.uiDef) {\n            let eventType = FormEventType.HIDDEN;\n            if (this.isVisible) {\n                this._visible();\n                eventType = FormEventType.SHOWN;\n            }\n            else {\n                this._hidden();\n            }\n            // inform the listeners\n            let formEvent = {\n                formId: this.id,\n                target: this,\n                eventType: eventType\n            };\n            this.informFormListeners(formEvent, this.currentDataObj);\n        }\n        if (isVisible && !this.isDisplayOnly)\n            this.checkFormValidationOnDisplay();\n        if (isVisible && this.isDisplayOnly)\n            this.checkForVisualValidationForDisplayOnly();\n    }\n    startCreateNew() {\n        this.clearUnsavedMessage();\n        logger(`Starting create new`);\n        this.reset();\n        this.currentDataObj = {};\n        this.isDisplayOnly = false;\n        this.hasChangedBoolean = false;\n        if (this.uiDef) {\n            let eventType = FormEventType.CREATING;\n            // inform the listeners\n            let formEvent = {\n                formId: this.id,\n                target: this,\n                eventType: eventType\n            };\n            this._startCreate();\n            this.informFormListeners(formEvent, this.currentDataObj);\n        }\n        this.clearReadOnly();\n        return this.currentDataObj;\n    }\n    startUpdate(objectToEdit) {\n        this.clearUnsavedMessage();\n        logger(`Starting modify existing on `);\n        this.isDisplayOnly = false;\n        this.hasChangedBoolean = false;\n        logger(objectToEdit);\n        this.currentDataObj = Object.assign({}, objectToEdit); // take a copy\n        if (this.uiDef) {\n            let eventType = FormEventType.MODIFYING;\n            // inform the listeners\n            let formEvent = {\n                formId: this.id,\n                target: this,\n                eventType: eventType\n            };\n            this._startUpdate();\n            this.informFormListeners(formEvent, this.currentDataObj);\n        }\n        this.clearReadOnly();\n    }\n    displayOnly(objectToView) {\n        this.clearUnsavedMessage();\n        logger(`Starting display only `);\n        logger(objectToView);\n        this.isDisplayOnly = true;\n        this.hasChangedBoolean = false;\n        this.currentDataObj = Object.assign({}, objectToView); // take a copy\n        if (this.uiDef) {\n            this._displayOnly();\n        }\n        this.setReadOnly();\n    }\n    formChanged(event, formValues) {\n        // catch form events for user leaving the form\n        let shouldCancelChange = false;\n        switch (event.eventType) {\n            case (FormEventType.CANCELLING): {\n                logger(`Form is cancelling`);\n                if (this.hasChangedBoolean && !this.isDisplayOnly) {\n                    if (this.uiDef) {\n                        AlertManager.getInstance().startAlert(this, this.uiDef.displayName, `Lose any unsaved changes?`, FormEventType.CANCELLING);\n                    }\n                }\n                else {\n                    if (this.uiDef) {\n                        let formEvent = {\n                            formId: this.id,\n                            target: this,\n                            eventType: FormEventType.CANCELLED\n                        };\n                        this.informFormListeners(formEvent, this.currentDataObj);\n                    }\n                }\n                break;\n            }\n            case (FormEventType.CANCELLING_ABORTED): {\n                logger(`Form is cancelling - aborted`);\n                break;\n            }\n            case (FormEventType.CANCELLED): {\n                logger(`Form is cancelled - resetting`);\n                // user cancelled the form, will become invisible\n                this.isDisplayOnly = true;\n                this.reset(); // reset the form state\n                this.setReadOnly();\n                break;\n            }\n            case (FormEventType.DELETING): {\n                logger(`Form is deleting`);\n                if (this.uiDef) {\n                    AlertManager.getInstance().startAlert(this, this.uiDef.displayName, `Are you sure you want to delete this information?`, FormEventType.DELETING);\n                }\n                break;\n            }\n            case (FormEventType.DELETE_ABORTED): {\n                logger(`Form is deleting - aborted`);\n                break;\n            }\n            case (FormEventType.DELETED): {\n                logger(`Form is deleted - resetting`);\n                // user is deleting the object, will become invisible\n                this.reset();\n                break;\n            }\n            case (FormEventType.SAVE_ABORTED): {\n                this._saveFinishedOrAborted();\n                logger(`Form save cancelled`);\n                break;\n            }\n            case (FormEventType.SAVED): {\n                this._saveFinishedOrAborted();\n                logger(`Form is saved with data`);\n                logger(formValues);\n                this.isDisplayOnly = false;\n                this.hasChangedBoolean = false;\n                break;\n            }\n            case (FormEventType.SAVING): {\n                logger(`Form is saving, checking validation and storing values`);\n                this._saveIsActive();\n                if (this.uiDef) {\n                    let allFieldsValid = true;\n                    // user attempting to save the form, lets check the field validation\n                    this.fields.forEach((field) => {\n                        const currentValue = field.getValue();\n                        if (!field.isValid()) {\n                            vlogger(`Field ${field.getId()} is invalid`);\n                            field.setInvalid(`${field.getName()} has an invalid format or is required.`);\n                            allFieldsValid = false;\n                        }\n                        else {\n                            // does the field fulfil any rules from the Validation manager\n                            // @ts-ignore\n                            const response = ValidationManager.getInstance().applyRulesToTargetField(this.id, field.getFieldDefinition(), ConditionResponse.invalid);\n                            if (response.ruleFailed) {\n                                // @ts-ignore\n                                field.setInvalid(response.message);\n                                vlogger(`Field ${field.getId()} is invalid from validation manager with message ${response.message}`);\n                                allFieldsValid = false;\n                            }\n                            else {\n                                this.setFieldValueToDataObject(this.currentDataObj, field, currentValue);\n                            }\n                        }\n                    });\n                    // is every field valid?\n                    if (!allFieldsValid) {\n                        logger(`Form is saving, checking validation - FAILED`);\n                        let formEvent = {\n                            formId: this.id,\n                            target: this,\n                            eventType: FormEventType.SAVE_ABORTED\n                        };\n                        this.informFormListeners(formEvent, this.currentDataObj);\n                        shouldCancelChange = true;\n                    }\n                    else {\n                        logger(`formatted data object is`);\n                        const formattedDataObject = this.getFormattedDataObject();\n                        let formEvent = {\n                            formId: this.id,\n                            target: this,\n                            eventType: FormEventType.SAVED\n                        };\n                        this.informFormListeners(formEvent, formattedDataObject);\n                    }\n                    break;\n                }\n            }\n        }\n        return shouldCancelChange;\n    }\n    getId() {\n        return this.id;\n    }\n    getFieldFromDataFieldId(dataFieldId) {\n        let result = undefined;\n        dlogger(`Finding field for attribute ${dataFieldId} `);\n        const mapItem = this.map.find((mapItem) => mapItem.attributeId === dataFieldId);\n        if (mapItem) {\n            dlogger(`Mapped attribute ${mapItem.attributeId} to field ${mapItem.fieldId}`);\n            // find the field with that id\n            result = this.fields.find((field) => field.getId() === mapItem.attributeId);\n        }\n        return result;\n    }\n    completed(event) {\n        logger(`Handling alert completed`);\n        logger(event);\n        if (event.context && this.uiDef) {\n            switch (event.context) {\n                case (FormEventType.CANCELLING): {\n                    if (event.outcome === AlertType.confirmed) {\n                        let formEvent = {\n                            formId: this.id,\n                            target: this,\n                            eventType: FormEventType.CANCELLED\n                        };\n                        this.informFormListeners(formEvent, this.currentDataObj);\n                    }\n                    else {\n                        let formEvent = {\n                            formId: this.id,\n                            target: this,\n                            eventType: FormEventType.CANCELLING_ABORTED\n                        };\n                        this.informFormListeners(formEvent, this.currentDataObj);\n                    }\n                    break;\n                }\n                case (FormEventType.DELETING): {\n                    if (event.outcome === AlertType.confirmed) {\n                        let formEvent = {\n                            formId: this.id,\n                            target: this,\n                            eventType: FormEventType.DELETED\n                        };\n                        this.informFormListeners(formEvent, this.currentDataObj);\n                    }\n                    else {\n                        let formEvent = {\n                            formId: this.id,\n                            target: this,\n                            eventType: FormEventType.DELETE_ABORTED\n                        };\n                        this.informFormListeners(formEvent, this.currentDataObj);\n                    }\n                    break;\n                }\n            }\n        }\n    }\n    clearReadOnly() {\n        this.fields.forEach((field) => {\n            field.clearReadOnly();\n        });\n    }\n    setReadOnly() {\n        this.fields.forEach((field) => {\n            field.setReadOnly();\n        });\n    }\n    isDisplayingItem(dataObj) {\n        if (this.currentDataObj) {\n            return this._isSameObjectAsDisplayed(dataObj);\n        }\n        return false;\n    }\n    isReadOnly() {\n        return this.isDisplayOnly;\n    }\n    informFormListeners(formEvent, dataObj) {\n        this.formListeners.forEach((listener) => listener.formChanged(formEvent, dataObj));\n    }\n    findFieldUiConfig(fieldDef) {\n        dlogger(`Finding field UI Config for field ${fieldDef.displayName}`);\n        let result = null;\n        if (this.uiDef) {\n            let index = 0;\n            while (index < this.uiDef.fieldGroups.length) {\n                const fieldGroup = this.uiDef.fieldGroups[index];\n                result = fieldGroup.fields.find((uiConfig) => uiConfig.field.id === fieldDef.id);\n                if (result) {\n                    dlogger(`Finding field UI Config for field ${fieldDef.displayName} - Found`);\n                    break;\n                }\n                index++;\n            }\n        }\n        return result;\n    }\n    checkForVisualValidationForDisplayOnly() {\n        logger(`Checking display validation for display only`);\n        this.fields.forEach((field) => {\n            field.show();\n            // @ts-ignore\n            let response = ValidationManager.getInstance().applyRulesToTargetField(this.id, field.getFieldDefinition(), ConditionResponse.hide);\n            if (response.ruleFailed) {\n                // @ts-ignore\n                field.hide();\n                vlogger(`Field ${field.getId()} is hidden from validation manager with message ${response.message}`);\n            }\n        });\n    }\n    checkFormValidationOnDisplay() {\n        logger(`Checking display validation`);\n        this.fields.forEach((field) => {\n            field.show();\n            const currentValue = field.getValue();\n            if (!field.isValid()) {\n                logger(`Field ${field.getId()} is invalid`);\n                field.setInvalid(`${field.getName()} has an invalid format or is required.`);\n            }\n            else {\n                // does the field fulfil any rules from the Validation manager\n                // @ts-ignore\n                let response = ValidationManager.getInstance().applyRulesToTargetField(this.id, field.getFieldDefinition(), ConditionResponse.invalid);\n                if (response.ruleFailed) {\n                    // @ts-ignore\n                    field.setInvalid(response.message);\n                    vlogger(`Field ${field.getId()} is invalid from validation manager with message ${response.message}`);\n                }\n                // @ts-ignore\n                response = ValidationManager.getInstance().applyRulesToTargetField(this.id, field.getFieldDefinition(), ConditionResponse.hide);\n                if (response.ruleFailed) {\n                    // @ts-ignore\n                    field.hide();\n                    vlogger(`Field ${field.getId()} is hidden from validation manager with message ${response.message}`);\n                }\n            }\n        });\n    }\n}\n//# sourceMappingURL=AbstractForm.js.map","import { DATA_ID_ATTRIBUTE, UIFieldType } from \"./FormUITypeDefs\";\nimport { AbstractForm } from \"./AbstractForm\";\nimport { BootstrapFormConfigHelper } from \"../helper/BootstrapFormConfigHelper\";\nimport { FormElementFactory } from \"./factory/FormElementFactory\";\nimport debug from 'debug';\nimport browserUtil from \"../../util/BrowserUtil\";\nimport { TextAreaField } from \"./field/TextAreaField\";\nimport { RadioButtonGroupField } from \"./field/RadioButtonGroupField\";\nimport { SelectField } from \"./field/SelectField\";\nimport { InputField } from \"./field/InputField\";\nconst logger = debug('basic-form');\nconst dlogger = debug('basic-form-detail');\nexport class BasicFormImplementation extends AbstractForm {\n    constructor(containerId, dataObjDef) {\n        super(containerId, dataObjDef);\n        this.factoryElements = null;\n    }\n    getFormattedDataObject() {\n        logger(`Getting current formatted data`);\n        let formattedResult = {};\n        this.dataObjDef.fields.forEach((fieldDef) => {\n            let fieldValue = this.currentDataObj[fieldDef.id];\n            formattedResult[fieldDef.id] = this.getFormattedFieldValue(fieldDef);\n        });\n        logger(formattedResult);\n        return formattedResult;\n    }\n    clearReadOnly() {\n        super.clearReadOnly();\n        this.enableButtons();\n    }\n    setReadOnly() {\n        super.setReadOnly();\n        this.disableButtons();\n    }\n    _hidden() {\n        var _a;\n        if (this.factoryElements)\n            (_a = this.containerEl) === null || _a === void 0 ? void 0 : _a.removeChild(this.factoryElements.form);\n    }\n    setupFieldObject(fieldEl, subElements = []) {\n        // get the data-id field from the field element\n        const dataId = fieldEl.getAttribute(DATA_ID_ATTRIBUTE);\n        const fieldId = fieldEl.getAttribute('id');\n        dlogger(`Converting field input element ${fieldId} with data-id of ${dataId}`);\n        if (dataId && fieldId) {\n            // find the corresponding field definition\n            const index = this.dataObjDef.fields.findIndex((value) => value.id === dataId);\n            const fieldDef = this.dataObjDef.fields.find((value) => value.id === dataId);\n            if (fieldDef) {\n                dlogger(`Converting field input element ${fieldId} with data-id of ${dataId} field definition is`);\n                logger(fieldDef);\n                // find the corresponding ui definition\n                const fieldUIConfig = this.findFieldUiConfig(fieldDef);\n                dlogger(`Converting field input element ${fieldId} with data-id of ${dataId} field ui config is`);\n                logger(fieldUIConfig);\n                if (fieldUIConfig) {\n                    if (this.uiDef) {\n                        let field;\n                        switch (fieldUIConfig.elementType) {\n                            case UIFieldType.textarea: {\n                                field = new TextAreaField(this.id, fieldUIConfig, fieldDef, fieldEl);\n                                break;\n                            }\n                            case UIFieldType.radioGroup: {\n                                field = new RadioButtonGroupField(this.id, fieldUIConfig, fieldDef, fieldEl, subElements);\n                                break;\n                            }\n                            case UIFieldType.select: {\n                                field = new SelectField(this.id, fieldUIConfig, fieldDef, fieldEl);\n                                break;\n                            }\n                            default: {\n                                field = new InputField(this.id, fieldUIConfig, fieldDef, fieldEl);\n                                break;\n                            }\n                        }\n                        this.fields.push(field);\n                        field.addFieldListener(this);\n                        this.map.push({ attributeId: dataId, fieldId: fieldId });\n                    }\n                }\n            }\n            else {\n                dlogger(`Converting field input element ${fieldId} with data-id of ${dataId} field definition is NOT FOUND`);\n            }\n        }\n    }\n    clearUnsavedMessage() {\n        if (this.factoryElements)\n            this.factoryElements.unsavedMessage.innerHTML = '';\n    }\n    setUnsavedMessage() {\n        if (this.factoryElements && this.uiDef && this.uiDef.unsavedChanges.innerHTML) {\n            this.factoryElements.unsavedMessage.innerHTML = this.uiDef.unsavedChanges.innerHTML;\n        }\n        else if (this.factoryElements) {\n            this.factoryElements.unsavedMessage.innerHTML = 'Pending changes to save';\n        }\n    }\n    _initialise(displayOrder, hasDeleteButton, hideModifierFields = false) {\n        logger(`Initialising`);\n        // ok, so given a Data Object definition we are going to create the form ui config\n        this.uiDef = BootstrapFormConfigHelper.getInstance().generateFormConfig(this.dataObjDef, displayOrder, hasDeleteButton, hideModifierFields);\n        logger(this.uiDef);\n        // now we need to create all the form elements from the ui definition\n        this.factoryElements = FormElementFactory.getInstance().createFormElements(this, this.formListeners, this.uiDef, this.fieldListeners);\n        logger(this.factoryElements);\n        // create field elements for each field element, and the basic map\n        logger(`Converting field input elements to Field objects`);\n        this.factoryElements.fields.forEach((fieldEl) => {\n            fieldEl.addEventListener('keyup', (event) => {\n                dlogger(`key up in form ${this.getName()}`);\n                this.hasChangedBoolean = true;\n                this.setUnsavedMessage();\n            });\n            this.setupFieldObject(fieldEl);\n        });\n        logger(`Converting field text area elements to Field objects`);\n        this.factoryElements.textFields.forEach((fieldEl) => {\n            fieldEl.addEventListener('keyup', (event) => {\n                dlogger(`key up in form ${this.getName()}`);\n                this.hasChangedBoolean = true;\n                this.setUnsavedMessage();\n            });\n            this.setupFieldObject(fieldEl);\n        });\n        logger(`Converting field select elements to Field objects`);\n        this.factoryElements.selectFields.forEach((fieldEl) => {\n            dlogger(`key up in form ${this.getName()}`);\n        });\n        logger(`Converting field rbg elements to Field objects`);\n        this.factoryElements.radioButtonGroups.forEach((rbg) => {\n            this.setupFieldObject(rbg.container, rbg.radioButtons);\n        });\n        logger(`field/data map is `);\n        logger(this.map);\n        logger('fields are');\n        logger(this.fields);\n    }\n    _reset() {\n        this.clearUnsavedMessage();\n    }\n    validateField(fieldDef) {\n        const field = this.getFieldFromDataFieldId(fieldDef.id);\n        if (field)\n            field.validate();\n    }\n    renderField(fieldDef, currentValue) {\n        let result = currentValue;\n        const field = this.getFieldFromDataFieldId(fieldDef.id);\n        if (field) {\n            result = field.render(result);\n        }\n        return result;\n    }\n    _startCreate() {\n        this.clearUnsavedMessage();\n        // we have a new object, there might be some values to generate\n        this.dataObjDef.fields.forEach((fieldDef) => {\n            if (fieldDef.generator && fieldDef.generator.onCreation) {\n                let fieldValue = fieldDef.generator.generator.generate(fieldDef, true);\n                dlogger(`Setting default values for ${fieldDef.displayName} to ${fieldValue}`);\n                this.currentDataObj[fieldDef.id] = fieldValue;\n            }\n            let fieldValue = this.currentDataObj[fieldDef.id];\n            if (fieldValue) {\n                fieldValue = this.renderField(fieldDef, fieldValue);\n                this.setFieldValueFromDataObject(fieldDef, fieldValue);\n            }\n            // run the validation to let the user know what is required\n            this.validateField(fieldDef);\n        });\n        // delete button can go\n        if (this.factoryElements && this.factoryElements.deleteButton)\n            browserUtil.addAttributes(this.factoryElements.deleteButton, [{\n                    name: 'style',\n                    value: 'display:none'\n                }]);\n    }\n    _startUpdate() {\n        this.clearUnsavedMessage();\n        // we have an existing object, there might be some values to generate\n        logger(this.currentDataObj);\n        this.dataObjDef.fields.forEach((fieldDef) => {\n            if (fieldDef.generator && fieldDef.generator.onModify) {\n                let fieldValue = fieldDef.generator.generator.generate(fieldDef, false);\n                dlogger(`Setting default modified values for ${fieldDef.displayName} to ${fieldValue}`);\n                this.currentDataObj[fieldDef.id] = fieldValue;\n            }\n            let fieldValue = this.currentDataObj[fieldDef.id];\n            if (fieldValue)\n                fieldValue = this.renderField(fieldDef, fieldValue);\n            this.setFieldValueFromDataObject(fieldDef, fieldValue);\n            this.validateField(fieldDef);\n        });\n        // delete button make visible again\n        if (this.factoryElements && this.factoryElements.deleteButton)\n            browserUtil.removeAttributes(this.factoryElements.deleteButton, ['style']);\n    }\n    _displayOnly() {\n        this.clearUnsavedMessage();\n        // we have an existing object, there might be some values to generate\n        logger(this.currentDataObj);\n        this.dataObjDef.fields.forEach((fieldDef) => {\n            let fieldValue = this.currentDataObj[fieldDef.id];\n            if (fieldValue)\n                fieldValue = this.renderField(fieldDef, fieldValue);\n            this.setFieldValueFromDataObject(fieldDef, fieldValue);\n        });\n        // delete button can go\n        if (this.factoryElements && this.factoryElements.deleteButton)\n            if (this.factoryElements)\n                browserUtil.addAttributes(this.factoryElements.deleteButton, [{\n                        name: 'style',\n                        value: 'display:none'\n                    }]);\n    }\n    _visible() {\n        var _a;\n        if (this.factoryElements)\n            (_a = this.containerEl) === null || _a === void 0 ? void 0 : _a.appendChild(this.factoryElements.form);\n    }\n    setFieldValueToDataObject(dataObj, field, currentValue) {\n        // find the attribute id from the map\n        const mapItem = this.map.find((mapItem) => mapItem.attributeId === field.getId());\n        if (mapItem) {\n            dlogger(`Mapped field ${mapItem.fieldId} to attribute ${mapItem.attributeId} with value ${currentValue}`);\n            this.currentDataObj[mapItem.attributeId] = currentValue;\n        }\n        else {\n            logger(`Mapped field ${field.getId()} to attribute NOT FOUND`);\n        }\n    }\n    setFieldValueFromDataObject(fieldDef, currentValue) {\n        const field = this.getFieldFromDataFieldId(fieldDef.id);\n        // find the field id from the map\n        if (field) {\n            if (currentValue) {\n                field.setValue(currentValue);\n            }\n            else {\n                field.clearValue();\n            }\n        }\n    }\n    getFormattedFieldValue(fieldDef) {\n        let result = null;\n        const mapItem = this.map.find((mapItem) => mapItem.attributeId === fieldDef.id);\n        if (mapItem) {\n            dlogger(`Mapped attribute ${mapItem.attributeId} to field ${mapItem.fieldId} with for getting formatted value`);\n            // find the field with that id\n            const field = this.fields.find((field) => field.getId() === mapItem.attributeId);\n            if (field) {\n                result = field.getFormattedValue();\n            }\n        }\n        return result;\n    }\n    _isSameObjectAsDisplayed(dataObj) {\n        // we can only be sure for objects with keys\n        let isSameObject = false;\n        dlogger(`is same object as current`);\n        dlogger(dataObj);\n        dlogger(this.currentDataObj);\n        this.dataObjDef.fields.every((field) => {\n            var _a;\n            if (field.isKey) {\n                const currentObjId = (_a = this.getFieldFromDataFieldId(field.id)) === null || _a === void 0 ? void 0 : _a.getValue();\n                const suppliedObjId = dataObj[field.id];\n                dlogger(`is same object id ${suppliedObjId} as current ${currentObjId}`);\n                if ((currentObjId && !suppliedObjId) || (currentObjId && !suppliedObjId)) {\n                    isSameObject = false;\n                }\n                if ((currentObjId && suppliedObjId) && (currentObjId == suppliedObjId)) {\n                    isSameObject = true;\n                }\n                return false;\n            }\n            return true;\n        });\n        return isSameObject;\n    }\n    enableButtons() {\n        if (this.factoryElements && this.uiDef) {\n            if (this.factoryElements.deleteButton) {\n                this.factoryElements.deleteButton.removeAttribute('disabled');\n            }\n            this.factoryElements.cancelButton.removeAttribute('disabled');\n            this.factoryElements.submitButton.removeAttribute('disabled');\n            // @ts-ignore\n            this.factoryElements.submitButton.innerHTML = this.uiDef.submitButton.buttonText;\n        }\n    }\n    disableButtons() {\n        if (this.factoryElements) {\n            if (this.factoryElements.deleteButton) {\n                this.factoryElements.deleteButton.setAttribute('disabled', 'true');\n            }\n            this.factoryElements.cancelButton.setAttribute('disabled', 'true');\n            this.factoryElements.submitButton.setAttribute('disabled', 'true');\n        }\n    }\n    _saveFinishedOrAborted() {\n        dlogger(`save is finished or aborted`);\n        this.enableButtons();\n        this.clearUnsavedMessage();\n    }\n    _saveIsActive() {\n        dlogger(`save is active`);\n        this.disableButtons();\n        if (this.factoryElements && this.uiDef) {\n            if (this.uiDef.activeSave) {\n                dlogger(`save is active ${this.uiDef.activeSave}`);\n                // @ts-ignore\n                this.factoryElements.submitButton.innerHTML = this.uiDef.activeSave + this.uiDef.submitButton.buttonText;\n            }\n        }\n    }\n}\n//# sourceMappingURL=BasicFormImplementation.js.map","export var FormEventType;\n(function (FormEventType) {\n    FormEventType[\"SHOWN\"] = \"shown\";\n    FormEventType[\"HIDDEN\"] = \"hidden\";\n    FormEventType[\"CANCELLING\"] = \"cancelling\";\n    FormEventType[\"CANCELLING_ABORTED\"] = \"cancelling-aborted\";\n    FormEventType[\"CANCELLED\"] = \"cancelled\";\n    FormEventType[\"SAVING\"] = \"saving\";\n    FormEventType[\"SAVE_ABORTED\"] = \"save-aborted\";\n    FormEventType[\"SAVED\"] = \"saved\";\n    FormEventType[\"DELETING\"] = \"deleting\";\n    FormEventType[\"DELETE_ABORTED\"] = \"delete-aborted\";\n    FormEventType[\"DELETED\"] = \"deleted\";\n    FormEventType[\"CREATING\"] = \"creating\";\n    FormEventType[\"MODIFYING\"] = \"modifying\";\n    FormEventType[\"RESETTING\"] = \"reset\";\n})(FormEventType || (FormEventType = {}));\n//# sourceMappingURL=FormListener.js.map","export var UIFieldType;\n(function (UIFieldType) {\n    UIFieldType[UIFieldType[\"checkbox\"] = 0] = \"checkbox\";\n    UIFieldType[UIFieldType[\"email\"] = 1] = \"email\";\n    UIFieldType[UIFieldType[\"hidden\"] = 2] = \"hidden\";\n    UIFieldType[UIFieldType[\"number\"] = 3] = \"number\";\n    UIFieldType[UIFieldType[\"password\"] = 4] = \"password\";\n    UIFieldType[UIFieldType[\"text\"] = 5] = \"text\";\n    UIFieldType[UIFieldType[\"textarea\"] = 6] = \"textarea\";\n    UIFieldType[UIFieldType[\"select\"] = 7] = \"select\";\n    UIFieldType[UIFieldType[\"radioGroup\"] = 8] = \"radioGroup\";\n    UIFieldType[UIFieldType[\"tableData\"] = 9] = \"tableData\";\n})(UIFieldType || (UIFieldType = {}));\nexport const defaultGetValue = (fieldUIConfig, currentValue) => {\n    let result = currentValue;\n    if (fieldUIConfig.renderer) {\n        let value = fieldUIConfig.renderer.renderValue(fieldUIConfig.field, currentValue);\n        if (value)\n            result = value;\n    }\n    return result;\n};\nexport var FormMode;\n(function (FormMode) {\n    FormMode[FormMode[\"unset\"] = -1] = \"unset\";\n    FormMode[FormMode[\"create\"] = 0] = \"create\";\n    FormMode[FormMode[\"update\"] = 1] = \"update\";\n})(FormMode || (FormMode = {}));\nexport const DATA_ID_ATTRIBUTE = 'data-id';\n//# sourceMappingURL=FormUITypeDefs.js.map","export class EditingEventListener {\n    constructor(formId, fieldConfig, listeners) {\n        this.formId = formId;\n        this.fieldConfig = fieldConfig;\n        this.listeners = listeners;\n        this.handleEvent = this.handleEvent.bind(this);\n    }\n    handleEvent(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        // @ts-ignore\n        const fieldElement = event.target;\n        if (this.fieldConfig.editor) {\n            const field = this.fieldConfig.field;\n            const value = fieldElement.value;\n            const newValue = this.fieldConfig.editor.editValue(field, value);\n            if (newValue) {\n                fieldElement.value = newValue;\n                this.listeners.forEach((listener) => listener.valueChanged(this.formId, field, newValue));\n            }\n        }\n    }\n}\n//# sourceMappingURL=EditingEventListener.js.map","export class RenderingEventListener {\n    constructor(formId, fieldConfig, listeners, subElements = null) {\n        this.formId = formId;\n        this.fieldConfig = fieldConfig;\n        this.listeners = listeners;\n        this.subElements = subElements;\n        this.handleEvent = this.handleEvent.bind(this);\n    }\n    processRendering(fieldElement) {\n        let newValue = '';\n        if (this.fieldConfig.renderer) {\n            const field = this.fieldConfig.field;\n            const value = fieldElement.value;\n            if (this.subElements)\n                this.fieldConfig.renderer.setSubElements(this.subElements);\n            newValue = this.fieldConfig.renderer.renderValue(field, value);\n            if (newValue) {\n                fieldElement.value = newValue;\n                // @ts-ignore\n                this.listeners.forEach((listener) => listener.valueChanged(field, newValue));\n            }\n        }\n        if (newValue) {\n            return newValue;\n        }\n        else {\n            return '';\n        }\n    }\n    handleEvent(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        // @ts-ignore\n        const fieldElement = event.target;\n        this.processRendering(fieldElement);\n    }\n}\n//# sourceMappingURL=RenderingEventListener.js.map","import { FieldType } from \"../../../model/DataObjectTypeDefs\";\nimport { UIFieldType } from \"../FormUITypeDefs\";\nimport browserUtil from \"../../../util/BrowserUtil\";\nexport class ValidationEventHandler {\n    constructor(formId, fieldConfig, listeners, subElements = null) {\n        this.formId = formId;\n        this.fieldConfig = fieldConfig;\n        this.listeners = listeners;\n        this.subElements = subElements;\n        this.handleEvent = this.handleEvent.bind(this);\n    }\n    setValidationStatusAndMessage(fieldElement, isValid, value, message = undefined, resetOnFailure = false) {\n        if (this.fieldConfig.validator && fieldElement) {\n            const field = this.fieldConfig.field;\n            let validationElementTarget = fieldElement; // we are providing user feedback on the field element, unless...\n            if (this.subElements) { // sub elements change the validation target\n                this.fieldConfig.validator.validator.setSubElements(this.subElements);\n                if (this.fieldConfig.subElement) { // should be targetting the parentelement\n                    let parentEl = fieldElement.parentElement;\n                    if (parentEl) {\n                        validationElementTarget = parentEl;\n                        if (this.fieldConfig.subElement.container) { // another layer up required\n                            parentEl = parentEl.parentElement;\n                            if (parentEl) {\n                                validationElementTarget = parentEl;\n                            }\n                        }\n                    }\n                }\n            }\n            const errorMessageDiv = document.getElementById(`${this.formId}.field.${this.fieldConfig.field.id}.error`);\n            const errorMessageEl = document.getElementById(`${this.formId}.field.${this.fieldConfig.field.id}.error.message`);\n            // clear any previous message\n            errorMessageDiv === null || errorMessageDiv === void 0 ? void 0 : errorMessageDiv.setAttribute('style', 'display:none');\n            if (errorMessageEl)\n                errorMessageEl.innerHTML = '';\n            if (this.fieldConfig.validator.invalidClasses)\n                browserUtil.addRemoveClasses(validationElementTarget, this.fieldConfig.validator.invalidClasses, false);\n            if (this.fieldConfig.validator.validClasses)\n                browserUtil.addRemoveClasses(validationElementTarget, this.fieldConfig.validator.validClasses);\n            if (!isValid) {\n                if (this.fieldConfig.validator.invalidClasses)\n                    browserUtil.addRemoveClasses(validationElementTarget, this.fieldConfig.validator.invalidClasses);\n                if (this.fieldConfig.validator.validClasses)\n                    browserUtil.addRemoveClasses(validationElementTarget, this.fieldConfig.validator.validClasses, false);\n                if (!message) {\n                    message = `${field.displayName} does not have a valid value.`;\n                }\n                // show the error message\n                errorMessageDiv === null || errorMessageDiv === void 0 ? void 0 : errorMessageDiv.setAttribute('style', 'display:block');\n                if (errorMessageEl)\n                    errorMessageEl.innerHTML = message;\n                if (resetOnFailure) {\n                    switch (field.type) {\n                        case (FieldType.boolean): {\n                            // @ts-ignore\n                            fieldElement.checked = false;\n                            break;\n                        }\n                        case (FieldType.integer): {\n                            // @ts-ignore\n                            fieldElement.value = '0';\n                            break;\n                        }\n                        case (FieldType.float): {\n                            // @ts-ignore\n                            fieldElement.value = '0.0';\n                            break;\n                        }\n                        default: {\n                            // @ts-ignore\n                            fieldElement.value = '';\n                            break;\n                        }\n                    }\n                }\n                // @ts-ignore\n                this.listeners.forEach((listener) => listener.failedValidation(this.formId, field, value, message));\n            }\n        }\n    }\n    processValidation(fieldElement) {\n        if (this.fieldConfig.validator && fieldElement) {\n            const field = this.fieldConfig.field;\n            // @ts-ignore\n            let value = fieldElement.value;\n            // checkboxes store values differently\n            if (this.fieldConfig.elementType === UIFieldType.checkbox) { // @ts-ignore\n                value = '' + fieldElement.checked;\n            }\n            if (this.subElements) {\n                value = '';\n                this.subElements.forEach((subElement) => {\n                    if (subElement.checked) {\n                        value = subElement.value;\n                    }\n                });\n            }\n            const validationResp = this.fieldConfig.validator.validator.isValidValue(field, value);\n            this.setValidationStatusAndMessage(fieldElement, validationResp.isValid, value, validationResp.message, validationResp.resetOnFailure);\n        }\n    }\n    handleEvent(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        // @ts-ignore\n        const fieldElement = event.target;\n        this.processValidation(fieldElement);\n    }\n}\n//# sourceMappingURL=ValidationEventHandler.js.map","import browserUtil from \"../../../util/BrowserUtil\";\nimport { DATA_ID_ATTRIBUTE, UIFieldType } from \"../FormUITypeDefs\";\nimport { ValidationEventHandler } from \"../event-handlers/ValidationEventHandler\";\nimport { EditingEventListener } from \"../event-handlers/EditingEventListener\";\nimport { FieldType } from \"../../../model/DataObjectTypeDefs\";\nclass DefaultFieldOptionsListener {\n    constructor(formId, parentElement, fieldUIConfig) {\n        this.formId = formId;\n        this.parentElement = parentElement;\n        this.fieldUIConfig = fieldUIConfig;\n    }\n    optionsChanged(newOptions) {\n        browserUtil.removeAllChildren(this.parentElement);\n        let subEls = FieldInputElementFactory.createSubElements(this.formId, this.parentElement, this.fieldUIConfig, newOptions);\n    }\n}\nexport class FieldInputElementFactory {\n    constructor() {\n    }\n    static getInstance() {\n        if (!(FieldInputElementFactory._instance)) {\n            FieldInputElementFactory._instance = new FieldInputElementFactory();\n        }\n        return FieldInputElementFactory._instance;\n    }\n    static initialiseFieldElementAndEventHandlers(fieldElement, formId, fieldConfig, listeners, subElements = null) {\n        fieldElement.setAttribute('id', `${formId}.field.${fieldConfig.field.id}`);\n        fieldElement.setAttribute(DATA_ID_ATTRIBUTE, fieldConfig.field.id);\n        fieldElement.setAttribute('name', fieldConfig.field.id);\n        if (fieldConfig.elementAttributes)\n            browserUtil.addAttributes(fieldElement, fieldConfig.elementAttributes);\n        if (fieldConfig.elementClasses)\n            browserUtil.addRemoveClasses(fieldElement, fieldConfig.elementClasses);\n        // readonly field?\n        if (fieldConfig.field.displayOnly) {\n            browserUtil.addAttributes(fieldElement, [{ name: 'disabled', value: 'true' }, {\n                    name: 'readonly',\n                    value: 'true'\n                }]);\n        }\n        /*\n        setup event handlers\n        */\n        if (fieldConfig.validator) { // is the value in the field valid\n            const eventHandler = new ValidationEventHandler(formId, fieldConfig, listeners, subElements);\n            if (subElements) { // event for the subelements\n                subElements.forEach((subElement) => {\n                    subElement.addEventListener('blur', eventHandler);\n                });\n            }\n            else {\n                fieldElement.addEventListener('blur', eventHandler);\n            }\n        }\n        if (fieldConfig.editor) { // render the value when the field gains focus\n            fieldElement.addEventListener('focus', new EditingEventListener(formId, fieldConfig, listeners));\n        } // care for endless loops here, renderer needs to return null if no changes\n        // date picker for date fields\n        if (fieldConfig.field.type === FieldType.date) {\n            $(fieldElement).datepicker();\n            $(fieldElement).datepicker(\"option\", \"dateFormat\", 'dd/mm/yy');\n        }\n    }\n    static createFieldComponentsAndContainer(fieldElement, formId, containerEl, fieldConfig, listeners) {\n        // if the field has a validator, then we need a div for error messages\n        let errorMessageDivEl = null;\n        if (fieldConfig.validator) {\n            errorMessageDivEl = document.createElement('div');\n            errorMessageDivEl.setAttribute('id', `${formId}.field.${fieldConfig.field.id}.error`);\n            errorMessageDivEl.setAttribute('style', 'display: none'); // default to not visible\n            browserUtil.addRemoveClasses(errorMessageDivEl, fieldConfig.validator.messageDisplay.elementClasses);\n            let messageEl = document.createElement(fieldConfig.validator.messageDisplay.elementType);\n            if (messageEl) {\n                messageEl.setAttribute('id', `${formId}.field.${fieldConfig.field.id}.error.message`);\n                if (fieldConfig.validator.messageDisplay.elementAttributes)\n                    browserUtil.addAttributes(messageEl, fieldConfig.validator.messageDisplay.elementAttributes);\n                errorMessageDivEl.appendChild(messageEl);\n            }\n        }\n        // ok, so is the field contained?\n        if (fieldConfig.containedBy) {\n            // we need to create a container for the field and option label and description text\n            let containedByEl = document.createElement(fieldConfig.containedBy.elementType);\n            if (containedByEl) {\n                browserUtil.addRemoveClasses(containedByEl, fieldConfig.containedBy.elementClasses);\n                containedByEl.setAttribute('id', `${formId}.field.${fieldConfig.field.id}.container`);\n                if (fieldConfig.containedBy.elementAttributes)\n                    browserUtil.addAttributes(containerEl, fieldConfig.containedBy.elementAttributes);\n                // do we have a label also?\n                if (fieldConfig.label) {\n                    let labelEl = document.createElement('label');\n                    labelEl.setAttribute('for', `${formId}.field.${fieldConfig.field.id}`);\n                    labelEl.innerHTML = fieldConfig.field.displayName;\n                    if (fieldConfig.label.attributes)\n                        browserUtil.addAttributes(labelEl, fieldConfig.label.attributes);\n                    if (fieldConfig.label.classes)\n                        browserUtil.addRemoveClasses(labelEl, fieldConfig.label.classes);\n                    containedByEl.appendChild(labelEl);\n                }\n                if (fieldConfig.describedBy) {\n                    let descEl = document.createElement(fieldConfig.describedBy.elementType);\n                    if (descEl) {\n                        // link the field and the description\n                        descEl.setAttribute('id', `${formId}.field.${fieldConfig.field.id}.desc`);\n                        if (fieldConfig.field.description)\n                            descEl.innerHTML = fieldConfig.field.description;\n                        fieldElement.setAttribute('aria-describedby', `${formId}.field.${fieldConfig.field.id}.desc`);\n                        if (fieldConfig.describedBy.elementClasses)\n                            browserUtil.addRemoveClasses(descEl, fieldConfig.describedBy.elementClasses);\n                        containedByEl.appendChild(fieldElement);\n                        containedByEl.appendChild(descEl);\n                        if (errorMessageDivEl)\n                            containedByEl.appendChild(errorMessageDivEl);\n                    }\n                    else { // description failure, add the field\n                        containedByEl.appendChild(fieldElement);\n                        if (errorMessageDivEl)\n                            containedByEl.appendChild(errorMessageDivEl);\n                    }\n                }\n                else { // no description, add field to container\n                    containedByEl.appendChild(fieldElement);\n                    if (errorMessageDivEl)\n                        containedByEl.appendChild(errorMessageDivEl);\n                }\n                containerEl.appendChild(containedByEl);\n            }\n            else { // errors should keep making something!\n                containerEl.appendChild(fieldElement);\n                if (errorMessageDivEl)\n                    containerEl.appendChild(errorMessageDivEl);\n            }\n        }\n        else {\n            containerEl.appendChild(fieldElement);\n            if (errorMessageDivEl)\n                containerEl.appendChild(errorMessageDivEl);\n        }\n    }\n    static createSubElements(formId, parentEl, fieldConfig, valueOptions) {\n        let results = [];\n        valueOptions.forEach((valueOption, index) => {\n            if (fieldConfig.subElement) {\n                let containerEl = parentEl;\n                // is there a container?\n                if (fieldConfig.subElement.container) {\n                    containerEl = document.createElement(fieldConfig.subElement.container.elementType);\n                    browserUtil.addRemoveClasses(containerEl, fieldConfig.subElement.container.elementClasses);\n                    if (fieldConfig.subElement.container.elementAttributes)\n                        browserUtil.addAttributes(containerEl, fieldConfig.subElement.container.elementAttributes);\n                    parentEl.appendChild(containerEl);\n                }\n                let valueEl = document.createElement(fieldConfig.subElement.element.elementType);\n                valueEl.setAttribute('value', valueOption.value);\n                valueEl.setAttribute('id', `${formId}.field.${fieldConfig.field.id}.${index}`);\n                valueEl.setAttribute('name', `${formId}.field.${fieldConfig.field.id}`);\n                browserUtil.addRemoveClasses(valueEl, fieldConfig.subElement.element.elementClasses);\n                if (fieldConfig.subElement.element.elementAttributes)\n                    browserUtil.addAttributes(valueEl, fieldConfig.subElement.element.elementAttributes);\n                containerEl.appendChild(valueEl);\n                if (fieldConfig.subElement.label) {\n                    let labelEl = document.createElement('label');\n                    if (fieldConfig.subElement.label.classes)\n                        browserUtil.addRemoveClasses(labelEl, fieldConfig.subElement.label.classes);\n                    if (fieldConfig.subElement.label.attributes)\n                        browserUtil.addAttributes(labelEl, fieldConfig.subElement.label.attributes);\n                    labelEl.innerHTML = valueOption.name;\n                    containerEl.appendChild(labelEl);\n                }\n                else {\n                    valueEl.innerHTML = valueOption.name;\n                }\n                results.push(valueEl);\n            }\n        });\n        return results;\n    }\n    createInputFormFieldComponentElement(formId, containerEl, fieldConfig, listeners) {\n        let fieldElement = document.createElement('input');\n        switch (fieldConfig.elementType) {\n            case UIFieldType.checkbox: {\n                fieldElement.setAttribute('type', 'checkbox');\n                fieldElement.setAttribute('value', fieldConfig.field.id);\n                break;\n            }\n            case UIFieldType.email: {\n                fieldElement.setAttribute('type', 'email');\n                break;\n            }\n            case UIFieldType.hidden: {\n                fieldElement.setAttribute('type', 'hidden');\n                break;\n            }\n            case UIFieldType.number: {\n                fieldElement.setAttribute('type', 'number');\n                break;\n            }\n            case UIFieldType.password: {\n                fieldElement.setAttribute('type', 'password');\n                break;\n            }\n            case UIFieldType.text: {\n                fieldElement.setAttribute('type', 'text');\n                break;\n            }\n        }\n        FieldInputElementFactory.initialiseFieldElementAndEventHandlers(fieldElement, formId, fieldConfig, listeners);\n        FieldInputElementFactory.createFieldComponentsAndContainer(fieldElement, formId, containerEl, fieldConfig, listeners);\n        return fieldElement;\n    }\n    createTAFormFieldComponentElement(formId, containerEl, fieldConfig, listeners) {\n        let fieldElement = document.createElement('textarea');\n        if (fieldConfig.textarea) {\n            fieldElement.setAttribute('rows', `${fieldConfig.textarea.rows}`);\n            fieldElement.setAttribute('cols', `${fieldConfig.textarea.cols}`);\n        }\n        FieldInputElementFactory.initialiseFieldElementAndEventHandlers(fieldElement, formId, fieldConfig, listeners);\n        FieldInputElementFactory.createFieldComponentsAndContainer(fieldElement, formId, containerEl, fieldConfig, listeners);\n        return fieldElement;\n    }\n    createSelectFormFieldComponentElement(formId, containerEl, fieldConfig, listeners) {\n        let fieldElement = document.createElement('select');\n        // create the options from the data source\n        if (fieldConfig.datasource) {\n            FieldInputElementFactory.createSubElements(formId, fieldElement, fieldConfig, fieldConfig.datasource.getOptions());\n            // listen for data source changes\n            fieldConfig.datasource.addListener(new DefaultFieldOptionsListener(formId, fieldElement, fieldConfig));\n        }\n        FieldInputElementFactory.initialiseFieldElementAndEventHandlers(fieldElement, formId, fieldConfig, listeners);\n        FieldInputElementFactory.createFieldComponentsAndContainer(fieldElement, formId, containerEl, fieldConfig, listeners);\n        return fieldElement;\n    }\n    createRadioGroupFormFieldComponentElement(formId, containerEl, fieldConfig, listeners) {\n        // create a div for each option in the source\n        // create the div for the radio group\n        let radioGroupElement = document.createElement('div');\n        if (fieldConfig.elementAttributes)\n            browserUtil.addAttributes(radioGroupElement, fieldConfig.elementAttributes);\n        if (fieldConfig.elementClasses)\n            browserUtil.addRemoveClasses(radioGroupElement, fieldConfig.elementClasses);\n        let subElements = [];\n        // create the options from the data source\n        if (fieldConfig.datasource) {\n            // we should get the radio buttons back\n            subElements = FieldInputElementFactory.createSubElements(formId, radioGroupElement, fieldConfig, fieldConfig.datasource.getOptions());\n            // listen for data source changes\n            fieldConfig.datasource.addListener(new DefaultFieldOptionsListener(formId, radioGroupElement, fieldConfig));\n            // setup the subelements for the validator, formatter, and renderer\n            if (fieldConfig.validator)\n                fieldConfig.validator.validator.setSubElements(subElements);\n            if (fieldConfig.renderer)\n                fieldConfig.renderer.setSubElements(subElements);\n            if (fieldConfig.formatter)\n                fieldConfig.formatter.setSubElements(subElements);\n        }\n        FieldInputElementFactory.initialiseFieldElementAndEventHandlers(radioGroupElement, formId, fieldConfig, listeners, subElements);\n        FieldInputElementFactory.createFieldComponentsAndContainer(radioGroupElement, formId, containerEl, fieldConfig, listeners);\n        return {\n            container: radioGroupElement,\n            radioButtons: subElements\n        };\n    }\n}\n//# sourceMappingURL=FieldInputElementFactory.js.map","import browserUtil from \"../../../util/BrowserUtil\";\nimport { FieldInputElementFactory } from \"./FieldInputElementFactory\";\nimport { UIFieldType } from \"../FormUITypeDefs\";\nimport { FormEventType } from \"../FormListener\";\nexport class FormElementFactory {\n    constructor() {\n    }\n    static getInstance() {\n        if (!(FormElementFactory._instance)) {\n            FormElementFactory._instance = new FormElementFactory();\n        }\n        return FormElementFactory._instance;\n    }\n    createFormElements(form, formListeners, formConfig, fieldListeners) {\n        let formEl = document.createElement('form');\n        formEl.setAttribute('id', formConfig.id);\n        formEl.setAttribute('name', formConfig.displayName);\n        if (formConfig.classes)\n            browserUtil.addRemoveClasses(formEl, formConfig.classes);\n        // create each of the fields and collect them\n        let formInputElements = [];\n        let formTAElements = [];\n        let formRBGElements = [];\n        let formSelectElements = [];\n        let unsavedMessage = document.createElement(formConfig.unsavedChanges.elementType);\n        browserUtil.addRemoveClasses(unsavedMessage, formConfig.unsavedChanges.elementClasses);\n        if (formConfig.unsavedChanges.elementAttributes)\n            browserUtil.addAttributes(unsavedMessage, formConfig.unsavedChanges.elementAttributes);\n        formEl.appendChild(unsavedMessage);\n        formConfig.fieldGroups.forEach((group) => {\n            // if the group has a container make that, otherwise the form is the container\n            let containerEl = formEl;\n            if (group.containedBy) {\n                // @ts-ignore\n                containerEl = document.createElement(group.containedBy.elementType);\n                if (containerEl) {\n                    if (group.containedBy.elementAttributes)\n                        browserUtil.addAttributes(containerEl, group.containedBy.elementAttributes);\n                    if (group.containedBy.elementClasses)\n                        browserUtil.addRemoveClasses(containerEl, group.containedBy.elementClasses);\n                    formEl.appendChild(containerEl);\n                }\n            }\n            group.fields.forEach((field) => {\n                switch (field.elementType) {\n                    case (UIFieldType.textarea): {\n                        const fieldEl = FieldInputElementFactory.getInstance().createTAFormFieldComponentElement(formConfig.id, containerEl, field, fieldListeners);\n                        formTAElements.push(fieldEl);\n                        break;\n                    }\n                    case (UIFieldType.select): {\n                        const fieldEl = FieldInputElementFactory.getInstance().createSelectFormFieldComponentElement(formConfig.id, containerEl, field, fieldListeners);\n                        formSelectElements.push(fieldEl);\n                        break;\n                    }\n                    case (UIFieldType.radioGroup): {\n                        const fieldEl = FieldInputElementFactory.getInstance().createRadioGroupFormFieldComponentElement(formConfig.id, containerEl, field, fieldListeners);\n                        formRBGElements.push(fieldEl);\n                        break;\n                    }\n                    default: {\n                        const fieldEl = FieldInputElementFactory.getInstance().createInputFormFieldComponentElement(formConfig.id, containerEl, field, fieldListeners);\n                        formInputElements.push(fieldEl);\n                    }\n                }\n            });\n        });\n        /* setup the buttons */\n        let buttonContainer = formEl;\n        if (formConfig.buttonsContainedBy) {\n            buttonContainer = document.createElement(formConfig.buttonsContainedBy.elementType);\n            if (buttonContainer) {\n                if (formConfig.buttonsContainedBy.elementAttributes)\n                    browserUtil.addAttributes(buttonContainer, formConfig.buttonsContainedBy.elementAttributes);\n                browserUtil.addRemoveClasses(buttonContainer, formConfig.buttonsContainedBy.elementClasses);\n                formEl.appendChild(buttonContainer);\n            }\n            else {\n                buttonContainer = formEl; // couldn't create the button container, use the form\n            }\n        }\n        let deleteButtonEl = undefined;\n        if (formConfig.deleteButton) {\n            deleteButtonEl = this.createFormButton(form, formConfig, formListeners, formConfig.deleteButton, FormEventType.DELETING);\n            buttonContainer.appendChild(deleteButtonEl);\n        }\n        let cancelButtonEl = this.createFormButton(form, formConfig, formListeners, formConfig.cancelButton, FormEventType.CANCELLING);\n        buttonContainer.appendChild(cancelButtonEl);\n        let submitButtonEl = this.createFormButton(form, formConfig, formListeners, formConfig.submitButton, FormEventType.SAVING);\n        buttonContainer.appendChild(submitButtonEl);\n        let result = {\n            form: formEl,\n            unsavedMessage: unsavedMessage,\n            fields: formInputElements,\n            selectFields: formSelectElements,\n            radioButtonGroups: formRBGElements,\n            textFields: formTAElements,\n            deleteButton: deleteButtonEl,\n            cancelButton: cancelButtonEl,\n            submitButton: submitButtonEl\n        };\n        return result;\n    }\n    createFormButton(form, formConfig, formListeners, buttonDef, eventType) {\n        let buttonEl = document.createElement('button');\n        browserUtil.addRemoveClasses(buttonEl, buttonDef.buttonClasses);\n        buttonEl.setAttribute('id', `${formConfig.id}.${eventType}`);\n        if (buttonDef.buttonText) {\n            buttonEl.innerText = buttonDef.buttonText;\n        }\n        if (buttonDef.iconClasses) {\n            let iconEl = document.createElement('i');\n            if (iconEl) {\n                browserUtil.addRemoveClasses(iconEl, buttonDef.iconClasses);\n                buttonEl.appendChild(iconEl);\n            }\n        }\n        /* setup the event handler for the button */\n        buttonEl.addEventListener('click', (event) => {\n            event.preventDefault();\n            event.stopPropagation();\n            let formEvent = {\n                target: form,\n                formId: formConfig.id,\n                eventType: eventType\n            };\n            formListeners.forEach((listener) => listener.formChanged(formEvent));\n        });\n        return buttonEl;\n    }\n}\n//# sourceMappingURL=FormElementFactory.js.map","import { UIFieldType } from \"../FormUITypeDefs\";\nimport { FieldType } from \"../../../model/DataObjectTypeDefs\";\nimport { ValidationEventHandler } from \"../event-handlers/ValidationEventHandler\";\nimport { RenderingEventListener } from \"../event-handlers/RenderingEventListener\";\nimport debug from 'debug';\nconst logger = debug('abstract-field');\nexport class AbstractField {\n    constructor(formId, config, fieldDef, element, subElements = null) {\n        this.config = null;\n        this.subElements = [];\n        this.listeners = [];\n        this.hidden = false;\n        this.formId = formId;\n        this.config = config;\n        this.definition = fieldDef;\n        this.element = element;\n        if (subElements)\n            this.subElements = subElements;\n        this.validationHandler = new ValidationEventHandler(formId, config, [this], subElements);\n        this.renderingHandler = new RenderingEventListener(formId, config, [this], subElements);\n        // listen for our own change events\n        this.handleChangeEvent = this.handleChangeEvent.bind(this);\n        if (this.subElements) {\n            this.subElements.forEach((subElement) => {\n                subElement.addEventListener('change', this.handleChangeEvent);\n            });\n        }\n        else {\n            this.element.addEventListener('change', this.handleChangeEvent);\n        }\n    }\n    isHidden() {\n        return this.hidden;\n    }\n    addFieldListener(listener) {\n        logger(`${this.getName()} - adding listener ${listener.getName()}`);\n        // don't duplicate listeners\n        let index = this.listeners.findIndex((listenerInList) => listenerInList.getName() === listener.getName());\n        if (index < 0) {\n            this.listeners.push(listener);\n        }\n        else {\n            logger(`${this.getName()} - duplicate listener ${listener.getName()} ignored`);\n        }\n    }\n    getFieldDefinition() {\n        return this.definition;\n    }\n    setInvalid(message) {\n        this.validationHandler.setValidationStatusAndMessage(this.element, false, '', message, false);\n        // @ts-ignore\n        this.listeners.forEach((listener) => listener.failedValidation(this.formId, this.definition, this.getValue(), message));\n    }\n    initialise() {\n    }\n    getValue() {\n        let result = null;\n        if (this.config && this.element) {\n            switch (this.config.elementType) {\n                case (UIFieldType.radioGroup): {\n                    logger(`${this.definition.id} - getting value - rbg`);\n                    if (this.subElements) {\n                        this.subElements.forEach((subElement) => {\n                            if (subElement.checked) {\n                                logger(`${this.definition.id} - getting value - rbg - checked ${subElement.value}`);\n                                result = subElement.value;\n                                subElement.checked = true;\n                            }\n                        });\n                    }\n                    break;\n                }\n                case (UIFieldType.checkbox): {\n                    // @ts-ignore\n                    result = '' + this.element.checked;\n                    break;\n                }\n                default: {\n                    // @ts-ignore\n                    result = this.element.value;\n                    break;\n                }\n            }\n        }\n        logger(`${this.definition.id} - getting value - ${result}`);\n        return result;\n    }\n    getFormattedValue() {\n        let result = null;\n        if (this.config && this.element) {\n            // @ts-ignore\n            result = this.element.value;\n            if (this.config.elementType === UIFieldType.checkbox) { // @ts-ignore\n                result = '' + this.element.checked;\n            }\n            if (this.config.formatter) {\n                result = this.config.formatter.formatValue(this.definition, result);\n            }\n        }\n        return result;\n    }\n    isValid() {\n        let result = true;\n        if (this.config && this.element) {\n            if (this.config.validator) {\n                if (this.config.validator.validator) {\n                    const validator = this.config.validator.validator;\n                    const response = validator.isValidValue(this.definition, this.getValue());\n                    result = response.isValid;\n                }\n            }\n        }\n        return result;\n    }\n    getId() {\n        return this.definition.id;\n    }\n    setValue(newValue) {\n        newValue = '' + newValue;\n        if (this.element && this.config) {\n            // @ts-ignore\n            switch (this.config.elementType) {\n                case (UIFieldType.radioGroup): {\n                    if (this.subElements) {\n                        this.subElements.forEach((subElement) => {\n                            if (subElement.value === newValue) {\n                                subElement.checked = true;\n                            }\n                        });\n                    }\n                    break;\n                }\n                case (UIFieldType.checkbox): {\n                    // @ts-ignore\n                    this.element.checked = (newValue.toLowerCase() === 'true');\n                    break;\n                }\n                case (UIFieldType.select): {\n                    logger(`${this.definition.id} - setting value - ${newValue}`);\n                    const selectEl = this.element;\n                    let selectedIndex = -1;\n                    for (let index = 0; index < selectEl.options.length; index++) {\n                        // @ts-ignore\n                        const option = selectEl.options.item(index);\n                        logger(`${this.definition.id} - option value - ${option.value}`);\n                        if (option.value === newValue) {\n                            logger(`${this.definition.id} - option value - ${option.value} - SELECTED`);\n                            option.selected = true;\n                            selectedIndex = index;\n                        }\n                    }\n                    logger(`${this.definition.id} - selected index ${selectedIndex}`);\n                    selectEl.selectedIndex = selectedIndex;\n                    break;\n                }\n                default: {\n                    logger(`${this.definition.id} - setting value - ${newValue}`);\n                    // @ts-ignore\n                    this.element.value = newValue;\n                    break;\n                }\n            }\n        }\n    }\n    reset() {\n        if (this.element) {\n            switch (this.definition.type) {\n                case (FieldType.boolean): {\n                    // @ts-ignore\n                    this.element.checked = false;\n                    break;\n                }\n                case (FieldType.integer): {\n                    // @ts-ignore\n                    this.element.value = '0';\n                    break;\n                }\n                case (FieldType.float): {\n                    // @ts-ignore\n                    this.element.value = '0.0';\n                    break;\n                }\n                case (FieldType.limitedChoice): {\n                    if (this.subElements) {\n                        this.subElements.forEach((subElement) => {\n                            subElement.checked = false;\n                        });\n                    }\n                    break;\n                }\n                default: {\n                    // @ts-ignore\n                    this.element.value = '';\n                    break;\n                }\n            }\n        }\n        this.show();\n    }\n    clearValue() {\n        this.reset();\n    }\n    validate() {\n        if (this.element) {\n            this.validationHandler.processValidation(this.element);\n        }\n    }\n    render(currentValue) {\n        var _a;\n        let result = currentValue;\n        if ((_a = this.config) === null || _a === void 0 ? void 0 : _a.renderer) {\n            let value = this.config.renderer.renderValue(this.definition, currentValue);\n            if (value)\n                result = value;\n        }\n        return result;\n    }\n    failedValidation(formId, field, currentValue, message) {\n    }\n    valueChanged(formId, field, newValue) {\n    }\n    getName() {\n        return this.definition.displayName;\n    }\n    hide() {\n        /*\n          if we have an enclosing container (per the config) then we can hide\n          otherwise we become readonly and disabled\n         */\n        if (this.config) {\n            if (this.config.containedBy) {\n                const parentEl = this.element.parentElement;\n                if (parentEl) {\n                    parentEl.setAttribute('style', 'display:none');\n                }\n            }\n            else {\n                this.setReadOnly();\n            }\n        }\n        this.hidden = true;\n    }\n    setValid() {\n        this.validationHandler.setValidationStatusAndMessage(this.element, true, '');\n    }\n    show() {\n        /*\n          if we have an enclosing container (per the config) then we can hide\n          otherwise we become readonly and disabled\n         */\n        if (this.config) {\n            if (this.config.containedBy) {\n                const parentEl = this.element.parentElement;\n                if (parentEl) {\n                    parentEl.removeAttribute('style');\n                }\n            }\n            else {\n                this.clearReadOnly();\n            }\n        }\n        this.hidden = true;\n    }\n    clearReadOnly() {\n        if (this.definition.displayOnly)\n            return;\n        this.element.removeAttribute('readonly');\n        this.element.removeAttribute('disabled');\n        // do the same for subelements\n        if (this.subElements) {\n            this.subElements.forEach((subElement) => {\n                subElement.removeAttribute('readonly');\n                subElement.removeAttribute('disabled');\n            });\n        }\n    }\n    setReadOnly() {\n        this.element.setAttribute('readonly', 'true');\n        this.element.setAttribute('disabled', 'true');\n        // do the same for subelements\n        if (this.subElements) {\n            this.subElements.forEach((subElement) => {\n                subElement.setAttribute('readonly', 'true');\n                subElement.setAttribute('disabled', 'true');\n            });\n        }\n    }\n    handleChangeEvent(event) {\n        logger(`Handling change event`);\n        if (this.config) {\n            let value = this.getValue();\n            logger(`Handling change event - informing listeners`);\n            this.listeners.forEach((listener) => listener.valueChanged(this.formId, this.definition, value));\n        }\n    }\n}\n//# sourceMappingURL=AbstractField.js.map","import { AbstractField } from \"./AbstractField\";\nexport class InputField extends AbstractField {\n    constructor(formId, config, fieldDef, element) {\n        super(formId, config, fieldDef, element);\n    }\n}\n//# sourceMappingURL=InputField.js.map","import { AbstractField } from \"./AbstractField\";\nexport class RadioButtonGroupField extends AbstractField {\n    constructor(formId, config, fieldDef, element, subElements) {\n        super(formId, config, fieldDef, element, subElements);\n    }\n}\n//# sourceMappingURL=RadioButtonGroupField.js.map","import { AbstractField } from \"./AbstractField\";\nexport class SelectField extends AbstractField {\n    constructor(formId, config, fieldDef, element) {\n        super(formId, config, fieldDef, element);\n    }\n}\n//# sourceMappingURL=SelectField.js.map","import { AbstractField } from \"./AbstractField\";\nexport class TextAreaField extends AbstractField {\n    constructor(formId, config, fieldDef, element) {\n        super(formId, config, fieldDef, element);\n    }\n}\n//# sourceMappingURL=TextAreaField.js.map","import { ConditionResponse } from \"./ValidationTypeDefs\";\nimport debug from 'debug';\nimport { FieldType } from \"../../../model/DataObjectTypeDefs\";\nimport { ComparisonType } from \"../../../CommonTypes\";\nconst logger = debug('validation-manager');\nconst flogger = debug('validation-manager-rule-failure');\nexport class ValidationManager {\n    constructor() {\n        this.formRules = [];\n    }\n    static getInstance() {\n        if (!(ValidationManager._instance)) {\n            ValidationManager._instance = new ValidationManager();\n        }\n        return ValidationManager._instance;\n    }\n    getName() {\n        return \"Validation Manager\";\n    }\n    addRuleToForm(form, rule) {\n        logger(`Adding rule on form ${form.getId()} for target field ${rule.targetDataFieldId}`);\n        /*\n         validate the rule\n         1. does the rule have a comparison field or static for each condition?\n         2. do the fields exist?\n         3. are the comparisons valid types to compare?\n        */\n        let targetField = form.getFieldFromDataFieldId(rule.targetDataFieldId);\n        if (!targetField) {\n            flogger(`Rule not added for form ${form.getId()} for target field ${rule.targetDataFieldId} - NOT FOUND in form`);\n            return false;\n        }\n        let convertedRule = {\n            targetField: targetField,\n            response: rule.response,\n            fieldConditions: [],\n            valueConditions: []\n        };\n        rule.conditions.forEach((condition) => {\n            // do we have one of values or source field?\n            if (!(condition.values) && !(condition.sourceDataFieldId)) {\n                flogger(`Rule not added for form ${form.getId()} for target field ${rule.targetDataFieldId} - a condition is missing both values and source field`);\n                return false;\n            }\n            // is this a target field value comparison?\n            if ((condition.values) && (condition.sourceDataFieldId)) {\n                logger(`Rule adding for form ${form.getId()} for target field ${rule.targetDataFieldId} - source field ${condition.sourceDataFieldId} with values ${condition.values}`);\n                let sourceField = form.getFieldFromDataFieldId(condition.sourceDataFieldId);\n                if (!sourceField) {\n                    flogger(`Rule not added for form ${form.getId()} for target field ${rule.targetDataFieldId} - source field ${condition.sourceDataFieldId} NOT FOUND`);\n                    return false;\n                }\n                convertedRule.fieldConditions.push({\n                    sourceField: sourceField,\n                    comparison: condition.comparison,\n                    values: condition.values\n                });\n                sourceField.addFieldListener(this);\n            }\n            else if ((condition.values) && !(condition.sourceDataFieldId)) { // is this a value comparison?\n                logger(`Rule adding for form ${form.getId()} for target field ${rule.targetDataFieldId} - values ${condition.values}`);\n                // add a new value rule to the internal structure\n                convertedRule.valueConditions.push({ values: condition.values, comparison: condition.comparison });\n                // @ts-ignore\n                targetField.addFieldListener(this);\n            }\n            else if ((condition.sourceDataFieldId) && (!condition.values)) { // is this a field vs field comparison\n                logger(`Rule adding for form ${form.getId()} for target field ${rule.targetDataFieldId} - source field ${condition.sourceDataFieldId}`);\n                let sourceField = form.getFieldFromDataFieldId(condition.sourceDataFieldId);\n                if (!sourceField) {\n                    flogger(`Rule not added for form ${form.getId()} for target field ${rule.targetDataFieldId} - source field ${condition.sourceDataFieldId} NOT FOUND`);\n                    return false;\n                }\n                /*\n                   are we comparing two fields that can be compared?\n                   allowed combinations are:\n                   date|datetime vs date|datetime\n                   time|short time vs time|short time\n                   boolean vs boolean\n                   integer|float vs number|float\n                   any other vs any other\n                 */\n                let sourceType = sourceField.getFieldDefinition().type;\n                // @ts-ignore\n                let targetType = targetField.getFieldDefinition().type;\n                switch (targetType) {\n                    case (FieldType.date):\n                    case (FieldType.datetime): {\n                        if ((sourceType !== FieldType.datetime) &&\n                            (sourceType !== FieldType.date)) {\n                            flogger(`Rule not added for form ${form.getId()} for target field ${rule.targetDataFieldId} - target is date(time), source is NOT`);\n                            return false;\n                        }\n                        break;\n                    }\n                    case (FieldType.time):\n                    case (FieldType.shortTime): {\n                        if ((sourceType !== FieldType.time) &&\n                            (sourceType !== FieldType.shortTime)) {\n                            flogger(`Rule not added for form ${form.getId()} for target field ${rule.targetDataFieldId} - target is time, source is NOT`);\n                            return false;\n                        }\n                        break;\n                    }\n                    case (FieldType.boolean): {\n                        if ((sourceType !== FieldType.boolean)) {\n                            flogger(`Rule not added for form ${form.getId()} for target field ${rule.targetDataFieldId} - target is boolean, source is NOT`);\n                            return false;\n                        }\n                        break;\n                    }\n                    case (FieldType.integer):\n                    case (FieldType.float): {\n                        if ((sourceType !== FieldType.integer) &&\n                            (sourceType !== FieldType.float)) {\n                            flogger(`Rule not added for form ${form.getId()} for target field ${rule.targetDataFieldId} - target is number, source is NOT`);\n                            return false;\n                        }\n                        break;\n                    }\n                }\n                convertedRule.fieldConditions.push({ sourceField: sourceField, comparison: condition.comparison });\n                sourceField.addFieldListener(this);\n            }\n        });\n        logger(`Converted rule to `);\n        logger(convertedRule);\n        let index = this.formRules.findIndex((formRule) => formRule.form.getId() === form.getId());\n        let formRuleSet;\n        // store the rules for later execution\n        if (index < 0) {\n            formRuleSet = {\n                form: form,\n                rules: []\n            };\n            formRuleSet.rules.push(convertedRule);\n            this.formRules.push(formRuleSet);\n        }\n        else {\n            formRuleSet = this.formRules[index];\n            formRuleSet.rules.push(convertedRule);\n        }\n        logger(`Current set of rules for form ${form.getId()}`);\n        logger(formRuleSet);\n        return true;\n    }\n    failedValidation(formId, field, currentValue, message) {\n    } // ignored, we might be causing\n    applyRulesToTargetField(formId, field, onlyRulesOfType) {\n        logger(`Checking rules for form ${formId}, data field ${field.id} of type ${onlyRulesOfType}`);\n        // which rules apply?\n        let rules = this.getRulesForFieldChange(formId, field.id, false);\n        let result = {\n            ruleFailed: false\n        };\n        // get the rules for the field, filtered by the condition response type\n        if (onlyRulesOfType) {\n            let ruleSubset = [];\n            rules.forEach((rule) => {\n                if (rule.response === onlyRulesOfType) {\n                    ruleSubset.push(rule);\n                }\n            });\n            rules = ruleSubset;\n        }\n        rules.forEach((rule) => {\n            let response = this.executeRule(rule);\n            if (response.ruleFailed) {\n                flogger(`Rule failed for form ${formId} with field ${field.displayName} with message ${response.message}`);\n                result.ruleFailed = true;\n                result.message = response.message;\n            }\n        });\n        return result;\n    }\n    valueChanged(formId, field, newValue) {\n        logger(`Handling field change - form ${formId}, data field ${field.id}, value ${newValue}`);\n        // a field we are listening to has changed\n        // which rules apply?\n        const rules = this.getRulesForFieldChange(formId, field.id, true);\n        // execute each rule and collect the responses\n        let failedResponses = [];\n        rules.forEach((rule) => {\n            let response = this.executeRule(rule);\n            if (response.ruleFailed) {\n                failedResponses.push(response);\n            }\n        });\n        logger(`Have ${failedResponses.length} failed rules - applying each`);\n        // for each failed response let the target field know based on the response type\n        failedResponses.forEach((response) => {\n            switch (response.response) {\n                case ConditionResponse.hide: {\n                    logger(`Apply hide ${response.field.getId()}`);\n                    response.field.hide();\n                    break;\n                }\n                case ConditionResponse.show: {\n                    logger(`Apply show ${response.field.getId()}`);\n                    response.field.show();\n                    break;\n                }\n                case ConditionResponse.invalid: {\n                    logger(`Apply invalid ${response.field.getId()}`);\n                    if (response.message)\n                        response.field.setInvalid(response.message);\n                    break;\n                }\n                case ConditionResponse.valid: {\n                    logger(`Apply valid ${response.field.getId()}`);\n                    response.field.setValid();\n                    break;\n                }\n            }\n        });\n    }\n    areTwoFieldsEqual(targetField, sourceField) {\n        if (targetField.getValue() !== sourceField.getValue()) {\n            return {\n                ruleFailed: true,\n                message: `${targetField.getName()} must be equal to ${sourceField.getName()}`,\n            };\n        }\n        return { ruleFailed: false };\n    }\n    compareTwoValuesWithTypes(targetType, targetValue, sourceType, sourceValue, comparison) {\n        if (!(targetValue) || !(sourceValue))\n            return false; // no null comparisons\n        switch (targetType) {\n            case (FieldType.date): {\n                targetValue += ' 00:00:00';\n                if (sourceType === FieldType.date) {\n                    sourceValue += ' 00:00:00';\n                }\n                break;\n            }\n            case (FieldType.datetime): {\n                if (sourceType === FieldType.date) {\n                    sourceValue += ' 00:00:00';\n                }\n                break;\n            }\n            case (FieldType.time): {\n                if (sourceType === FieldType.shortTime) {\n                    sourceValue += ':00';\n                }\n                break;\n            }\n            case (FieldType.shortTime): {\n                targetValue += ':00';\n                if (sourceType === FieldType.shortTime) {\n                    sourceValue += ':00';\n                }\n                break;\n            }\n        }\n        logger(`Comparing ${targetValue} of type ${targetType} against ${sourceValue} of type ${sourceType}`);\n        switch (comparison) {\n            case ComparisonType.lessThan: {\n                return (targetValue < sourceValue);\n            }\n            case ComparisonType.lessThanEqual: {\n                return (targetValue <= sourceValue);\n            }\n            case ComparisonType.greaterThanEqual: {\n                return (targetValue >= sourceValue);\n            }\n            case ComparisonType.greaterThan: {\n                return (targetValue > sourceValue);\n            }\n            case ComparisonType.equals: {\n                return (targetValue === sourceValue);\n            }\n        }\n        return false;\n    }\n    isTargetLessThanSource(targetField, sourceField) {\n        let sourceType = sourceField.getFieldDefinition().type;\n        let targetType = targetField.getFieldDefinition().type;\n        let sourceValue = sourceField.getValue();\n        let targetValue = targetField.getValue();\n        if (!this.compareTwoValuesWithTypes(targetType, targetValue, sourceType, sourceValue, ComparisonType.lessThan)) {\n            return {\n                ruleFailed: true,\n                message: `${targetField.getName()} must be less than ${sourceField.getName()}`,\n            };\n        }\n        return { ruleFailed: false };\n    }\n    isTargetLessThanEqualSource(targetField, sourceField) {\n        let check = this.areTwoFieldsEqual(targetField, sourceField);\n        if (check.ruleFailed) {\n            check = this.isTargetLessThanSource(targetField, sourceField);\n            if (check.ruleFailed) {\n                return {\n                    ruleFailed: true,\n                    message: `${targetField.getName()} must be less than or equal to ${sourceField.getName()}`,\n                };\n            }\n        }\n        return { ruleFailed: false };\n    }\n    isTargetGreaterThan(targetField, sourceField) {\n        let sourceType = sourceField.getFieldDefinition().type;\n        let targetType = targetField.getFieldDefinition().type;\n        let sourceValue = sourceField.getValue();\n        let targetValue = targetField.getValue();\n        if (!this.compareTwoValuesWithTypes(targetType, targetValue, sourceType, sourceValue, ComparisonType.greaterThan)) {\n            return {\n                ruleFailed: true,\n                message: `${targetField.getName()} must be greater than ${sourceField.getName()}`,\n            };\n        }\n        return { ruleFailed: false };\n    }\n    isSourceNull(sourceField) {\n        let targetValue = sourceField.getValue();\n        // @ts-ignore\n        if ((targetValue) && (targetValue.trim().length > 0)) {\n            return {\n                ruleFailed: true,\n                message: `${sourceField.getName()} must be empty`,\n            };\n        }\n        return { ruleFailed: false };\n    }\n    isSourceNotNull(sourceField) {\n        let targetValue = sourceField.getValue();\n        // @ts-ignore\n        if ((!targetValue) || (targetValue.trim().length > 0)) {\n            return {\n                ruleFailed: true,\n                message: `${sourceField.getName()} must not be empty`,\n            };\n        }\n        return { ruleFailed: false };\n    }\n    doesFieldHaveValue(field, values) {\n        let targetValue = field.getValue();\n        logger(`does field ${field.getId()} have value from ${values} - current value is ${targetValue}`);\n        if (targetValue) {\n            // split the values by commas\n            let splits = values.split(',');\n            let foundInValue = false;\n            splits.forEach((split) => {\n                if (targetValue === split) {\n                    logger(`does field ${field.getId()} have value from ${values} - current value is ${targetValue} - found in value(s)`);\n                    foundInValue = true;\n                }\n            });\n            if (foundInValue) {\n                return { ruleFailed: false };\n            }\n        }\n        return {\n            ruleFailed: true,\n            message: `${field.getName()} must be have a value in ${values}`,\n        };\n    }\n    doesSourceFieldHaveValue(field, values) {\n        return this.doesFieldHaveValue(field, values);\n    }\n    isTargetGreaterThanEqualSource(targetField, sourceField) {\n        let check = this.areTwoFieldsEqual(targetField, sourceField);\n        if (check.ruleFailed) {\n            check = this.isTargetGreaterThan(targetField, sourceField);\n            if (check.ruleFailed) {\n                return {\n                    ruleFailed: true,\n                    message: `${targetField.getName()} must be greater than or equal to ${sourceField.getName()}`,\n                };\n            }\n        }\n        return { ruleFailed: false };\n    }\n    compareFields(targetField, sourceField, comparison, value) {\n        switch (comparison) {\n            case ComparisonType.equals: {\n                return this.areTwoFieldsEqual(targetField, sourceField);\n                break;\n            }\n            case ComparisonType.lessThan: {\n                return this.isTargetLessThanSource(targetField, sourceField);\n                break;\n            }\n            case ComparisonType.lessThanEqual: {\n                return this.isTargetLessThanEqualSource(targetField, sourceField);\n                break;\n            }\n            case ComparisonType.greaterThan: {\n                return this.isTargetGreaterThan(targetField, sourceField);\n                break;\n            }\n            case ComparisonType.greaterThanEqual: {\n                return this.isTargetGreaterThanEqualSource(targetField, sourceField);\n                break;\n            }\n            case ComparisonType.isNull: {\n                return this.isSourceNull(sourceField);\n                break;\n            }\n            case ComparisonType.isNotNull: {\n                return this.isSourceNotNull(sourceField);\n                break;\n            }\n            case ComparisonType.hasValue: {\n                return this.doesSourceFieldHaveValue(sourceField, value);\n                break;\n            }\n        }\n    }\n    executeRule(rule) {\n        let response = {\n            field: rule.targetField,\n            ruleFailed: false,\n            response: rule.response,\n        };\n        // run each field comparison\n        logger(`Executing rule for target ${rule.targetField.getId()}`);\n        logger(rule);\n        rule.fieldConditions.every((condition) => {\n            logger('field condition rule');\n            logger(condition);\n            let values = (condition.values) ? condition.values : '';\n            let ruleCheck = this.compareFields(rule.targetField, condition.sourceField, condition.comparison, values);\n            if (ruleCheck.ruleFailed) {\n                flogger('field condition rule FAILED');\n                response.ruleFailed = true;\n                // only need messages for invalid responses\n                response.message = ruleCheck.message;\n                return false;\n            }\n            flogger('field condition rule PASSED');\n            return true;\n        });\n        // run each value comparison if we haven't already failed\n        if (!response.ruleFailed) {\n            rule.valueConditions.forEach((condition) => {\n                logger('value condition rule');\n                logger(condition);\n                let ruleCheck = this.compareFields(rule.targetField, rule.targetField, ComparisonType.hasValue, condition.values);\n                if (ruleCheck.ruleFailed) {\n                    flogger('value condition rule FAILED');\n                    response.ruleFailed = true;\n                    response.message = ruleCheck.message;\n                    return false;\n                }\n                flogger('value condition rule PASSED');\n                return true;\n            });\n        }\n        return response;\n    }\n    getRulesForFieldChange(formId, dataFieldId, includeSourceFields) {\n        let rules = [];\n        // lets go through the rules for the form\n        logger(`Finding rules for form ${formId} and data field ${dataFieldId}`);\n        let index = this.formRules.findIndex((formRule) => formRule.form.getId() === formId);\n        if (index >= 0) {\n            const ruleSet = this.formRules[index];\n            // the dataFieldId could be the target or one of the sources\n            ruleSet.rules.forEach((rule) => {\n                if (rule.targetField.getId() === dataFieldId) {\n                    logger(`Found rule where data field ${dataFieldId} is target`);\n                    if (rule.targetField.isValid()) {\n                        rules.push(rule);\n                    }\n                    else {\n                        flogger(`Found rule where data field ${dataFieldId} is target but value is not currently valid`);\n                    }\n                }\n                else {\n                    if (includeSourceFields) {\n                        rule.fieldConditions.every((value) => {\n                            if (value.sourceField.getId() === dataFieldId) {\n                                logger(`Found rule where data field ${dataFieldId} is source`);\n                                if (value.sourceField.isValid()) {\n                                    rules.push(rule);\n                                }\n                                else {\n                                    flogger(`Found rule where data field ${dataFieldId} is source but value is not currently valid`);\n                                }\n                                return false;\n                            }\n                            return true;\n                        });\n                    }\n                }\n            });\n        }\n        return rules;\n    }\n}\n//# sourceMappingURL=ValidationManager.js.map","export var ConditionResponse;\n(function (ConditionResponse) {\n    ConditionResponse[ConditionResponse[\"show\"] = 0] = \"show\";\n    ConditionResponse[ConditionResponse[\"hide\"] = 1] = \"hide\";\n    ConditionResponse[ConditionResponse[\"invalid\"] = 2] = \"invalid\";\n    ConditionResponse[ConditionResponse[\"valid\"] = 3] = \"valid\";\n})(ConditionResponse || (ConditionResponse = {}));\n//# sourceMappingURL=ValidationTypeDefs.js.map","import { BasicFieldOperations } from \"../../model/BasicFieldOperations\";\nimport { FieldType } from \"../../model/DataObjectTypeDefs\";\nimport { defaultGetValue, UIFieldType } from \"../form/FormUITypeDefs\";\nimport debug from 'debug';\nimport { RBGFieldOperations } from \"./RBGFieldOperations\";\nimport { FIELD_CreatedOn, FIELD_ModifiedOn } from \"../../model/BasicObjectDefinitionFactory\";\nconst logger = debug('bootstrap-form-config-helper');\nexport class BootstrapFormConfigHelper {\n    constructor() {\n    }\n    static getInstance() {\n        if (!(BootstrapFormConfigHelper._instance)) {\n            BootstrapFormConfigHelper._instance = new BootstrapFormConfigHelper();\n        }\n        return BootstrapFormConfigHelper._instance;\n    }\n    generateFormConfig(dataObjDef, displayOrders, hasDeleteButton, hideModifierFields = false) {\n        let fieldOperations = new BasicFieldOperations();\n        let rbgFieldOperation = new RBGFieldOperations();\n        // create the Field UI config for each field\n        let fieldUIConfigs = [];\n        dataObjDef.fields.forEach((fieldDef, index) => {\n            let fieldType = UIFieldType.text;\n            switch (fieldDef.type) {\n                case (FieldType.time):\n                case (FieldType.text):\n                case (FieldType.date):\n                case (FieldType.shortTime):\n                case (FieldType.duration): {\n                    break;\n                }\n                case (FieldType.datetime): {\n                    // is this the created or modified date\n                    if (hideModifierFields) {\n                        if (fieldDef.id === FIELD_CreatedOn) {\n                            fieldType = UIFieldType.hidden;\n                        }\n                        if (fieldDef.id === FIELD_ModifiedOn) {\n                            fieldType = UIFieldType.hidden;\n                        }\n                    }\n                    break;\n                }\n                case (FieldType.userId): {\n                    if (hideModifierFields) {\n                        fieldType = UIFieldType.hidden;\n                    }\n                    else {\n                        fieldType = UIFieldType.text;\n                    }\n                    break;\n                }\n                case (FieldType.uuid):\n                case (FieldType.id): {\n                    fieldType = UIFieldType.hidden;\n                    break;\n                }\n                case (FieldType.integer):\n                case (FieldType.float): {\n                    fieldType = UIFieldType.number;\n                    break;\n                }\n                case (FieldType.email): {\n                    fieldType = UIFieldType.email;\n                    break;\n                }\n                case (FieldType.password): {\n                    fieldType = UIFieldType.password;\n                    break;\n                }\n                case (FieldType.boolean): {\n                    fieldType = UIFieldType.checkbox;\n                    break;\n                }\n                case (FieldType.largeText): {\n                    fieldType = UIFieldType.textarea;\n                    break;\n                }\n                case (FieldType.choice): {\n                    fieldType = UIFieldType.select;\n                    break;\n                }\n                case (FieldType.limitedChoice): {\n                    fieldType = UIFieldType.radioGroup;\n                    break;\n                }\n            }\n            // see if the field was supplied with a display order\n            const displayOrder = displayOrders.find((value) => value.fieldId === fieldDef.id);\n            let displayOrderValue = index;\n            if (displayOrder) {\n                displayOrderValue = displayOrder.displayOrder;\n            }\n            // construct the field ui config\n            let fieldUIConfig = {\n                field: fieldDef,\n                displayOrder: displayOrderValue,\n                elementType: fieldType,\n                elementClasses: 'form-control col-sm-9',\n                renderer: fieldOperations,\n                formatter: fieldOperations,\n                getValue: defaultGetValue\n            };\n            if ((fieldDef.type !== FieldType.id) && (fieldDef.type !== FieldType.uuid) && (fieldType !== UIFieldType.hidden)) { // no labels, descriptions, container for id,uuid\n                fieldUIConfig.containedBy = {\n                    elementType: 'div',\n                    elementClasses: 'form-group row'\n                };\n                fieldUIConfig.label = {\n                    label: fieldDef.displayName,\n                    classes: 'col-md-12 col-lg-3 col-form-label'\n                };\n                if (fieldDef.description) { // descriptions if the field has one\n                    fieldUIConfig.describedBy = {\n                        message: fieldDef.description,\n                        elementType: 'small',\n                        elementClasses: 'text-muted col-md-12 col-lg-9 offset-lg-3 mt-1'\n                    };\n                }\n                if (!fieldDef.displayOnly) { // no validator for readonly items\n                    fieldUIConfig.validator = {\n                        validator: fieldOperations,\n                        messageDisplay: {\n                            elementType: 'div',\n                            elementClasses: 'invalid-feedback col-md-12 col-lg-9 offset-lg-3'\n                        },\n                        validClasses: 'is-valid',\n                        invalidClasses: 'is-invalid',\n                    };\n                }\n            }\n            // text areas\n            if (fieldDef.type === FieldType.largeText) {\n                fieldUIConfig.textarea = {\n                    rows: 5,\n                    cols: 20\n                };\n            }\n            // select\n            if (fieldDef.type === FieldType.choice) { // subelements are options, with no classes, no labels, and no other container\n                fieldUIConfig.subElement = {\n                    element: { elementType: 'option', elementClasses: '' },\n                };\n                fieldUIConfig.datasource = fieldDef.dataSource;\n            }\n            // radio button group\n            if (fieldDef.type === FieldType.limitedChoice) {\n                fieldUIConfig.subElement = {\n                    element: {\n                        elementType: 'input',\n                        elementClasses: 'form-check-input',\n                        elementAttributes: [{ name: 'type', value: 'radio' }]\n                    },\n                    container: {\n                        elementType: 'div',\n                        elementClasses: 'form-check form-check-inline'\n                    },\n                    label: {\n                        label: 'label',\n                        classes: 'form-check-label',\n                    },\n                };\n                fieldUIConfig.renderer = rbgFieldOperation;\n                if (fieldUIConfig.validator)\n                    fieldUIConfig.validator.validator = rbgFieldOperation;\n                fieldUIConfig.formatter = rbgFieldOperation;\n                fieldUIConfig.datasource = fieldDef.dataSource;\n            }\n            fieldUIConfigs.push(fieldUIConfig);\n        });\n        // create a form with a single group and button container with Bootstrap styles\n        const fieldGroup = {\n            containedBy: {\n                elementType: 'div',\n                elementClasses: 'col-sm-12',\n            },\n            fields: fieldUIConfigs\n        };\n        const formConfig = {\n            id: dataObjDef.id,\n            displayName: dataObjDef.displayName,\n            fieldGroups: [fieldGroup],\n            unsavedChanges: {\n                elementType: 'div',\n                elementClasses: 'invalid-feedback text-right col-md-12 col-lg-9 offset-lg-3',\n                elementAttributes: [{ name: 'style', value: 'display:block' }],\n                innerHTML: `Pending changes to ${dataObjDef.displayName}`,\n            },\n            buttonsContainedBy: {\n                elementType: 'div',\n                elementClasses: 'd-flex w-100 justify-space-between',\n            },\n            cancelButton: {\n                buttonText: 'Cancel  ',\n                buttonClasses: 'btn-info rounded p-1 mr-2 mt-2 w-100',\n                iconClasses: 'fas fa-ban'\n            },\n            submitButton: {\n                buttonText: 'Save  ',\n                buttonClasses: 'btn-primary rounded p-1 mt-2 w-100',\n                iconClasses: 'fas fa-save'\n            },\n            activeSave: '<span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>&nbsp;',\n        };\n        // sort the fields into display order\n        formConfig.fieldGroups.forEach((group) => {\n            group.fields.sort((a, b) => {\n                return (a.displayOrder - b.displayOrder);\n            });\n        });\n        if (hasDeleteButton) {\n            formConfig.deleteButton = {\n                buttonText: 'Delete  ',\n                buttonClasses: 'btn-warning rounded p-1 mr-2 mt-2 w-100',\n                iconClasses: 'fas fa-trash-alt'\n            };\n        }\n        logger(formConfig);\n        return formConfig;\n    }\n}\n//# sourceMappingURL=BootstrapFormConfigHelper.js.map","import { BasicFieldOperations } from \"../../model/BasicFieldOperations\";\nimport { FieldType } from \"../../model/DataObjectTypeDefs\";\nimport { defaultGetValue, UIFieldType } from \"../form/FormUITypeDefs\";\nimport debug from 'debug';\nimport { FIELD_CreatedOn, FIELD_ModifiedOn } from \"../../model/BasicObjectDefinitionFactory\";\nimport { LimitedChoiceTextRenderer } from \"./LimitedChoiceTextRenderer\";\nconst logger = debug('bootstrap-tabular-config-helper');\nexport class BootstrapTableConfigHelper {\n    constructor() {\n    }\n    static getInstance() {\n        if (!(BootstrapTableConfigHelper._instance)) {\n            BootstrapTableConfigHelper._instance = new BootstrapTableConfigHelper();\n        }\n        return BootstrapTableConfigHelper._instance;\n    }\n    generateTableRowConfig(dataObjDef, displayOrders, itemDetailColumn, hasActions, hideModifierFields = false) {\n        let fieldOperations = new BasicFieldOperations();\n        let choiceRenderer = new LimitedChoiceTextRenderer();\n        // create the Field UI config for each field\n        let fieldUIConfigs = [];\n        let columnHeaderConfigs = [];\n        dataObjDef.fields.forEach((fieldDef, index) => {\n            let fieldType = UIFieldType.text;\n            switch (fieldDef.type) {\n                case (FieldType.datetime): {\n                    // is this the created or modified date\n                    if (hideModifierFields) {\n                        if (fieldDef.id === FIELD_CreatedOn) {\n                            fieldType = UIFieldType.hidden;\n                        }\n                        if (fieldDef.id === FIELD_ModifiedOn) {\n                            fieldType = UIFieldType.hidden;\n                        }\n                    }\n                    break;\n                }\n                case (FieldType.userId): {\n                    if (hideModifierFields) {\n                        fieldType = UIFieldType.hidden;\n                    }\n                    else {\n                        fieldType = UIFieldType.text;\n                    }\n                    break;\n                }\n                case (FieldType.uuid):\n                case (FieldType.id): {\n                    fieldType = UIFieldType.hidden;\n                    break;\n                }\n            }\n            // see if the field was supplied with a display order, no order, no display for a table\n            const displayOrder = displayOrders.find((value) => value.fieldId === fieldDef.id);\n            let displayOrderValue = index;\n            if (displayOrder) {\n                displayOrderValue = displayOrder.displayOrder;\n                if ((fieldDef.type !== FieldType.id) && (fieldDef.type !== FieldType.uuid) && (fieldType !== UIFieldType.hidden)) { // no labels, descriptions, container for id,uuid\n                    let headerConfig = {\n                        field: fieldDef,\n                        element: {\n                            elementType: 'th',\n                            elementAttributes: [{ name: 'scope', value: 'col' }],\n                            elementClasses: '',\n                            innerHTML: fieldDef.displayName\n                        }\n                    };\n                    // construct the field ui config\n                    let fieldUIConfig = {\n                        field: fieldDef,\n                        displayOrder: displayOrderValue,\n                        elementType: UIFieldType.tableData,\n                        elementClasses: 'text-center',\n                        renderer: fieldOperations,\n                        getValue: defaultGetValue\n                    };\n                    if (fieldDef.type === FieldType.limitedChoice) {\n                        fieldUIConfig.renderer = choiceRenderer;\n                    }\n                    columnHeaderConfigs.push(headerConfig);\n                    fieldUIConfigs.push(fieldUIConfig);\n                }\n            }\n        });\n        let actionColumn = null;\n        if (hasActions) {\n            actionColumn = {\n                element: {\n                    elementType: 'th',\n                    elementAttributes: [{ name: 'scope', value: 'col' }],\n                    elementClasses: 'text-right',\n                    innerHTML: 'Actions'\n                }\n            };\n        }\n        const tableConfig = {\n            id: dataObjDef.id,\n            displayName: dataObjDef.displayName,\n            container: {\n                elementType: 'div',\n                elementClasses: 'table-responsive'\n            },\n            table: {\n                elementType: 'table',\n                elementClasses: 'table table-hover table-sm'\n            },\n            header: {\n                elementType: 'thead',\n                elementClasses: ''\n            },\n            headerColumns: columnHeaderConfigs,\n            body: {\n                elementType: 'tbody',\n                elementClasses: ''\n            },\n            columns: fieldUIConfigs,\n            itemDetailColumn: itemDetailColumn\n        };\n        // sort the fields into display order\n        tableConfig.columns.sort((a, b) => {\n            return (a.displayOrder - b.displayOrder);\n        });\n        if (actionColumn) {\n            tableConfig.actionColumn = actionColumn;\n        }\n        logger(tableConfig);\n        return tableConfig;\n    }\n}\n//# sourceMappingURL=BootstrapTableConfigHelper.js.map","import debug from 'debug';\nconst rlogger = debug('limited-choice-text-renderer');\nexport class LimitedChoiceTextRenderer {\n    constructor() {\n    }\n    renderValue(field, currentValue) {\n        rlogger(`Rendering value for field ${field.displayName} with new value ${currentValue}`);\n        // find the current value in the data source and convert to text for display\n        let result = currentValue;\n        if (field.dataSource) {\n            const valueOptions = field.dataSource.getOptions();\n            const foundIndex = valueOptions.findIndex((option) => option.value === currentValue);\n            if (foundIndex >= 0) {\n                result = valueOptions[foundIndex].name;\n            }\n        }\n        return result;\n    }\n    generate(field, isCreate) {\n        return '';\n    }\n    setSubElements(elements) {\n    }\n}\n//# sourceMappingURL=LimitedChoiceTextRenderer.js.map","import debug from 'debug';\nimport { DataObjectController } from \"../../model/DataObjectController\";\nimport { AlertType } from \"../alert/AlertListener\";\nimport { AlertManager } from \"../alert/AlertManager\";\nconst logger = debug('linked-controller');\nconst dlogger = debug('linked-controller-detail');\nclass ChildViewListenerDelegate {\n    constructor(controller) {\n        this.controller = controller;\n    }\n    addView(view) {\n        view.addEventListener(this);\n    }\n    canDeleteItem(view, selectedItem) {\n        return true;\n    }\n    documentLoaded(view) {\n    }\n    hideRequested(view) {\n    }\n    itemAction(view, actionName, selectedItem) {\n    }\n    itemDeleted(view, selectedItem) {\n    }\n    itemDropped(view, droppedItem) {\n    }\n    showRequested(view) {\n    }\n    cancelled(view, dataObj) {\n        this.controller.cancelled(view, dataObj);\n    }\n    deletedItem(view, dataObj) {\n        this.controller.deletedItem(view, dataObj);\n    }\n    saveNewItem(view, dataObj) {\n        this.controller.saveNewItem(view, dataObj);\n    }\n    updateItem(view, dataObj) {\n        this.controller.updateItem(view, dataObj);\n    }\n}\nexport class ChangeDataObjectDelegate {\n    constructor(callback) {\n        this.callback = callback;\n    }\n    shouldDiscardChanges() {\n        AlertManager.getInstance().startAlert(this, 'Discard Changes', 'There are unsaved changes.  Discard?', {});\n    }\n    completed(event) {\n        if (event.outcome === AlertType.confirmed) {\n            this.callback();\n        }\n    }\n}\nexport class LinkedCollectionDetailController extends DataObjectController {\n    constructor(typeName, parentView) {\n        super(typeName);\n        this.children = [];\n        logger(`Starting with parent view ${parentView.getName()}`);\n        this.parentView = parentView;\n        this.delegate = new ChildViewListenerDelegate(this);\n        this.parentView.addEventListener(this);\n    }\n    addLinkedDetailView(childView) {\n        logger(`Adding child view ${childView.getName()}`);\n        this.children.push(childView);\n        this.delegate.addView(childView); // this delegate will only pass us the unique detail view events (save, new, etc)\n    }\n    initialise() {\n    }\n    canDeleteItem(view, selectedItem) {\n        logger(`Handling delete item from view ${view.getName()}`);\n        dlogger(selectedItem);\n        return this.parentView.hasPermissionToDeleteItemInNamedCollection('', selectedItem);\n    }\n    documentLoaded(view) {\n        logger(`Handling document loaded view ${view.getName()}`);\n        // let the children know\n        this.children.forEach((childView) => {\n            childView.onDocumentLoaded();\n        });\n    }\n    hideRequested(view) {\n        // let the children know\n        logger(`Handling hide  from view ${view.getName()}`);\n        this.children.forEach((childView) => {\n            childView.hidden();\n        });\n    }\n    itemAction(view, actionName, selectedItem) {\n        logger(`Handling item action ${actionName} from view ${view.getName()}`);\n        dlogger(selectedItem);\n        this.children.forEach((childView) => {\n            childView.handleActionItem(actionName, selectedItem);\n        });\n    }\n    itemDeleted(view, selectedItem) {\n        logger(`Handling item deleted from view ${view.getName()}`);\n        dlogger(selectedItem);\n        this.children.forEach((childView) => {\n            // clear the child display and set readonly\n            childView.clearDisplay();\n            childView.setReadOnly();\n        });\n    }\n    itemDeselected(view, selectedItem) {\n        logger(`Handling item deselected from view ${view.getName()}`);\n        dlogger(selectedItem);\n        this.children.forEach((childView) => {\n            // clear the child display and set readonly\n            childView.clearDisplay();\n            childView.setReadOnly();\n        });\n    }\n    itemDragStarted(view, selectedItem) {\n    }\n    itemDropped(view, droppedItem) {\n    }\n    itemSelected(view, selectedItem) {\n        logger(`Handling item selected from view ${view.getName()}`);\n        dlogger(selectedItem);\n        this.children.forEach((childView) => {\n            childView.displayItem(selectedItem);\n        });\n    }\n    showRequested(view) {\n        logger(`Handling show from view ${view.getName()}`);\n        // let the children know\n        this.children.forEach((childView) => {\n            childView.show();\n        });\n    }\n    canSelectItem(view, selectedItem) {\n        logger(`Handling can select item from view ${view.getName()}`);\n        dlogger(selectedItem);\n        // are we currently in the middle of creating a new object?\n        if (this.isCreatingNew)\n            return false;\n        // prevent selection if the children views have modified this item\n        let canProceedWithSelection = true;\n        this.children.forEach((childView) => {\n            if (childView.hasChanged()) {\n                dlogger(`child view ${childView.getName()} has changed - cancelling`);\n                canProceedWithSelection = false;\n            }\n        });\n        if (!canProceedWithSelection) {\n            canProceedWithSelection = confirm(`${view.getName()} - unsaved changes.  Discard them?`);\n        }\n        return canProceedWithSelection;\n    }\n    cancelled(view, dataObj) {\n        logger(`Handling cancelled from child view ${view.getName()}`);\n        dlogger(dataObj);\n        this.isCreatingNew = false;\n    }\n    deletedItem(view, dataObj) {\n        logger(`Handling deleted from child view ${view.getName()}`);\n        dlogger(dataObj);\n        this.informListenersOfDelete(dataObj);\n    }\n    saveNewItem(view, dataObj) {\n        logger(`Handling save new from child view ${view.getName()}`);\n        dlogger(dataObj);\n        this.informListenersOfCreate(dataObj);\n    }\n    updateItem(view, dataObj) {\n        logger(`Handling update from child view ${view.getName()}`);\n        dlogger(dataObj);\n        this.informListenersOfUpdate(dataObj);\n    }\n    _startNewObject() {\n        logger(`Handling start new object`);\n        // assume the first detail view will create the object for us\n        let canProceedWithCreateNew = true;\n        this.children.forEach((childView) => {\n            if (childView.hasChanged()) {\n                dlogger(`child view ${childView.getName()} has changed - cancelling`);\n                canProceedWithCreateNew = false;\n            }\n        });\n        if (!canProceedWithCreateNew) {\n            canProceedWithCreateNew = confirm(`There are unsaved changes.  Discard them?`);\n        }\n        if (this.children.length > 0) {\n            logger(`Handling start new object with child view ${this.children[0].getName()}`);\n            let dataObj = this.children[0].createItem();\n            if (dataObj) {\n                canProceedWithCreateNew = true;\n                this.children[0].show();\n            }\n        }\n        return canProceedWithCreateNew;\n    }\n}\n//# sourceMappingURL=LinkedCollectionDetailController.js.map","import debug from 'debug';\nimport { KeyType } from \"../ConfigurationTypes\";\nconst flogger = debug('basic-field-operations-formatter');\nconst vlogger = debug('basic-field-operations-validator');\nconst glogger = debug('basic-field-operations-generator');\nconst rlogger = debug('basic-field-operations-renderer');\nexport class RBGFieldOperations {\n    constructor() {\n        this.radioButtons = [];\n    }\n    // called when saving, change to final values\n    formatValue(field, currentValue) {\n        flogger(`Handling format value for RBG ${field.displayName} with value ${currentValue}`);\n        let result = currentValue;\n        // find the current selected radio button\n        this.radioButtons.forEach((radioButton) => {\n            if (radioButton.checked) {\n                result = radioButton.value;\n                if (field.idType === KeyType.number) {\n                    result = parseInt(result);\n                }\n            }\n        });\n        flogger(`Handling format value for field ${field.displayName} with value ${currentValue} - result is ${result}`);\n        return result;\n    }\n    isValidValue(field, currentValue) {\n        vlogger(`Handling is valid value for field ${field.displayName} with value ${currentValue}`);\n        let response = {\n            isValid: false,\n            resetOnFailure: false\n        };\n        // basics first, is the field mandatory?\n        if (field.mandatory) {\n            this.radioButtons.forEach((radioButton) => {\n                if (radioButton.checked) {\n                    response.isValid = true;\n                }\n            });\n            if (!response.isValid) {\n                response.message = `${field.displayName} is required. Please select one of the values.`;\n                vlogger(`Handling is valid value for field ${field.displayName} with value ${currentValue} - is valid is ${response.isValid} with message ${response.message}`);\n                return response;\n            }\n        }\n        else {\n            response.isValid = true;\n        }\n        // ok, so we have some content, we need to check if the value is a valid format with regular expressions\n        vlogger(`Handling is valid value for field ${field.displayName} with value ${currentValue} - is valid is ${response.isValid} with message ${response.message}`);\n        return response;\n    }\n    renderValue(field, currentValue) {\n        rlogger(`Rendering value for field ${field.displayName} with new value ${currentValue}`);\n        this.radioButtons.forEach((radioButton) => {\n            if (radioButton.value === currentValue)\n                radioButton.checked = true;\n        });\n        return null;\n    }\n    generate(field, isCreate) {\n        return '';\n    }\n    setSubElements(elements) {\n        this.radioButtons = elements;\n    }\n}\n//# sourceMappingURL=RBGFieldOperations.js.map","export class SimpleValueDataSource {\n    constructor(options) {\n        this.options = options;\n        this.listeners = [];\n    }\n    addValueOption(name, value) {\n        this.options.push({ name, value });\n        this.listeners.forEach((listener) => listener.optionsChanged(this.options));\n    }\n    addListener(listener) {\n        this.listeners.push(listener);\n    }\n    getOptions() {\n        return this.options;\n    }\n}\n//# sourceMappingURL=SimpleValueDataSource.js.map","import { AbstractView } from \"../implementation/AbstractView\";\nimport { DRAGGABLE_FROM, DRAGGABLE_KEY_ID, DRAGGABLE_TYPE, EXTRA_ACTION_ATTRIBUTE_NAME, KeyType } from \"../../ConfigurationTypes\";\nimport { AlertManager } from \"../../alert/AlertManager\";\nimport debug from \"debug\";\nimport { AlertType } from \"../../alert/AlertListener\";\nconst logger = debug('collection-view-event-handler-delegate');\nexport class CollectionViewEventHandlerDelegate {\n    constructor(view, forwarder) {\n        this.selectedItem = null;\n        this.view = view;\n        this.eventForwarder = forwarder;\n        // event handlers\n        this.eventStartDrag = this.eventStartDrag.bind(this);\n        this.eventActionClicked = this.eventActionClicked.bind(this);\n        this.eventClickItem = this.eventClickItem.bind(this);\n        this.eventDeleteClickItem = this.eventDeleteClickItem.bind(this);\n    }\n    getDragData(event) {\n        var _a, _b;\n        const context = this.getItemContext(event);\n        let itemId = context.itemId;\n        const dataSource = context.dataSource;\n        if (this.view.getCollectionUIConfig().keyType === KeyType.number) { // @ts-ignore\n            itemId = parseInt(itemId);\n        }\n        logger(`view ${this.view.getName()}: Item with id ${itemId} getting drag data from ${dataSource}`);\n        let compareWith = {};\n        // @ts-ignore\n        compareWith[this.view.getCollectionUIConfig().keyId] = itemId;\n        let selectedItem = {};\n        selectedItem = this.view.getItemInNamedCollection(this.view.getCollectionName(), compareWith);\n        if (selectedItem) {\n            // @ts-ignore\n            selectedItem[DRAGGABLE_TYPE] = (_a = this.view.getCollectionUIConfig().detail.drag) === null || _a === void 0 ? void 0 : _a.type;\n            // @ts-ignore\n            selectedItem[DRAGGABLE_FROM] = (_b = this.view.getCollectionUIConfig().detail.drag) === null || _b === void 0 ? void 0 : _b.from;\n        }\n        return selectedItem;\n    }\n    eventStartDrag(event) {\n        logger(`view ${this.view.getName()}: drag start`);\n        logger(event.target);\n        const data = JSON.stringify(this.getDragData(event));\n        logger(data);\n        // @ts-ignore\n        event.dataTransfer.setData(DRAGGABLE_KEY_ID, data);\n        (this.eventForwarder).itemDragStarted(this.view, data);\n    }\n    eventClickItem(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        const context = this.getItemContext(event);\n        let itemId = context.itemId;\n        const dataSource = context.dataSource;\n        if (this.view.getCollectionUIConfig().keyType === KeyType.number) { // @ts-ignore\n            itemId = parseInt(itemId);\n        }\n        logger(`view ${this.view.getName()}: Item with id ${itemId} clicked from ${dataSource}`);\n        let compareWith = {};\n        // @ts-ignore\n        compareWith[this.view.getCollectionUIConfig().keyId] = itemId;\n        logger(compareWith);\n        let selectedItem = this.view.getItemInNamedCollection(this.view.getCollectionName(), compareWith);\n        logger(selectedItem);\n        if (selectedItem) {\n            const shouldSelect = (this.eventForwarder).canSelectItem(this.view, selectedItem);\n            logger(`view ${this.view.getName()}: Item with id ${itemId} attempting selected from ${dataSource} - ${shouldSelect}`);\n            if (shouldSelect) {\n                this.selectedItem = selectedItem;\n                logger(selectedItem);\n                (this.eventForwarder).itemSelected(this.view, selectedItem);\n            }\n        }\n    }\n    eventDeleteClickItem(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        const context = this.getItemContext(event);\n        let itemId = context.itemId;\n        const dataSource = context.dataSource;\n        if (this.view.getCollectionUIConfig().keyType === KeyType.number) { // @ts-ignore\n            itemId = parseInt(itemId);\n        }\n        logger(`view ${this.view.getName()}: Item with id ${itemId} attempting delete from ${dataSource}`);\n        let compareWith = {};\n        // @ts-ignore\n        compareWith[this.view.getCollectionUIConfig().keyId] = itemId;\n        logger(compareWith);\n        let selectedItem = this.view.getItemInNamedCollection(this.view.getCollectionName(), compareWith);\n        if (selectedItem) {\n            const shouldDelete = this.eventForwarder.canDeleteItem(this.view, selectedItem);\n            logger(`view ${this.view.getName()}: Item with id ${itemId} attempting delete from ${dataSource} - ${shouldDelete}`);\n            if (shouldDelete) {\n                // do we need to confirm?\n                if (this.view.getCollectionUIConfig().detail.quickDelete) {\n                    this.selectedItem = null;\n                    this.eventForwarder.itemDeleted(this.view, selectedItem);\n                }\n                else {\n                    AlertManager.getInstance().startAlert(this, this.view.getName(), `Are you sure you want to delete this information?`, selectedItem);\n                }\n            }\n        }\n    }\n    eventActionClicked(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        const context = this.getItemContext(event);\n        let itemId = context.itemId;\n        const dataSource = context.dataSource;\n        // @ts-ignore\n        const actionName = event.target.getAttribute(EXTRA_ACTION_ATTRIBUTE_NAME);\n        if (this.view.getCollectionUIConfig().keyType === KeyType.number) { // @ts-ignore\n            itemId = parseInt(itemId);\n        }\n        logger(`view ${this.view.getName()}: Item with id ${itemId} attempting action ${actionName} from ${dataSource}`);\n        let compareWith = {};\n        // @ts-ignore\n        compareWith[this.view.getCollectionUIConfig().keyId] = itemId;\n        logger(compareWith);\n        let selectedItem = this.view.getItemInNamedCollection(this.view.getCollectionName(), compareWith);\n        if (selectedItem) {\n            const shouldSelect = (this.eventForwarder).canSelectItem(this.view, selectedItem);\n            logger(`view ${this.view.getName()}: Item with id ${itemId} attempting action ${actionName} from ${dataSource} - ${shouldSelect}`);\n            if (shouldSelect) {\n                this.selectedItem = selectedItem;\n                logger(selectedItem);\n                this.eventForwarder.itemAction(this.view, actionName, selectedItem);\n            }\n        }\n    }\n    completed(event) {\n        logger(event.context);\n        if (event.outcome === AlertType.confirmed) {\n            this.selectedItem = null;\n            this.eventForwarder.itemDeleted(this.view, event.context);\n        }\n    }\n    getItemContext(event) {\n        // @ts-ignore\n        const itemId = event.target.getAttribute(this.view.getCollectionUIConfig().keyId);\n        // @ts-ignore\n        const dataSource = event.target.getAttribute(AbstractView.DATA_SOURCE);\n        let context = {\n            itemId: itemId,\n            dataSource: dataSource\n        };\n        return context;\n    }\n}\n//# sourceMappingURL=CollectionViewEventHandlerDelegate.js.map","import { CollectionViewEventHandlerDelegate } from \"./CollectionViewEventHandlerDelegate\";\nimport { ContextualInformationHelper } from \"../../context/ContextualInformationHelper\";\nexport class CollectionViewEventHandlerDelegateUsingContext extends CollectionViewEventHandlerDelegate {\n    constructor(view, forwarder) {\n        super(view, forwarder);\n    }\n    getItemContext(event) {\n        const contextDetail = ContextualInformationHelper.getInstance().findContextFromEvent(event);\n        let context;\n        if (contextDetail) {\n            context = {\n                itemId: contextDetail.identifier,\n                dataSource: contextDetail.source\n            };\n        }\n        else {\n            context = {\n                itemId: '',\n                dataSource: this.view.getName(),\n            };\n        }\n        return context;\n    }\n}\n//# sourceMappingURL=CollectionViewEventHandlerDelegateUsingContext.js.map","import { ViewListenerForwarder } from \"./ViewListenerForwarder\";\nexport class CollectionViewListenerForwarder extends ViewListenerForwarder {\n    constructor() {\n        super();\n        this.collectionViewListeners = [];\n    }\n    addListener(listener) {\n        super.addListener(listener);\n        this.collectionViewListeners.push(listener);\n    }\n    itemDragStarted(view, selectedItem) {\n        if (!this.suppressEventEmits) {\n            this.collectionViewListeners.forEach((listener) => listener.itemDragStarted(view, selectedItem));\n        }\n    }\n    itemSelected(view, selectedItem) {\n        if (!this.suppressEventEmits) {\n            this.collectionViewListeners.forEach((listener) => listener.itemSelected(view, selectedItem));\n        }\n    }\n    itemDeselected(view, deselectedItem) {\n        if (!this.suppressEventEmits) {\n            this.collectionViewListeners.forEach((listener) => listener.itemDeselected(view, deselectedItem));\n        }\n    }\n    canSelectItem(view, selectedItem) {\n        let result = true; // return false if cancelling delete\n        if (!this.suppressEventEmits) {\n            this.collectionViewListeners.forEach((listener) => {\n                if (!(listener.canSelectItem(view, selectedItem))) {\n                    result = false;\n                }\n            });\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=CollectionViewListenerForwarder.js.map","import { ViewListenerForwarder } from \"./ViewListenerForwarder\";\nexport class DetailViewListenerForwarder extends ViewListenerForwarder {\n    constructor() {\n        super();\n        this.detailViewListeners = [];\n    }\n    addListener(listener) {\n        super.addListener(listener);\n        this.detailViewListeners.push(listener);\n    }\n    saveNewItem(view, dataObj) {\n        if (!this.suppressEventEmits) {\n            this.detailViewListeners.forEach((listener) => listener.saveNewItem(view, dataObj));\n        }\n    }\n    updateItem(view, dataObj) {\n        if (!this.suppressEventEmits) {\n            this.detailViewListeners.forEach((listener) => listener.updateItem(view, dataObj));\n        }\n    }\n    deletedItem(view, dataObj) {\n        if (!this.suppressEventEmits) {\n            this.detailViewListeners.forEach((listener) => listener.deletedItem(view, dataObj));\n        }\n    }\n    cancelled(view, dataObj) {\n        if (!this.suppressEventEmits) {\n            this.detailViewListeners.forEach((listener) => listener.cancelled(view, dataObj));\n        }\n    }\n}\n//# sourceMappingURL=DetailViewListenerForwarder.js.map","export class ViewListenerForwarder {\n    constructor() {\n        this.suppressEventEmits = false;\n        this.viewListeners = [];\n    }\n    addListener(listener) {\n        this.viewListeners.push(listener);\n    }\n    suppressEvents() {\n        this.suppressEventEmits = true;\n    }\n    emitEvents() {\n        this.suppressEventEmits = false;\n    }\n    itemDeleted(view, selectedItem) {\n        if (!this.suppressEventEmits) {\n            this.viewListeners.forEach((listener) => listener.itemDeleted(view, selectedItem));\n        }\n    }\n    documentLoaded(view) {\n        if (!this.suppressEventEmits) {\n            this.viewListeners.forEach((listener) => listener.documentLoaded(view));\n        }\n    }\n    itemAction(view, actionName, selectedItem) {\n        if (!this.suppressEventEmits) {\n            this.viewListeners.forEach((listener) => listener.itemAction(view, actionName, selectedItem));\n        }\n    }\n    canDeleteItem(view, selectedItem) {\n        let result = true; // return false if cancelling delete\n        if (!this.suppressEventEmits) {\n            this.viewListeners.forEach((listener) => {\n                if (!(listener.canDeleteItem(view, selectedItem))) {\n                    result = false;\n                }\n            });\n        }\n        return result;\n    }\n    hideRequested(view) {\n        if (!this.suppressEventEmits) {\n            this.viewListeners.forEach((listener) => listener.hideRequested(view));\n        }\n    }\n    showRequested(view) {\n        if (!this.suppressEventEmits) {\n            this.viewListeners.forEach((listener) => listener.showRequested(view));\n        }\n    }\n    itemDropped(view, droppedItem) {\n        if (!this.suppressEventEmits) {\n            this.viewListeners.forEach((listener) => listener.itemDropped(view, droppedItem));\n        }\n    }\n}\n//# sourceMappingURL=ViewListenerForwarder.js.map","import { AbstractView } from \"./AbstractView\";\nimport { Modifier } from \"../../ConfigurationTypes\";\nimport { isSame } from \"../../../util/EqualityFunctions\";\nimport debug from \"debug\";\nimport { CollectionViewListenerForwarder } from \"../delegate/CollectionViewListenerForwarder\";\nimport { CollectionViewEventHandlerDelegate } from \"../delegate/CollectionViewEventHandlerDelegate\";\nconst avLogger = debug('collection-view-ts');\nconst avLoggerDetails = debug('collection-view-ts-detail');\nexport class AbstractCollectionView extends AbstractView {\n    constructor(uiConfig, collectionName) {\n        super(uiConfig.viewConfig);\n        this.collectionUIConfig = uiConfig;\n        this.collectionName = collectionName;\n        this.renderer = null;\n        let forwarder = new CollectionViewListenerForwarder();\n        this.eventForwarder = forwarder;\n        this.eventHandlerDelegate = new CollectionViewEventHandlerDelegate(this, forwarder);\n        this.updateViewForNamedCollection = this.updateViewForNamedCollection.bind(this);\n        // event handlers\n        this.eventStartDrag = this.eventStartDrag.bind(this);\n        this.eventActionClicked = this.eventActionClicked.bind(this);\n        this.eventClickItem = this.eventClickItem.bind(this);\n        this.eventDeleteClickItem = this.eventDeleteClickItem.bind(this);\n    }\n    eventStartDrag(event) {\n        this.eventHandlerDelegate.eventStartDrag(event);\n    }\n    eventClickItem(event) {\n        this.eventHandlerDelegate.eventClickItem(event);\n    }\n    eventDeleteClickItem(event) {\n        this.eventHandlerDelegate.eventDeleteClickItem(event);\n    }\n    eventActionClicked(event) {\n        this.eventHandlerDelegate.eventActionClicked(event);\n    }\n    getCollectionName() {\n        return this.collectionName;\n    }\n    getItemId(from, item) {\n        return this.getIdForItemInNamedCollection(from, item);\n    }\n    getCollectionUIConfig() {\n        return this.collectionUIConfig;\n    }\n    addEventCollectionListener(listener) {\n        this.eventForwarder.addListener(listener);\n    }\n    setContainedBy(container) {\n        super.setContainedBy(container);\n        if (this.uiConfig.drop) {\n            avLoggerDetails(`view ${this.getName()}: Adding dragover events to ${this.uiConfig.dataSourceId}`);\n            avLoggerDetails(container);\n            container.addEventListener('dragover', (event) => {\n                event.preventDefault();\n            });\n            container.addEventListener('drop', this.handleDrop);\n        }\n    }\n    onDocumentLoaded() {\n        super.onDocumentLoaded();\n        if (this.renderer)\n            this.renderer.onDocumentLoaded();\n    }\n    renderBackgroundForItemInNamedCollection(containerEl, name, item) {\n    }\n    compareItemsForEquality(item1, item2) {\n        return isSame(item1, item2);\n    }\n    getModifierForItemInNamedCollection(name, item) {\n        return Modifier.normal;\n    }\n    getSecondaryModifierForItemInNamedCollection(name, item) {\n        return Modifier.normal;\n    }\n    getBadgeValueForItemInNamedCollection(name, item) {\n        return 0;\n    }\n    getBackgroundImageForItemInNamedCollection(name, item) {\n        return '';\n    }\n    updateViewForNamedCollection(name, newState) {\n        if (this.viewEl && this.renderer) {\n            this.renderer.setDisplayElementsForCollectionInContainer(this.viewEl, name, newState);\n        }\n    }\n    hasPermissionToDeleteItemInNamedCollection(name, item) {\n        return true;\n    }\n    hasPermissionToUpdateItemInNamedCollection(name, item) {\n        return true;\n    }\n    hasPermissionToActionItemInNamedCollection(actionName, name, item) {\n        return true;\n    }\n    setRenderer(renderer) {\n        this.renderer = renderer;\n    }\n}\n//# sourceMappingURL=AbstractCollectionView.js.map","import { AbstractCollectionView } from \"./AbstractCollectionView\";\nimport debug from 'debug';\nconst logger = debug('ab-stateful-collection-view');\nexport class AbstractStatefulCollectionView extends AbstractCollectionView {\n    constructor(uiConfig, stateManager, stateName) {\n        super(uiConfig, stateName);\n        this.stateManager = stateManager;\n        // state change listening\n        this.stateChanged = this.stateChanged.bind(this);\n        // setup state listener\n        this.stateManager.addChangeListenerForName(this.collectionName, this);\n    }\n    getItemDescription(from, item) {\n        return \"\";\n    }\n    hasActionPermission(actionName, from, item) {\n        return true;\n    }\n    onDocumentLoaded() {\n        super.onDocumentLoaded();\n        this.addEventCollectionListener(this);\n    }\n    getItemInNamedCollection(name, compareWith) {\n        return this.stateManager.findItemInState(name, compareWith);\n    }\n    stateChanged(managerName, name, newValue) {\n        logger(`handling state ${name} changed`);\n        logger(newValue);\n        this.updateViewForNamedCollection(name, newValue);\n    }\n    stateChangedItemAdded(managerName, name, itemAdded) {\n        logger(`handling state ${name} new item added`);\n        logger(itemAdded);\n        if (this.stateManager && this.collectionName)\n            this.updateViewForNamedCollection(name, this.stateManager.getStateByName(name));\n    }\n    stateChangedItemRemoved(managerName, name, itemRemoved) {\n        logger(`handling state ${name} new item removed`);\n        logger(itemRemoved);\n        if (this.stateManager && this.collectionName)\n            this.updateViewForNamedCollection(name, this.stateManager.getStateByName(name));\n    }\n    stateChangedItemUpdated(managerName, name, itemUpdated, itemNewValue) {\n        logger(`handling state ${name} new item updated`);\n        logger(itemNewValue);\n        if (this.stateManager && this.collectionName)\n            this.updateViewForNamedCollection(name, this.stateManager.getStateByName(name));\n    }\n    render() {\n        this.updateViewForNamedCollection(this.collectionName, this.stateManager.getStateByName(this.collectionName));\n    }\n    show() {\n    }\n    hidden() {\n    }\n    documentLoaded(view) {\n    }\n    hideRequested(view) {\n    }\n    itemDragStarted(view, selectedItem) {\n    }\n    itemDropped(view, droppedItem) {\n    }\n    showRequested(view) {\n    }\n    itemDeselected(view, selectedItem) {\n    }\n    itemSelected(view, selectedItem) {\n    }\n    itemAction(view, actionName, selectedItem) {\n    }\n    itemDeleted(view, selectedItem) {\n        this.stateManager.removeItemFromState(this.collectionName, selectedItem, false);\n    }\n    canSelectItem(view, selectedItem) {\n        return true;\n    }\n    canDeleteItem(view, selectedItem) {\n        return true;\n    }\n    getListenerName() {\n        return this.getName();\n    }\n    filterResults(managerName, name, filterResults) {\n    }\n}\n//# sourceMappingURL=AbstractStatefulCollectionView.js.map","import { DRAGGABLE_FROM, DRAGGABLE_KEY_ID, DRAGGABLE_TYPE } from \"../../ConfigurationTypes\";\nimport debug from \"debug\";\nimport { ViewListenerForwarder } from \"../delegate/ViewListenerForwarder\";\nconst avLogger = debug('abstract-view-ts');\nconst avLoggerDetails = debug('abstract-view-ts-detail');\nexport class AbstractView {\n    constructor(uiConfig) {\n        this.containerEl = null;\n        this.uiConfig = uiConfig;\n        this.viewEl = null;\n        this.eventForwarder = new ViewListenerForwarder();\n        this.handleDrop = this.handleDrop.bind(this);\n    }\n    getItemId(from, item) {\n        throw new Error(\"Method not implemented.\");\n    }\n    getItemDescription(from, item) {\n        throw new Error(\"Method not implemented.\");\n    }\n    hasActionPermission(actionName, from, item) {\n        throw new Error(\"Not implemented\");\n    }\n    getUIConfig() {\n        return this.uiConfig;\n    }\n    addEventListener(listener) {\n        this.eventForwarder.addListener(listener);\n    }\n    onDocumentLoaded() {\n        this.viewEl = document.getElementById(this.uiConfig.resultsContainerId);\n        this.eventForwarder.documentLoaded(this);\n    }\n    setContainedBy(container) {\n        this.containerEl = container;\n    }\n    getName() {\n        return this.uiConfig.dataSourceId;\n    }\n    hasChanged() {\n        return false;\n    }\n    getDataSourceKeyId() {\n        return AbstractView.DATA_SOURCE;\n    }\n    handleDrop(event) {\n        avLogger(`view ${this.getName()}: drop event`);\n        avLoggerDetails(event.target);\n        // @ts-ignore\n        const draggedObjectJSON = event.dataTransfer.getData(DRAGGABLE_KEY_ID);\n        const draggedObject = JSON.parse(draggedObjectJSON);\n        avLoggerDetails(draggedObject);\n        // check to see if we accept the dropped type and source\n        const droppedObjectType = draggedObject[DRAGGABLE_TYPE];\n        const droppedObjectFrom = draggedObject[DRAGGABLE_FROM];\n        avLogger(`view ${this.getName()}: drop event from ${droppedObjectFrom} with type ${droppedObjectType}`);\n        if (this.uiConfig.drop) {\n            const acceptType = (this.uiConfig.drop.acceptTypes.findIndex((objectType) => objectType === droppedObjectType) >= 0);\n            let acceptFrom = true;\n            if (acceptType) {\n                if (this.uiConfig.drop.acceptFrom) {\n                    acceptFrom = (this.uiConfig.drop.acceptFrom.findIndex((from) => from === droppedObjectFrom) >= 0);\n                }\n                avLoggerDetails(`view ${this.getName()}: accepted type? ${acceptType} and from? ${acceptFrom}`);\n                if (acceptType && acceptFrom) {\n                    this.eventForwarder.itemDropped(this, draggedObject);\n                }\n            }\n        }\n    }\n}\nAbstractView.DATA_SOURCE = 'data-source';\n//# sourceMappingURL=AbstractView.js.map","export class DefaultPermissionChecker {\n    hasPermissionToUpdateItem(item) {\n        return true;\n    }\n    hasPermissionToDeleteItem(item) {\n        return true;\n    }\n}\n//# sourceMappingURL=DefaultPermissionChecker.js.map","import { AbstractView } from \"./AbstractView\";\nimport { DetailViewListenerForwarder } from \"../delegate/DetailViewListenerForwarder\";\nexport class DetailViewImplementation extends AbstractView {\n    constructor(uiConfig, renderer) {\n        super(uiConfig);\n        this.currentItem = null;\n        this.renderer = renderer;\n        const forwarder = new DetailViewListenerForwarder();\n        this.eventForwarder = forwarder;\n        this.renderer.setView(this);\n        this.renderer.setEventForwarder(forwarder);\n    }\n    addEventDetailListener(listener) {\n        this.eventForwarder.addListener(listener);\n    }\n    getItemId(name, item) {\n        return '';\n    }\n    getItemDescription(name, item) {\n        return '';\n    }\n    hasActionPermission(actionName, from, item) {\n        return true;\n    }\n    getItem(from, identifier) {\n        return this.currentItem;\n    }\n    clearDisplay() {\n        this.renderer.reset();\n    }\n    clearReadOnly() {\n        this.renderer.clearReadOnly();\n    }\n    setReadOnly() {\n        this.renderer.setReadOnly();\n    }\n    isReadOnly() {\n        return this.renderer.isReadOnly();\n    }\n    createItem() {\n        return this.renderer.createItem();\n    }\n    displayItem(dataObj) {\n        this.currentItem = dataObj;\n        if (this.renderer.hasPermissionToUpdateItem(dataObj)) {\n            this.renderer.displayItem(dataObj);\n        }\n        else {\n            this.renderer.displayItemReadonly(dataObj);\n        }\n        this.show();\n    }\n    hidden() {\n        this.renderer.hidden();\n    }\n    show() {\n        this.renderer.show();\n    }\n    render() {\n        this.displayItem(this.currentItem);\n    }\n    onDocumentLoaded() {\n        this.renderer.onDocumentLoaded();\n        super.onDocumentLoaded();\n    }\n    hasPermissionToDeleteItem(item) {\n        return this.renderer.hasPermissionToDeleteItem(item);\n    }\n    hasPermissionToUpdateItem(item) {\n        return this.renderer.hasPermissionToUpdateItem(item);\n    }\n    handleActionItem(actionName, selectedItem) {\n        this.renderer.handleActionItem(actionName, selectedItem);\n    }\n    isDisplayingItem(dataObj) {\n        return this.renderer.isDisplayingItem(dataObj);\n    }\n    hasChanged() {\n        return this.renderer.hasChanged();\n    }\n    initialise(displayOrder, hasDeleteButton, hideModifierFields = false) {\n        this.renderer.initialise(displayOrder, hasDeleteButton, hideModifierFields);\n    }\n}\n//# sourceMappingURL=DetailViewImplementation.js.map","import debug from 'debug';\nimport browserUtil from \"../../../util/BrowserUtil\";\nimport { EXTRA_ACTION_ATTRIBUTE_NAME, Modifier, RowPosition, SCREEN_WIDTH_LARGE, SCREEN_WIDTH_MEDIUM, SCREEN_WIDTH_SMALL } from \"../../ConfigurationTypes\";\nconst avLogger = debug('carousel-renderer');\nexport class CarouselViewRenderer {\n    constructor(view, eventHandler, config) {\n        this.lastRenderedContainer = null;\n        this.lastRenderedCollectionName = null;\n        this.lastRenderedCollection = null;\n        this.previousWindowWidth = 0;\n        this.view = view;\n        this.eventHandler = eventHandler;\n        this.config = config;\n    }\n    onDocumentLoaded() {\n        // we need to track window resizing\n        this.previousWindowWidth = window.innerWidth;\n        window.addEventListener('resize', (event) => {\n            const newWindowWidth = window.innerWidth;\n            let reRenderRequired = false;\n            if (newWindowWidth < this.previousWindowWidth) {\n                if (this.previousWindowWidth > SCREEN_WIDTH_LARGE) {\n                    if (newWindowWidth <= SCREEN_WIDTH_LARGE) {\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                        avLogger(`window reduced and is now smaller or equal to large`);\n                    }\n                }\n                if (this.previousWindowWidth > SCREEN_WIDTH_MEDIUM) {\n                    if (newWindowWidth <= SCREEN_WIDTH_MEDIUM) {\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                        avLogger(`window reduced and is now smaller or equal to medium`);\n                    }\n                }\n                if (this.previousWindowWidth > SCREEN_WIDTH_SMALL) {\n                    if (newWindowWidth <= SCREEN_WIDTH_SMALL) {\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                        avLogger(`window reduced and is now smaller or equal to small`);\n                    }\n                }\n            }\n            else {\n                if (this.previousWindowWidth <= SCREEN_WIDTH_SMALL) {\n                    if (newWindowWidth > SCREEN_WIDTH_SMALL) {\n                        // need to re-render carousel\n                        avLogger(`window increased and is now larger than small`);\n                        reRenderRequired = true;\n                    }\n                }\n                if (this.previousWindowWidth <= SCREEN_WIDTH_MEDIUM) {\n                    if (newWindowWidth > SCREEN_WIDTH_MEDIUM) {\n                        avLogger(`window increased and is now larger than medium`);\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                    }\n                }\n                if (this.previousWindowWidth <= SCREEN_WIDTH_LARGE) {\n                    if (newWindowWidth > SCREEN_WIDTH_LARGE) {\n                        avLogger(`window increased and is now larger than large`);\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                    }\n                }\n            }\n            this.previousWindowWidth = newWindowWidth;\n            if (this.lastRenderedContainer && this.lastRenderedCollection && this.lastRenderedCollectionName && reRenderRequired) {\n                this.setDisplayElementsForCollectionInContainer(this.lastRenderedContainer, this.lastRenderedCollectionName, this.lastRenderedCollection);\n            }\n        });\n    }\n    createDisplayElementForCollectionItem(collectionName, item) {\n        const dataSourceKeyId = this.view.getDataSourceKeyId();\n        const resultDataKeyId = this.view.getIdForItemInNamedCollection(collectionName, item);\n        const canDeleteItem = this.view.hasPermissionToDeleteItemInNamedCollection(collectionName, item);\n        avLogger(`view ${this.view.getName()}: creating carousel item`);\n        avLogger(item);\n        const collectionConfig = this.view.getCollectionUIConfig();\n        let childEl = document.createElement(collectionConfig.resultsElementType);\n        browserUtil.addRemoveClasses(childEl, collectionConfig.resultsClasses);\n        browserUtil.addAttributes(childEl, collectionConfig.resultsElementAttributes);\n        childEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n        childEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n        if (collectionConfig.detail.background) {\n            let backgroundEl = document.createElement(collectionConfig.detail.background.elementType);\n            browserUtil.addRemoveClasses(backgroundEl, collectionConfig.detail.background.elementClasses);\n            browserUtil.addAttributes(backgroundEl, collectionConfig.detail.background.elementAttributes);\n            backgroundEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n            backgroundEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n            childEl.appendChild(backgroundEl);\n            this.view.renderBackgroundForItemInNamedCollection(backgroundEl, collectionName, item);\n        }\n        // the content may be structured\n        let textEl = childEl;\n        if (collectionConfig.detail.containerClasses) {\n            let contentEl = document.createElement('div');\n            browserUtil.addRemoveClasses(contentEl, collectionConfig.detail.containerClasses);\n            contentEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n            contentEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n            textEl = document.createElement(collectionConfig.detail.textElementType);\n            browserUtil.addRemoveClasses(textEl, collectionConfig.detail.textElementClasses);\n            textEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n            textEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n            contentEl.appendChild(textEl);\n            if (collectionConfig.extraActions || collectionConfig.detail.delete) {\n                let buttonsEl = document.createElement(this.config.actionContainer.elementType);\n                browserUtil.addRemoveClasses(buttonsEl, this.config.actionContainer.elementClasses);\n                contentEl.appendChild(buttonsEl);\n                if (collectionConfig.extraActions) {\n                    collectionConfig.extraActions.forEach((extraAction) => {\n                        const hasPermissionForAction = this.view.hasPermissionToActionItemInNamedCollection(extraAction.name, collectionName, item);\n                        if (hasPermissionForAction) {\n                            let action = document.createElement('button');\n                            action.setAttribute('type', 'button');\n                            browserUtil.addRemoveClasses(action, extraAction.buttonClasses);\n                            browserUtil.addAttributes(action, extraAction.attributes);\n                            if (extraAction.buttonText) {\n                                action.innerHTML = extraAction.buttonText;\n                            }\n                            if (extraAction.iconClasses) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, extraAction.iconClasses);\n                                iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                                iconEl.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                                action.appendChild(iconEl);\n                            }\n                            action.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                            action.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                            action.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                            action.addEventListener('click', (event) => {\n                                event.preventDefault();\n                                event.stopPropagation();\n                                this.eventHandler.eventActionClicked(event);\n                            });\n                            buttonsEl.appendChild(action);\n                        }\n                    });\n                }\n                if (collectionConfig.detail.delete && collectionConfig && canDeleteItem) {\n                    let deleteButtonEl = document.createElement('button');\n                    deleteButtonEl.setAttribute('type', 'button');\n                    browserUtil.addRemoveClasses(deleteButtonEl, collectionConfig.detail.delete.buttonClasses);\n                    browserUtil.addAttributes(deleteButtonEl, collectionConfig.detail.delete.attributes);\n                    if (collectionConfig.detail.delete.buttonText) {\n                        deleteButtonEl.innerHTML = collectionConfig.detail.delete.buttonText;\n                    }\n                    if (collectionConfig.detail.delete.iconClasses) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, collectionConfig.detail.delete.iconClasses);\n                        iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                        iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                        deleteButtonEl.appendChild(iconEl);\n                    }\n                    deleteButtonEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                    deleteButtonEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                    deleteButtonEl.addEventListener('click', (event) => {\n                        event.preventDefault();\n                        event.stopPropagation();\n                        this.eventHandler.eventDeleteClickItem(event);\n                    });\n                    buttonsEl.appendChild(deleteButtonEl);\n                }\n            }\n            childEl.appendChild(contentEl);\n            if (collectionConfig.detail.drag) {\n                childEl.setAttribute('draggable', 'true');\n                childEl.addEventListener('dragstart', this.eventHandler.eventStartDrag);\n            }\n            // add selection actions\n            if (collectionConfig.detail.select) {\n                childEl.addEventListener('click', this.eventHandler.eventClickItem);\n            }\n        }\n        // add the key ids for selection\n        textEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n        textEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n        const displayText = this.view.renderDisplayForItemInNamedCollection(textEl, collectionName, item);\n        // add icons\n        // add modifiers for patient state\n        if (collectionConfig.modifiers) {\n            const modifier = this.view.getModifierForItemInNamedCollection(collectionName, item);\n            const secondModifier = this.view.getSecondaryModifierForItemInNamedCollection(collectionName, item);\n            switch (modifier) {\n                case Modifier.normal: {\n                    avLogger(`view ${this.view.getName()}: normal item`);\n                    browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.normal);\n                    if (collectionConfig.icons && collectionConfig.icons.normal) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.normal);\n                        iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                        iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.normal, false);\n                            browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.warning, true);\n                            if (collectionConfig.icons && collectionConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.warning);\n                                iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (collectionConfig.icons && collectionConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.active);\n                                iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                        }\n                    }\n                    break;\n                }\n                case Modifier.active: {\n                    avLogger(`view ${this.view.getName()}: active item`);\n                    browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.active);\n                    if (collectionConfig.icons && collectionConfig.icons.active) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.active);\n                        iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                        iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.active, false);\n                            browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.warning, true);\n                            if (collectionConfig.icons && collectionConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.warning);\n                                iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n                case Modifier.inactive: {\n                    avLogger(`view ${this.view.getName()}: inactive item`);\n                    browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.inactive);\n                    if (collectionConfig.icons && collectionConfig.icons.inactive) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.inactive);\n                        iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                        iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            if (collectionConfig.icons && collectionConfig.icons.warning) {\n                                browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.inactive, false);\n                                browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.warning, true);\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.warning);\n                                iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (collectionConfig.icons && collectionConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.active);\n                                iconEl.setAttribute(collectionConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, collectionConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n        return childEl;\n    }\n    setDisplayElementsForCollectionInContainer(containerEl, collectionName, newState) {\n        avLogger(`view ${this.view.getName()}: creating carousel results`);\n        avLogger(newState);\n        // remove the previous items from list\n        browserUtil.removeAllChildren(containerEl);\n        // need to break the items up by row, and the last row is active (assumes increasing time order)\n        const numberOfResults = newState.length;\n        // number of items per row depends on view port\n        let itemsPerRow = this.config.itemsPerRow.xlarge;\n        if (window.innerWidth <= SCREEN_WIDTH_LARGE) {\n            itemsPerRow = this.config.itemsPerRow.large;\n        }\n        if (window.innerWidth <= SCREEN_WIDTH_MEDIUM) {\n            itemsPerRow = this.config.itemsPerRow.medium;\n        }\n        if (window.innerWidth <= SCREEN_WIDTH_SMALL) {\n            itemsPerRow = this.config.itemsPerRow.small;\n        }\n        const numberOfRows = Math.ceil(numberOfResults / itemsPerRow);\n        avLogger(`view ${this.view.getName()}: creating carousel with number of results per row of ${itemsPerRow} with rows ${numberOfRows}`);\n        for (let rowIndex = 0; rowIndex < numberOfRows; rowIndex++) {\n            // create the row\n            let rowContainerEl = document.createElement(this.config.rowContainer.elementType);\n            browserUtil.addRemoveClasses(rowContainerEl, this.config.rowContainer.elementClasses);\n            browserUtil.addAttributes(rowContainerEl, this.config.rowContainer.elementAttributes);\n            //browserUtil.addAttributes(rowContainerEl,[{name:'style',value:'display:block'}]);\n            let rowEl = document.createElement(this.config.row.elementType);\n            browserUtil.addRemoveClasses(rowEl, this.config.row.elementClasses);\n            browserUtil.addAttributes(rowEl, this.config.row.elementAttributes);\n            rowContainerEl.appendChild(rowEl);\n            // if this the active row?\n            if (((rowIndex === 0) && this.config.activeRowPosition === RowPosition.first) ||\n                ((rowIndex === (numberOfRows - 1)) && this.config.activeRowPosition === RowPosition.last)) {\n                browserUtil.addRemoveClasses(rowContainerEl, this.config.activeRow.elementClasses);\n                browserUtil.addAttributes(rowContainerEl, this.config.activeRow.elementAttributes);\n            }\n            let itemIndex = rowIndex * itemsPerRow;\n            while (itemIndex < ((rowIndex + 1) * itemsPerRow) && (itemIndex < numberOfResults)) {\n                avLogger(`rowIndex ${rowIndex} item index ${itemIndex}`);\n                const item = newState[itemIndex];\n                let itemContainerEl = rowEl;\n                if (this.config.multipleItemsPerRowContainer) {\n                    itemContainerEl = document.createElement(this.config.multipleItemsPerRowContainer.elementType);\n                    browserUtil.addRemoveClasses(itemContainerEl, this.config.multipleItemsPerRowContainer.elementClasses);\n                    browserUtil.addAttributes(itemContainerEl, this.config.multipleItemsPerRowContainer.elementAttributes);\n                    rowEl.appendChild(itemContainerEl);\n                }\n                const itemEl = this.createDisplayElementForCollectionItem(collectionName, item);\n                itemContainerEl.appendChild(itemEl);\n                itemIndex++;\n            }\n            containerEl.appendChild(rowContainerEl);\n        }\n        $('[data-toggle=\"tooltip\"]').tooltip();\n        this.lastRenderedContainer = containerEl;\n        this.lastRenderedCollectionName = collectionName;\n        this.lastRenderedCollection = newState;\n    }\n}\n//# sourceMappingURL=CarouselViewRenderer.js.map","import debug from 'debug';\nimport { EXTRA_ACTION_ATTRIBUTE_NAME, Modifier, RowPosition, SCREEN_WIDTH_LARGE, SCREEN_WIDTH_MEDIUM, SCREEN_WIDTH_SMALL } from \"../../ConfigurationTypes\";\nimport browserUtil from \"../../../util/BrowserUtil\";\nimport { ContextualInformationHelper, TogglePlacement } from \"../../context/ContextualInformationHelper\";\nconst logger = debug('carousel-renderer');\nexport class CarouselViewRendererUsingContext {\n    constructor(view, eventHandler, config) {\n        this.lastRenderedContainer = null;\n        this.lastRenderedCollectionName = null;\n        this.lastRenderedCollection = null;\n        this.previousWindowWidth = 0;\n        this.view = view;\n        this.eventHandler = eventHandler;\n        this.config = config;\n    }\n    onDocumentLoaded() {\n        // we need to track window resizing\n        this.previousWindowWidth = window.innerWidth;\n        window.addEventListener('resize', (event) => {\n            const newWindowWidth = window.innerWidth;\n            let reRenderRequired = false;\n            if (newWindowWidth < this.previousWindowWidth) {\n                if (this.previousWindowWidth > SCREEN_WIDTH_LARGE) {\n                    if (newWindowWidth <= SCREEN_WIDTH_LARGE) {\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                        logger(`window reduced and is now smaller or equal to large`);\n                    }\n                }\n                if (this.previousWindowWidth > SCREEN_WIDTH_MEDIUM) {\n                    if (newWindowWidth <= SCREEN_WIDTH_MEDIUM) {\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                        logger(`window reduced and is now smaller or equal to medium`);\n                    }\n                }\n                if (this.previousWindowWidth > SCREEN_WIDTH_SMALL) {\n                    if (newWindowWidth <= SCREEN_WIDTH_SMALL) {\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                        logger(`window reduced and is now smaller or equal to small`);\n                    }\n                }\n            }\n            else {\n                if (this.previousWindowWidth <= SCREEN_WIDTH_SMALL) {\n                    if (newWindowWidth > SCREEN_WIDTH_SMALL) {\n                        // need to re-render carousel\n                        logger(`window increased and is now larger than small`);\n                        reRenderRequired = true;\n                    }\n                }\n                if (this.previousWindowWidth <= SCREEN_WIDTH_MEDIUM) {\n                    if (newWindowWidth > SCREEN_WIDTH_MEDIUM) {\n                        logger(`window increased and is now larger than medium`);\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                    }\n                }\n                if (this.previousWindowWidth <= SCREEN_WIDTH_LARGE) {\n                    if (newWindowWidth > SCREEN_WIDTH_LARGE) {\n                        logger(`window increased and is now larger than large`);\n                        // need to re-render carousel\n                        reRenderRequired = true;\n                    }\n                }\n            }\n            this.previousWindowWidth = newWindowWidth;\n            if (this.lastRenderedContainer && this.lastRenderedCollection && this.lastRenderedCollectionName && reRenderRequired) {\n                this.setDisplayElementsForCollectionInContainer(this.lastRenderedContainer, this.lastRenderedCollectionName, this.lastRenderedCollection);\n            }\n        });\n    }\n    createDisplayElementForCollectionItem(collectionName, item) {\n        const canDeleteItem = this.view.hasPermissionToDeleteItemInNamedCollection(collectionName, item);\n        logger(`view ${this.view.getName()}: creating carousel item`);\n        logger(item);\n        const collectionConfig = this.view.getCollectionUIConfig();\n        let childEl = document.createElement(collectionConfig.resultsElementType);\n        browserUtil.addRemoveClasses(childEl, collectionConfig.resultsClasses);\n        browserUtil.addAttributes(childEl, collectionConfig.resultsElementAttributes);\n        if (collectionConfig.detail.background) {\n            let backgroundEl = document.createElement(collectionConfig.detail.background.elementType);\n            browserUtil.addRemoveClasses(backgroundEl, collectionConfig.detail.background.elementClasses);\n            browserUtil.addAttributes(backgroundEl, collectionConfig.detail.background.elementAttributes);\n            childEl.appendChild(backgroundEl);\n            this.view.renderBackgroundForItemInNamedCollection(backgroundEl, collectionName, item);\n        }\n        // the content may be structured\n        let textEl = childEl;\n        if (collectionConfig.detail.containerClasses) {\n            let contentEl = document.createElement('div');\n            browserUtil.addRemoveClasses(contentEl, collectionConfig.detail.containerClasses);\n            textEl = document.createElement(collectionConfig.detail.textElementType);\n            browserUtil.addRemoveClasses(textEl, collectionConfig.detail.textElementClasses);\n            contentEl.appendChild(textEl);\n            if (collectionConfig.extraActions || collectionConfig.detail.delete) {\n                let buttonsEl = document.createElement(this.config.actionContainer.elementType);\n                browserUtil.addRemoveClasses(buttonsEl, this.config.actionContainer.elementClasses);\n                contentEl.appendChild(buttonsEl);\n                if (collectionConfig.extraActions) {\n                    collectionConfig.extraActions.forEach((extraAction) => {\n                        const hasPermissionForAction = this.view.hasPermissionToActionItemInNamedCollection(extraAction.name, collectionName, item);\n                        if (hasPermissionForAction) {\n                            let action = document.createElement('button');\n                            action.setAttribute('type', 'button');\n                            browserUtil.addRemoveClasses(action, extraAction.buttonClasses);\n                            browserUtil.addAttributes(action, extraAction.attributes);\n                            if (extraAction.buttonText) {\n                                action.innerHTML = extraAction.buttonText;\n                            }\n                            if (extraAction.iconClasses) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, extraAction.iconClasses);\n                                iconEl.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                                action.appendChild(iconEl);\n                            }\n                            action.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                            action.addEventListener('click', (event) => {\n                                event.preventDefault();\n                                event.stopPropagation();\n                                this.eventHandler.eventActionClicked(event);\n                            });\n                            buttonsEl.appendChild(action);\n                        }\n                    });\n                }\n                if (collectionConfig.detail.delete && collectionConfig && canDeleteItem) {\n                    let deleteButtonEl = document.createElement('button');\n                    deleteButtonEl.setAttribute('type', 'button');\n                    browserUtil.addRemoveClasses(deleteButtonEl, collectionConfig.detail.delete.buttonClasses);\n                    browserUtil.addAttributes(deleteButtonEl, collectionConfig.detail.delete.attributes);\n                    if (collectionConfig.detail.delete.buttonText) {\n                        deleteButtonEl.innerHTML = collectionConfig.detail.delete.buttonText;\n                    }\n                    if (collectionConfig.detail.delete.iconClasses) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, collectionConfig.detail.delete.iconClasses);\n                        deleteButtonEl.appendChild(iconEl);\n                    }\n                    deleteButtonEl.addEventListener('click', (event) => {\n                        event.preventDefault();\n                        event.stopPropagation();\n                        this.eventHandler.eventDeleteClickItem(event);\n                    });\n                    buttonsEl.appendChild(deleteButtonEl);\n                }\n            }\n            childEl.appendChild(contentEl);\n            if (collectionConfig.detail.drag) {\n                childEl.setAttribute('draggable', 'true');\n                childEl.addEventListener('dragstart', this.eventHandler.eventStartDrag);\n            }\n            // add selection actions\n            if (collectionConfig.detail.select) {\n                childEl.addEventListener('click', this.eventHandler.eventClickItem);\n            }\n        }\n        const displayText = this.view.renderDisplayForItemInNamedCollection(textEl, collectionName, item);\n        // add icons\n        // add modifiers for patient state\n        if (collectionConfig.modifiers) {\n            const modifier = this.view.getModifierForItemInNamedCollection(collectionName, item);\n            const secondModifier = this.view.getSecondaryModifierForItemInNamedCollection(collectionName, item);\n            switch (modifier) {\n                case Modifier.normal: {\n                    logger(`view ${this.view.getName()}: normal item`);\n                    browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.normal);\n                    if (collectionConfig.icons && collectionConfig.icons.normal) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.normal);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.normal, false);\n                            browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.warning, true);\n                            if (collectionConfig.icons && collectionConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.warning);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (collectionConfig.icons && collectionConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.active);\n                                textEl.appendChild(iconEl);\n                            }\n                        }\n                    }\n                    break;\n                }\n                case Modifier.active: {\n                    logger(`view ${this.view.getName()}: active item`);\n                    browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.active);\n                    if (collectionConfig.icons && collectionConfig.icons.active) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.active);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.active, false);\n                            browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.warning, true);\n                            if (collectionConfig.icons && collectionConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.warning);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n                case Modifier.inactive: {\n                    logger(`view ${this.view.getName()}: inactive item`);\n                    browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.inactive);\n                    if (collectionConfig.icons && collectionConfig.icons.inactive) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.inactive);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            if (collectionConfig.icons && collectionConfig.icons.warning) {\n                                browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.inactive, false);\n                                browserUtil.addRemoveClasses(childEl, collectionConfig.modifiers.warning, true);\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.warning);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (collectionConfig.icons && collectionConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, collectionConfig.icons.active);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n        return childEl;\n    }\n    setDisplayElementsForCollectionInContainer(containerEl, collectionName, newState) {\n        logger(`view ${this.view.getName()}: creating carousel results`);\n        logger(newState);\n        // remove the previous items from list\n        browserUtil.removeAllChildren(containerEl);\n        // need to break the items up by row, and the last row is active (assumes increasing time order)\n        const numberOfResults = newState.length;\n        // number of items per row depends on view port\n        let itemsPerRow = this.config.itemsPerRow.xlarge;\n        if (window.innerWidth <= SCREEN_WIDTH_LARGE) {\n            itemsPerRow = this.config.itemsPerRow.large;\n        }\n        if (window.innerWidth <= SCREEN_WIDTH_MEDIUM) {\n            itemsPerRow = this.config.itemsPerRow.medium;\n        }\n        if (window.innerWidth <= SCREEN_WIDTH_SMALL) {\n            itemsPerRow = this.config.itemsPerRow.small;\n        }\n        const numberOfRows = Math.ceil(numberOfResults / itemsPerRow);\n        logger(`view ${this.view.getName()}: creating carousel with number of results per row of ${itemsPerRow} with rows ${numberOfRows}`);\n        for (let rowIndex = 0; rowIndex < numberOfRows; rowIndex++) {\n            // create the row\n            let rowContainerEl = document.createElement(this.config.rowContainer.elementType);\n            browserUtil.addRemoveClasses(rowContainerEl, this.config.rowContainer.elementClasses);\n            browserUtil.addAttributes(rowContainerEl, this.config.rowContainer.elementAttributes);\n            //browserUtil.addAttributes(rowContainerEl,[{name:'style',value:'display:block'}]);\n            let rowEl = document.createElement(this.config.row.elementType);\n            browserUtil.addRemoveClasses(rowEl, this.config.row.elementClasses);\n            browserUtil.addAttributes(rowEl, this.config.row.elementAttributes);\n            rowContainerEl.appendChild(rowEl);\n            // if this the active row?\n            if (((rowIndex === 0) && this.config.activeRowPosition === RowPosition.first) ||\n                ((rowIndex === (numberOfRows - 1)) && this.config.activeRowPosition === RowPosition.last)) {\n                browserUtil.addRemoveClasses(rowContainerEl, this.config.activeRow.elementClasses);\n                browserUtil.addAttributes(rowContainerEl, this.config.activeRow.elementAttributes);\n            }\n            let itemIndex = rowIndex * itemsPerRow;\n            while (itemIndex < ((rowIndex + 1) * itemsPerRow) && (itemIndex < numberOfResults)) {\n                logger(`rowIndex ${rowIndex} item index ${itemIndex}`);\n                const item = newState[itemIndex];\n                let itemContainerEl = rowEl;\n                if (this.config.multipleItemsPerRowContainer) {\n                    itemContainerEl = document.createElement(this.config.multipleItemsPerRowContainer.elementType);\n                    browserUtil.addRemoveClasses(itemContainerEl, this.config.multipleItemsPerRowContainer.elementClasses);\n                    browserUtil.addAttributes(itemContainerEl, this.config.multipleItemsPerRowContainer.elementAttributes);\n                    rowEl.appendChild(itemContainerEl);\n                }\n                const itemEl = this.createDisplayElementForCollectionItem(collectionName, item);\n                itemContainerEl.appendChild(itemEl);\n                ContextualInformationHelper.getInstance().addContextToElement(this.view.getName(), collectionName, item, itemEl, true, TogglePlacement.bottom);\n                itemEl.addEventListener('contextmenu', ContextualInformationHelper.getInstance().handleContextMenu);\n                itemIndex++;\n            }\n            containerEl.appendChild(rowContainerEl);\n        }\n        $('[data-toggle=\"tooltip\"]').tooltip();\n        this.lastRenderedContainer = containerEl;\n        this.lastRenderedCollectionName = collectionName;\n        this.lastRenderedCollection = newState;\n    }\n}\n//# sourceMappingURL=CarouselViewRendererUsingContext.js.map","import { BasicFormImplementation } from \"../../form/BasicFormImplementation\";\nimport { FormEventType } from \"../../form/FormListener\";\nimport debug from 'debug';\nconst logger = debug('form-detail-view-renderer');\nexport class FormDetailViewRenderer {\n    constructor(containerId, objDef, permissionChecker) {\n        this.form = null;\n        this.containerId = containerId;\n        this.objDef = objDef;\n        this.currentItem = {};\n        this.isNewItem = false;\n        this.forwarder = null;\n        this.view = null;\n        this.permissionChecker = permissionChecker;\n    }\n    hasActionPermission(actionName, from, item) {\n        throw new Error(\"Method not implemented.\");\n    }\n    setEventForwarder(forwarder) {\n        this.forwarder = forwarder;\n    }\n    setView(view) {\n        this.view = view;\n    }\n    onDocumentLoaded() {\n        this.form = new BasicFormImplementation(this.containerId, this.objDef);\n        this.form.addFormListener(this);\n    }\n    reset() {\n        if (this.form)\n            this.form.reset();\n    }\n    initialise(displayOrder, hasDeleteButton, hideModifierFields) {\n        if (this.form)\n            this.form.initialise(displayOrder, hasDeleteButton, hideModifierFields);\n    }\n    displayItemReadonly(dataObject) {\n        this.isNewItem = false;\n        if (this.form)\n            this.form.displayOnly(dataObject);\n    }\n    getName() {\n        return this.objDef.displayName;\n    }\n    setContainedBy(container) {\n        throw new Error(\"Method not implemented.\");\n    }\n    addEventListener(listener) {\n        throw new Error(\"Method not implemented.\");\n    }\n    hasChanged() {\n        let result = false;\n        if (this.form)\n            result = this.form.hasChanged();\n        return result;\n    }\n    getUIConfig() {\n        throw new Error(\"Method not implemented.\");\n    }\n    getDataSourceKeyId() {\n        throw new Error(\"Method not implemented.\");\n    }\n    clearDisplay() {\n        this.isNewItem = false;\n        if (this.form)\n            this.form.reset();\n    }\n    clearReadOnly() {\n        if (this.form)\n            this.form.clearReadOnly();\n    }\n    setReadOnly() {\n        if (this.form)\n            this.form.setReadOnly();\n    }\n    isReadOnly() {\n        let result = false;\n        if (this.form)\n            result = this.form.isReadOnly();\n        return result;\n    }\n    createItem() {\n        var _a;\n        this.currentItem = {};\n        logger(`Creating new item with form ${(_a = this.form) === null || _a === void 0 ? void 0 : _a.getId()}`);\n        if (this.form) {\n            this.isNewItem = true;\n            this.currentItem = this.form.startCreateNew();\n        }\n        $('[data-toggle=\"tooltip\"]').tooltip();\n        return this.currentItem;\n    }\n    displayItem(dataObj) {\n        this.currentItem = dataObj;\n        this.isNewItem = false;\n        if (this.hasPermissionToUpdateItem(dataObj)) {\n            if (this.form)\n                this.form.startUpdate(dataObj);\n        }\n        else {\n            if (this.form)\n                this.form.displayOnly(dataObj);\n        }\n        $('[data-toggle=\"tooltip\"]').tooltip();\n    }\n    hidden() {\n        if (this.form)\n            this.form.setIsVisible(false);\n    }\n    show() {\n        if (this.form)\n            this.form.setIsVisible(true);\n    }\n    render() {\n        this.displayItem(this.currentItem);\n        this.show();\n    }\n    hasPermissionToDeleteItem(item) {\n        return this.permissionChecker.hasPermissionToDeleteItem(item);\n    }\n    hasPermissionToUpdateItem(item) {\n        return this.permissionChecker.hasPermissionToUpdateItem(item);\n    }\n    getForm() {\n        return this.form;\n    }\n    handleActionItem(actionName, selectedItem) {\n    }\n    isDisplayingItem(dataObj) {\n        let result = false;\n        if (this.currentItem) {\n            if (this.form) {\n                result = this.form.isDisplayingItem(dataObj);\n            }\n        }\n        return result;\n    }\n    formChanged(event, formValues) {\n        var _a;\n        // catch form events for user leaving the form\n        switch (event.eventType) {\n            case (FormEventType.CANCELLING): {\n                logger(`Form is cancelling`);\n                break;\n            }\n            case (FormEventType.CANCELLING_ABORTED): {\n                logger(`Form is cancelling - aborted`);\n                break;\n            }\n            case (FormEventType.CANCELLED): {\n                logger(`Form is cancelled - resetting`);\n                this.currentItem = formValues;\n                if (this.forwarder && this.view)\n                    this.forwarder.cancelled(this.view, this.currentItem);\n                break;\n            }\n            case (FormEventType.DELETING): {\n                logger(`Form is deleting`);\n                break;\n            }\n            case (FormEventType.DELETE_ABORTED): {\n                logger(`Form is deleting - aborted`);\n                break;\n            }\n            case (FormEventType.DELETED): {\n                logger(`Form is deleted - resetting`);\n                this.currentItem = formValues;\n                if (this.forwarder && this.view)\n                    this.forwarder.deletedItem(this.view, this.currentItem);\n                // user is deleting the object, will become invisible\n                break;\n            }\n            case (FormEventType.SAVE_ABORTED): {\n                logger(`Form save cancelled`);\n                break;\n            }\n            case (FormEventType.SAVED): {\n                logger(`Form is saved with data`);\n                if (this.form) {\n                    let formattedObj = (_a = this.form) === null || _a === void 0 ? void 0 : _a.getFormattedDataObject();\n                    if (this.isNewItem) {\n                        if (this.forwarder && this.view)\n                            this.forwarder.saveNewItem(this.view, formattedObj);\n                    }\n                    else {\n                        if (this.forwarder && this.view)\n                            this.forwarder.updateItem(this.view, formattedObj);\n                    }\n                    this.isNewItem = false;\n                }\n                break;\n            }\n            case (FormEventType.SAVING): {\n                logger(`Form is saving`);\n                break;\n            }\n        }\n        return false;\n    }\n    getItemDescription(from, item) {\n        return \"\";\n    }\n    getItemId(from, item) {\n        return \"\";\n    }\n}\n//# sourceMappingURL=FormDetailViewRenderer.js.map","import browserUtil from \"../../../util/BrowserUtil\";\nimport { EXTRA_ACTION_ATTRIBUTE_NAME, Modifier } from \"../../ConfigurationTypes\";\nimport debug from 'debug';\nconst avLogger = debug('list-view-renderer');\nexport class ListViewRenderer {\n    constructor(view, eventHandler) {\n        this.view = view;\n        this.eventHandler = eventHandler;\n    }\n    createDisplayElementForCollectionItem(collectionName, item) {\n        const canDeleteItem = this.view.hasPermissionToDeleteItemInNamedCollection(collectionName, item);\n        const uiConfig = this.view.getCollectionUIConfig();\n        const dataSourceKeyId = this.view.getDataSourceKeyId();\n        avLogger(`view ${this.view.getName()}: creating List item`);\n        avLogger(item);\n        const resultDataKeyId = this.view.getIdForItemInNamedCollection(collectionName, item);\n        let childEl = document.createElement(uiConfig.resultsElementType);\n        browserUtil.addRemoveClasses(childEl, uiConfig.resultsClasses);\n        browserUtil.addAttributes(childEl, uiConfig.resultsElementAttributes);\n        childEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n        childEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n        // the content may be structured\n        let textEl = childEl;\n        if (uiConfig.detail.containerClasses) {\n            let contentEl = document.createElement('div');\n            browserUtil.addRemoveClasses(contentEl, uiConfig.detail.containerClasses);\n            contentEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n            contentEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n            textEl = document.createElement(uiConfig.detail.textElementType);\n            browserUtil.addRemoveClasses(textEl, uiConfig.detail.textElementClasses);\n            textEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n            textEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n            contentEl.appendChild(textEl);\n            if (uiConfig.detail.background) {\n                let imgEl = document.createElement(uiConfig.detail.background.elementType);\n                browserUtil.addRemoveClasses(imgEl, uiConfig.detail.background.elementClasses);\n                imgEl.setAttribute('src', this.view.getBackgroundImageForItemInNamedCollection(collectionName, item));\n                childEl.appendChild(imgEl);\n            }\n            let buttonsEl = document.createElement('div');\n            contentEl.appendChild(buttonsEl);\n            if (uiConfig.detail.badge) {\n                const badgeValue = this.view.getBadgeValueForItemInNamedCollection(collectionName, item);\n                if (badgeValue > 0) {\n                    let badgeEl = document.createElement(uiConfig.detail.badge.elementType);\n                    browserUtil.addRemoveClasses(badgeEl, uiConfig.detail.badge.elementClasses);\n                    browserUtil.addAttributes(badgeEl, uiConfig.detail.badge.elementAttributes);\n                    badgeEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                    badgeEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                    buttonsEl.appendChild(badgeEl);\n                    badgeEl.innerHTML = `&nbsp;&nbsp;&nbsp;${badgeValue}&nbsp;&nbsp;&nbsp;`;\n                }\n            }\n            if (uiConfig.extraActions) {\n                uiConfig.extraActions.forEach((extraAction) => {\n                    const hasPermissionForAction = this.view.hasPermissionToActionItemInNamedCollection(extraAction.name, collectionName, item);\n                    if (hasPermissionForAction) {\n                        let action = document.createElement('button');\n                        action.setAttribute('type', 'button');\n                        browserUtil.addRemoveClasses(action, extraAction.buttonClasses);\n                        browserUtil.addAttributes(action, extraAction.attributes);\n                        if (extraAction.buttonText) {\n                            action.innerHTML = extraAction.buttonText;\n                        }\n                        if (extraAction.iconClasses) {\n                            let iconEl = document.createElement('i');\n                            browserUtil.addRemoveClasses(iconEl, extraAction.iconClasses);\n                            iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                            iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                            iconEl.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                            action.appendChild(iconEl);\n                        }\n                        action.setAttribute(uiConfig.keyId, resultDataKeyId);\n                        action.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                        action.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                        action.addEventListener('click', (event) => {\n                            event.preventDefault();\n                            event.stopPropagation();\n                            this.eventHandler.eventActionClicked(event);\n                        });\n                        buttonsEl.appendChild(action);\n                    }\n                });\n            }\n            if (uiConfig.detail.delete && canDeleteItem) {\n                let deleteButtonEl = document.createElement('button');\n                deleteButtonEl.setAttribute('type', 'button');\n                browserUtil.addRemoveClasses(deleteButtonEl, uiConfig.detail.delete.buttonClasses);\n                browserUtil.addAttributes(deleteButtonEl, uiConfig.detail.delete.attributes);\n                if (uiConfig.detail.delete.buttonText) {\n                    deleteButtonEl.innerHTML = uiConfig.detail.delete.buttonText;\n                }\n                if (uiConfig.detail.delete.iconClasses) {\n                    let iconEl = document.createElement('i');\n                    browserUtil.addRemoveClasses(iconEl, uiConfig.detail.delete.iconClasses);\n                    iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                    iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                    deleteButtonEl.appendChild(iconEl);\n                }\n                deleteButtonEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                deleteButtonEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                deleteButtonEl.addEventListener('click', (event) => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.eventHandler.eventDeleteClickItem(event);\n                });\n                buttonsEl.appendChild(deleteButtonEl);\n            }\n            childEl.appendChild(contentEl);\n            if (uiConfig.detail.drag) {\n                childEl.setAttribute('draggable', 'true');\n                childEl.addEventListener('dragstart', this.eventHandler.eventStartDrag);\n            }\n            // add selection actions\n            if (uiConfig.detail.select) {\n                childEl.addEventListener('click', this.eventHandler.eventClickItem);\n            }\n        }\n        // add the key ids for selection\n        textEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n        textEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n        this.view.renderDisplayForItemInNamedCollection(textEl, collectionName, item);\n        // add icons\n        if (uiConfig.detail.icons) {\n            const icons = uiConfig.detail.icons(collectionName, item);\n            icons.forEach((icon) => {\n                let iconEl = document.createElement('i');\n                browserUtil.addRemoveClasses(iconEl, icon);\n                iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                textEl.appendChild(iconEl);\n            });\n        }\n        // add modifiers for patient state\n        if (uiConfig.modifiers) {\n            const modifier = this.view.getModifierForItemInNamedCollection(collectionName, item);\n            const secondModifier = this.view.getSecondaryModifierForItemInNamedCollection(collectionName, item);\n            switch (modifier) {\n                case Modifier.normal: {\n                    avLogger(`view ${this.view.getName()}: normal item`);\n                    browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.normal);\n                    if (uiConfig.icons && uiConfig.icons.normal) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, uiConfig.icons.normal);\n                        iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                        iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.normal, false);\n                            browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.warning, true);\n                            if (uiConfig.icons && uiConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.warning);\n                                iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (uiConfig.icons && uiConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.active);\n                                iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                        }\n                    }\n                    break;\n                }\n                case Modifier.active: {\n                    avLogger(`view ${this.view.getName()}: active item`);\n                    browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.active);\n                    if (uiConfig.icons && uiConfig.icons.active) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, uiConfig.icons.active);\n                        iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                        iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.active, false);\n                            browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.warning, true);\n                            if (uiConfig.icons && uiConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.warning);\n                                iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n                case Modifier.inactive: {\n                    avLogger(`view ${this.view.getName()}: inactive item`);\n                    browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.inactive);\n                    if (uiConfig.icons && uiConfig.icons.inactive) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, uiConfig.icons.inactive);\n                        iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                        iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            if (uiConfig.icons && uiConfig.icons.warning) {\n                                browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.inactive, false);\n                                browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.warning, true);\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.warning);\n                                iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (uiConfig.icons && uiConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.active);\n                                iconEl.setAttribute(uiConfig.keyId, resultDataKeyId);\n                                iconEl.setAttribute(dataSourceKeyId, uiConfig.viewConfig.dataSourceId);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n        return childEl;\n    }\n    setDisplayElementsForCollectionInContainer(containerEl, collectionName, newState) {\n        avLogger(`view ${this.view.getName()}: creating Results`);\n        avLogger(newState);\n        // remove the previous items from list\n        browserUtil.removeAllChildren(containerEl);\n        // add the new children\n        newState.map((item, index) => {\n            const childEl = this.createDisplayElementForCollectionItem(collectionName, item);\n            // add draggable actions\n            avLogger(`view ${this.view.getName()}:  Adding child ${this.view.getIdForItemInNamedCollection(collectionName, item)}`);\n            containerEl.appendChild(childEl);\n        });\n        $('[data-toggle=\"tooltip\"]').tooltip();\n    }\n    onDocumentLoaded() {\n    }\n}\n//# sourceMappingURL=ListViewRenderer.js.map","import debug from 'debug';\nimport { EXTRA_ACTION_ATTRIBUTE_NAME, Modifier } from \"../../ConfigurationTypes\";\nimport browserUtil from \"../../../util/BrowserUtil\";\nimport { ContextualInformationHelper } from \"../../context/ContextualInformationHelper\";\nconst avLogger = debug('list-view-renderer-with-context');\nexport class ListViewRendererUsingContext {\n    constructor(view, eventHandler) {\n        this.view = view;\n        this.eventHandler = eventHandler;\n    }\n    createDisplayElementForCollectionItem(collectionName, item) {\n        const canDeleteItem = this.view.hasPermissionToDeleteItemInNamedCollection(collectionName, item);\n        const uiConfig = this.view.getCollectionUIConfig();\n        avLogger(`view ${this.view.getName()}: creating List item`);\n        avLogger(item);\n        const resultDataKeyId = this.view.getIdForItemInNamedCollection(collectionName, item);\n        let childEl = document.createElement(uiConfig.resultsElementType);\n        browserUtil.addRemoveClasses(childEl, uiConfig.resultsClasses);\n        browserUtil.addAttributes(childEl, uiConfig.resultsElementAttributes);\n        // the content may be structured\n        let textEl = childEl;\n        if (uiConfig.detail.containerClasses) {\n            let contentEl = document.createElement('div');\n            browserUtil.addRemoveClasses(contentEl, uiConfig.detail.containerClasses);\n            textEl = document.createElement(uiConfig.detail.textElementType);\n            browserUtil.addRemoveClasses(textEl, uiConfig.detail.textElementClasses);\n            contentEl.appendChild(textEl);\n            if (uiConfig.detail.background) {\n                let imgEl = document.createElement(uiConfig.detail.background.elementType);\n                browserUtil.addRemoveClasses(imgEl, uiConfig.detail.background.elementClasses);\n                imgEl.setAttribute('src', this.view.getBackgroundImageForItemInNamedCollection(collectionName, item));\n                childEl.appendChild(imgEl);\n            }\n            let buttonsEl = document.createElement('div');\n            contentEl.appendChild(buttonsEl);\n            if (uiConfig.detail.badge) {\n                const badgeValue = this.view.getBadgeValueForItemInNamedCollection(collectionName, item);\n                if (badgeValue > 0) {\n                    let badgeEl = document.createElement(uiConfig.detail.badge.elementType);\n                    browserUtil.addRemoveClasses(badgeEl, uiConfig.detail.badge.elementClasses);\n                    browserUtil.addAttributes(badgeEl, uiConfig.detail.badge.elementAttributes);\n                    buttonsEl.appendChild(badgeEl);\n                    badgeEl.innerHTML = `&nbsp;&nbsp;&nbsp;${badgeValue}&nbsp;&nbsp;&nbsp;`;\n                }\n            }\n            if (uiConfig.extraActions) {\n                uiConfig.extraActions.forEach((extraAction) => {\n                    const hasPermissionForAction = this.view.hasPermissionToActionItemInNamedCollection(extraAction.name, collectionName, item);\n                    if (hasPermissionForAction) {\n                        let action = document.createElement('button');\n                        action.setAttribute('type', 'button');\n                        browserUtil.addRemoveClasses(action, extraAction.buttonClasses);\n                        browserUtil.addAttributes(action, extraAction.attributes);\n                        if (extraAction.buttonText) {\n                            action.innerHTML = extraAction.buttonText;\n                        }\n                        if (extraAction.iconClasses) {\n                            let iconEl = document.createElement('i');\n                            browserUtil.addRemoveClasses(iconEl, extraAction.iconClasses);\n                            iconEl.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                            action.appendChild(iconEl);\n                        }\n                        action.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                        action.addEventListener('click', (event) => {\n                            event.preventDefault();\n                            event.stopPropagation();\n                            this.eventHandler.eventActionClicked(event);\n                        });\n                        buttonsEl.appendChild(action);\n                    }\n                });\n            }\n            if (uiConfig.detail.delete && canDeleteItem) {\n                let deleteButtonEl = document.createElement('button');\n                deleteButtonEl.setAttribute('type', 'button');\n                browserUtil.addRemoveClasses(deleteButtonEl, uiConfig.detail.delete.buttonClasses);\n                browserUtil.addAttributes(deleteButtonEl, uiConfig.detail.delete.attributes);\n                if (uiConfig.detail.delete.buttonText) {\n                    deleteButtonEl.innerHTML = uiConfig.detail.delete.buttonText;\n                }\n                if (uiConfig.detail.delete.iconClasses) {\n                    let iconEl = document.createElement('i');\n                    browserUtil.addRemoveClasses(iconEl, uiConfig.detail.delete.iconClasses);\n                    deleteButtonEl.appendChild(iconEl);\n                }\n                deleteButtonEl.addEventListener('click', (event) => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.eventHandler.eventDeleteClickItem(event);\n                });\n                buttonsEl.appendChild(deleteButtonEl);\n            }\n            childEl.appendChild(contentEl);\n            if (uiConfig.detail.drag) {\n                childEl.setAttribute('draggable', 'true');\n                childEl.addEventListener('dragstart', this.eventHandler.eventStartDrag);\n            }\n            // add selection actions\n            if (uiConfig.detail.select) {\n                childEl.addEventListener('click', this.eventHandler.eventClickItem);\n            }\n        }\n        // add the key ids for selection\n        this.view.renderDisplayForItemInNamedCollection(textEl, collectionName, item);\n        // add icons\n        if (uiConfig.detail.icons) {\n            const icons = uiConfig.detail.icons(collectionName, item);\n            icons.forEach((icon) => {\n                let iconEl = document.createElement('i');\n                browserUtil.addRemoveClasses(iconEl, icon);\n                textEl.appendChild(iconEl);\n            });\n        }\n        // add modifiers for patient state\n        if (uiConfig.modifiers) {\n            const modifier = this.view.getModifierForItemInNamedCollection(collectionName, item);\n            const secondModifier = this.view.getSecondaryModifierForItemInNamedCollection(collectionName, item);\n            switch (modifier) {\n                case Modifier.normal: {\n                    avLogger(`view ${this.view.getName()}: normal item`);\n                    browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.normal);\n                    if (uiConfig.icons && uiConfig.icons.normal) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, uiConfig.icons.normal);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.normal, false);\n                            browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.warning, true);\n                            if (uiConfig.icons && uiConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.warning);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (uiConfig.icons && uiConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.active);\n                                textEl.appendChild(iconEl);\n                            }\n                        }\n                    }\n                    break;\n                }\n                case Modifier.active: {\n                    avLogger(`view ${this.view.getName()}: active item`);\n                    browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.active);\n                    if (uiConfig.icons && uiConfig.icons.active) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, uiConfig.icons.active);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.active, false);\n                            browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.warning, true);\n                            if (uiConfig.icons && uiConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.warning);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n                case Modifier.inactive: {\n                    avLogger(`view ${this.view.getName()}: inactive item`);\n                    browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.inactive);\n                    if (uiConfig.icons && uiConfig.icons.inactive) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, uiConfig.icons.inactive);\n                        textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            if (uiConfig.icons && uiConfig.icons.warning) {\n                                browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.inactive, false);\n                                browserUtil.addRemoveClasses(childEl, uiConfig.modifiers.warning, true);\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.warning);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (uiConfig.icons && uiConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.active);\n                                textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n        return childEl;\n    }\n    setDisplayElementsForCollectionInContainer(containerEl, collectionName, newState) {\n        avLogger(`view ${this.view.getName()}: creating Results`);\n        avLogger(newState);\n        // remove the previous items from list\n        browserUtil.removeAllChildren(containerEl);\n        // add the new children\n        newState.map((item, index) => {\n            const childEl = this.createDisplayElementForCollectionItem(collectionName, item);\n            // add draggable actions\n            avLogger(`view ${this.view.getName()}:  Adding child ${this.view.getIdForItemInNamedCollection(collectionName, item)}`);\n            containerEl.appendChild(childEl);\n            ContextualInformationHelper.getInstance().addContextToElement(this.view.getName(), collectionName, item, childEl, true);\n            childEl.addEventListener('contextmenu', ContextualInformationHelper.getInstance().handleContextMenu);\n        });\n        $('[data-toggle=\"tooltip\"]').tooltip();\n    }\n    onDocumentLoaded() {\n    }\n}\n//# sourceMappingURL=ListViewRendererUsingContext.js.map","import { EXTRA_ACTION_ATTRIBUTE_NAME, Modifier } from \"../../ConfigurationTypes\";\nimport browserUtil from \"../../../util/BrowserUtil\";\nimport debug from \"debug\";\nimport { ContextualInformationHelper } from \"../../context/ContextualInformationHelper\";\nconst logger = debug('tabular-view-renderer-with-context');\nexport class TabularViewRendererUsingContext {\n    constructor(view, eventHandler, tableConfig) {\n        this.view = view;\n        this.eventHandler = eventHandler;\n        this.tableConfig = tableConfig;\n    }\n    createDisplayElementForCollectionItem(collectionName, item) {\n        const canDeleteItem = this.view.hasPermissionToDeleteItemInNamedCollection(collectionName, item);\n        const uiConfig = this.view.getCollectionUIConfig();\n        logger(`view ${this.view.getName()}: creating table row item`);\n        logger(item);\n        const resultDataKeyId = this.view.getIdForItemInNamedCollection(collectionName, item);\n        let tableRowEl = document.createElement(uiConfig.resultsElementType);\n        browserUtil.addRemoveClasses(tableRowEl, uiConfig.resultsClasses);\n        browserUtil.addAttributes(tableRowEl, uiConfig.resultsElementAttributes);\n        // we need to build the row from the displayed item values using the renderer if present\n        this.tableConfig.columns.forEach((column, index) => {\n            const fieldValue = column.getValue(column, item[column.field.id]);\n            let tdEl = document.createElement('td');\n            browserUtil.addRemoveClasses(tdEl, column.elementClasses);\n            browserUtil.addAttributes(tdEl, column.elementAttributes);\n            if ((index + 1) === this.tableConfig.itemDetailColumn) {\n                // this column is different and can have many components\n                // the content may be structured\n                if (uiConfig.detail.containerClasses) {\n                    let contentEl = document.createElement('div');\n                    browserUtil.addRemoveClasses(contentEl, uiConfig.detail.containerClasses);\n                    let textEl = document.createElement(uiConfig.detail.textElementType);\n                    browserUtil.addRemoveClasses(textEl, uiConfig.detail.textElementClasses);\n                    // add the key ids for selection\n                    this.view.renderDisplayForItemInNamedCollection(textEl, collectionName, item);\n                    contentEl.appendChild(textEl);\n                    if (uiConfig.detail.background) {\n                        let imgEl = document.createElement(uiConfig.detail.background.elementType);\n                        browserUtil.addRemoveClasses(imgEl, uiConfig.detail.background.elementClasses);\n                        imgEl.setAttribute('src', this.view.getBackgroundImageForItemInNamedCollection(collectionName, item));\n                        contentEl.appendChild(imgEl);\n                    }\n                    if (uiConfig.detail.badge) {\n                        const badgeValue = this.view.getBadgeValueForItemInNamedCollection(collectionName, item);\n                        if (badgeValue > 0) {\n                            let badgeEl = document.createElement(uiConfig.detail.badge.elementType);\n                            browserUtil.addRemoveClasses(badgeEl, uiConfig.detail.badge.elementClasses);\n                            browserUtil.addAttributes(badgeEl, uiConfig.detail.badge.elementAttributes);\n                            contentEl.appendChild(badgeEl);\n                            badgeEl.innerHTML = `&nbsp;&nbsp;&nbsp;${badgeValue}&nbsp;&nbsp;&nbsp;`;\n                        }\n                    }\n                    // add icons\n                    if (uiConfig.detail.icons) {\n                        const icons = uiConfig.detail.icons(collectionName, item);\n                        icons.forEach((icon) => {\n                            let iconEl = document.createElement('i');\n                            browserUtil.addRemoveClasses(iconEl, icon);\n                            contentEl.appendChild(iconEl);\n                        });\n                    }\n                    tdEl.appendChild(contentEl);\n                }\n            }\n            else {\n                tdEl.innerHTML = fieldValue;\n            }\n            tableRowEl.appendChild(tdEl);\n        });\n        // we add an extra column for any actions or the delete function\n        if (this.tableConfig.actionColumn) {\n            // create the extra table column\n            let tdEl = document.createElement('td');\n            browserUtil.addRemoveClasses(tdEl, this.tableConfig.actionColumn.element.elementClasses);\n            browserUtil.addAttributes(tdEl, this.tableConfig.actionColumn.element.elementAttributes);\n            if (uiConfig.extraActions) {\n                uiConfig.extraActions.forEach((extraAction) => {\n                    const hasPermissionForAction = this.view.hasPermissionToActionItemInNamedCollection(extraAction.name, collectionName, item);\n                    if (hasPermissionForAction) {\n                        let action = document.createElement('button');\n                        action.setAttribute('type', 'button');\n                        browserUtil.addRemoveClasses(action, extraAction.buttonClasses);\n                        browserUtil.addAttributes(action, extraAction.attributes);\n                        if (extraAction.buttonText) {\n                            action.innerHTML = extraAction.buttonText;\n                        }\n                        if (extraAction.iconClasses) {\n                            let iconEl = document.createElement('i');\n                            browserUtil.addRemoveClasses(iconEl, extraAction.iconClasses);\n                            iconEl.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                            action.appendChild(iconEl);\n                        }\n                        action.setAttribute(EXTRA_ACTION_ATTRIBUTE_NAME, extraAction.name);\n                        action.addEventListener('click', (event) => {\n                            event.preventDefault();\n                            event.stopPropagation();\n                            this.eventHandler.eventActionClicked(event);\n                        });\n                        tdEl.appendChild(action);\n                    }\n                });\n            }\n            if (uiConfig.detail.delete && canDeleteItem) {\n                let deleteButtonEl = document.createElement('button');\n                deleteButtonEl.setAttribute('type', 'button');\n                browserUtil.addRemoveClasses(deleteButtonEl, uiConfig.detail.delete.buttonClasses);\n                browserUtil.addAttributes(deleteButtonEl, uiConfig.detail.delete.attributes);\n                if (uiConfig.detail.delete.buttonText) {\n                    deleteButtonEl.innerHTML = uiConfig.detail.delete.buttonText;\n                }\n                if (uiConfig.detail.delete.iconClasses) {\n                    let iconEl = document.createElement('i');\n                    browserUtil.addRemoveClasses(iconEl, uiConfig.detail.delete.iconClasses);\n                    deleteButtonEl.appendChild(iconEl);\n                }\n                deleteButtonEl.addEventListener('click', (event) => {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.eventHandler.eventDeleteClickItem(event);\n                });\n                tdEl.appendChild(deleteButtonEl);\n            }\n            tableRowEl.appendChild(tdEl);\n            if (uiConfig.detail.drag) {\n                tableRowEl.setAttribute('draggable', 'true');\n                tableRowEl.addEventListener('dragstart', this.eventHandler.eventStartDrag);\n            }\n            // add selection actions\n            if (uiConfig.detail.select) {\n                tableRowEl.addEventListener('click', this.eventHandler.eventClickItem);\n            }\n        }\n        // add modifiers for patient state\n        if (uiConfig.modifiers) {\n            const modifier = this.view.getModifierForItemInNamedCollection(collectionName, item);\n            const secondModifier = this.view.getSecondaryModifierForItemInNamedCollection(collectionName, item);\n            switch (modifier) {\n                case Modifier.normal: {\n                    logger(`view ${this.view.getName()}: normal item`);\n                    browserUtil.addRemoveClasses(tableRowEl, uiConfig.modifiers.normal);\n                    if (uiConfig.icons && uiConfig.icons.normal) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, uiConfig.icons.normal);\n                        //textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(tableRowEl, uiConfig.modifiers.normal, false);\n                            browserUtil.addRemoveClasses(tableRowEl, uiConfig.modifiers.warning, true);\n                            if (uiConfig.icons && uiConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.warning);\n                                //textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (uiConfig.icons && uiConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.active);\n                                //textEl.appendChild(iconEl);\n                            }\n                        }\n                    }\n                    break;\n                }\n                case Modifier.active: {\n                    logger(`view ${this.view.getName()}: active item`);\n                    browserUtil.addRemoveClasses(tableRowEl, uiConfig.modifiers.active);\n                    if (uiConfig.icons && uiConfig.icons.active) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, uiConfig.icons.active);\n                        //textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            browserUtil.addRemoveClasses(tableRowEl, uiConfig.modifiers.active, false);\n                            browserUtil.addRemoveClasses(tableRowEl, uiConfig.modifiers.warning, true);\n                            if (uiConfig.icons && uiConfig.icons.warning) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.warning);\n                                //textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n                case Modifier.inactive: {\n                    logger(`view ${this.view.getName()}: inactive item`);\n                    browserUtil.addRemoveClasses(tableRowEl, uiConfig.modifiers.inactive);\n                    if (uiConfig.icons && uiConfig.icons.inactive) {\n                        let iconEl = document.createElement('i');\n                        browserUtil.addRemoveClasses(iconEl, uiConfig.icons.inactive);\n                        //textEl.appendChild(iconEl);\n                    }\n                    switch (secondModifier) {\n                        case Modifier.warning: {\n                            if (uiConfig.icons && uiConfig.icons.warning) {\n                                browserUtil.addRemoveClasses(tableRowEl, uiConfig.modifiers.inactive, false);\n                                browserUtil.addRemoveClasses(tableRowEl, uiConfig.modifiers.warning, true);\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.warning);\n                                //textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                        case Modifier.active: {\n                            if (uiConfig.icons && uiConfig.icons.active) {\n                                let iconEl = document.createElement('i');\n                                browserUtil.addRemoveClasses(iconEl, uiConfig.icons.active);\n                                //textEl.appendChild(iconEl);\n                            }\n                            break;\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n        return tableRowEl;\n    }\n    onDocumentLoaded() {\n    }\n    setDisplayElementsForCollectionInContainer(containerEl, collectionName, newState) {\n        logger(`view ${this.view.getName()}: creating Results`);\n        logger(newState);\n        // remove the previous items from list\n        browserUtil.removeAllChildren(containerEl);\n        // create the table\n        let tableEl = document.createElement(this.tableConfig.table.elementType);\n        browserUtil.addRemoveClasses(tableEl, this.tableConfig.table.elementClasses);\n        browserUtil.addAttributes(tableEl, this.tableConfig.table.elementAttributes);\n        // create the headers\n        let tableHeaderEl = document.createElement(this.tableConfig.header.elementType);\n        browserUtil.addRemoveClasses(tableHeaderEl, this.tableConfig.header.elementClasses);\n        browserUtil.addAttributes(tableHeaderEl, this.tableConfig.header.elementAttributes);\n        // create the column headers\n        this.tableConfig.headerColumns.forEach((header) => {\n            let thEl = document.createElement(header.element.elementType);\n            browserUtil.addRemoveClasses(thEl, header.element.elementClasses);\n            browserUtil.addAttributes(thEl, header.element.elementAttributes);\n            if (header.element.innerHTML)\n                thEl.innerHTML = header.element.innerHTML;\n            tableHeaderEl.appendChild(thEl);\n        });\n        // create the action column header (if one)\n        if (this.tableConfig.actionColumn) {\n            let thEl = document.createElement(this.tableConfig.actionColumn.element.elementType);\n            browserUtil.addRemoveClasses(thEl, this.tableConfig.actionColumn.element.elementClasses);\n            browserUtil.addAttributes(thEl, this.tableConfig.actionColumn.element.elementAttributes);\n            if (this.tableConfig.actionColumn.element.innerHTML)\n                thEl.innerHTML = this.tableConfig.actionColumn.element.innerHTML;\n            tableHeaderEl.appendChild(thEl);\n        }\n        tableEl.appendChild(tableHeaderEl);\n        // create the table body\n        let tableBodyEl = document.createElement(this.tableConfig.body.elementType);\n        browserUtil.addRemoveClasses(tableBodyEl, this.tableConfig.body.elementClasses);\n        browserUtil.addAttributes(tableBodyEl, this.tableConfig.body.elementAttributes);\n        // add the new children\n        newState.map((item, index) => {\n            const childEl = this.createDisplayElementForCollectionItem(collectionName, item);\n            // add draggable actions\n            logger(`view ${this.view.getName()}:  Adding child ${this.view.getIdForItemInNamedCollection(collectionName, item)}`);\n            tableBodyEl.appendChild(childEl);\n            ContextualInformationHelper.getInstance().addContextToElement(this.view.getName(), collectionName, item, childEl, true);\n            childEl.addEventListener('contextmenu', ContextualInformationHelper.getInstance().handleContextMenu);\n        });\n        $('[data-toggle=\"tooltip\"]').tooltip();\n        tableEl.appendChild(tableBodyEl);\n        containerEl.appendChild(tableEl);\n    }\n}\n//# sourceMappingURL=TabularViewRendererUsingContext.js.map","export class BrowserUtil {\n    constructor() {\n    }\n    scrollSmoothToId(elementId) {\n        const element = document.getElementById(elementId);\n        if (element !== null) {\n            element.scrollIntoView({\n                block: 'start',\n                behavior: 'smooth',\n            });\n        }\n    }\n    scrollToBottomNow(element) {\n        if (element) {\n            element.scrollTop = element.scrollHeight - element.clientHeight + 100;\n        }\n    }\n    scrollToBottomSmooth(element) {\n        if (element) {\n            element.scrollIntoView({\n                behavior: 'smooth',\n            });\n            element.scrollTop = element.scrollHeight - element.clientHeight + 100;\n        }\n    }\n    scrollSmoothTo(element) {\n        element.scrollIntoView({\n            block: 'start',\n            behavior: 'smooth',\n        });\n    }\n    scrollTo(element) {\n        element.scrollIntoView({\n            block: 'start',\n        });\n    }\n    removeAllChildren(element) {\n        if (element && element.firstChild) {\n            while (element.firstChild) {\n                const lastChild = element.lastChild;\n                if (lastChild)\n                    element.removeChild(lastChild);\n            }\n        }\n    }\n    addRemoveClasses(element, classesText = undefined, isAdding = true) {\n        if (classesText) {\n            const classes = classesText.split(' ');\n            classes.forEach((classValue) => {\n                if (classValue.trim().length > 0) {\n                    if (isAdding) {\n                        element.classList.add(classValue);\n                    }\n                    else {\n                        element.classList.remove(classValue);\n                    }\n                }\n            });\n        }\n    }\n    addAttributes(element, attributes) {\n        if (attributes) {\n            attributes.forEach((attribute) => {\n                element.setAttribute(attribute.name, attribute.value);\n            });\n        }\n    }\n    removeAttributes(element, attributes) {\n        attributes.forEach((attribute) => {\n            element.removeAttribute(attribute);\n        });\n    }\n    allElementsFromPoint(x, y) {\n        var element, elements = [];\n        var old_visibility = [];\n        while (true) {\n            element = document.elementFromPoint(x, y);\n            if (!element || element === document.documentElement) {\n                break;\n            }\n            elements.push(element);\n            // @ts-ignore\n            old_visibility.push(element.style.visibility);\n            // @ts-ignore\n            element.style.visibility = 'hidden'; // Temporarily hide the element (without changing the layout)\n        }\n        for (var k = 0; k < elements.length; k++) {\n            // @ts-ignore\n            elements[k].style.visibility = old_visibility[k];\n        }\n        elements.reverse();\n        return elements;\n    }\n}\nconst browserUtil = new BrowserUtil();\nexport default browserUtil;\n//# sourceMappingURL=BrowserUtil.js.map","export function isSame(item1, item2) {\n    return (item1.id === item2.id);\n}\nexport function isSameMongo(item1, item2) {\n    return (item1._id === item2._id);\n}\nexport function isSameUsername(item1, item2) {\n    return (item1.username === item2.username);\n}\nexport function isSameRoom(item1, item2) {\n    return (item1.roomName === item2.roomName);\n}\n//# sourceMappingURL=EqualityFunctions.js.map","export { ComparisonType } from './framework/CommonTypes';\nexport { BasicFieldOperations } from './framework/model/BasicFieldOperations';\nexport { BasicObjectDefinitionFactory, FIELD_ModifiedOn, FIELD_CreatedOn, FIELD_ID, FIELD_CreatedBy, FIELD_CreatedBy_Desc, FIELD_CreatedOn_Desc, FIELD_ModifiedBy, FIELD_ModifiedBy_Desc, FIELD_ModifiedOn_Desc } from './framework/model/BasicObjectDefinitionFactory';\nexport { DataObjectController } from './framework/model/DataObjectController';\nexport { FieldType } from './framework/model/DataObjectTypeDefs';\nexport { ObjectDefinitionRegistry } from './framework/model/ObjectDefinitionRegistry';\n/* network utils */\nexport { ApiUtil } from './framework/network/ApiUtil';\nexport { DownloadManager } from './framework/network/DownloadManager';\nexport { RequestType, queueType } from './framework/network/Types';\n/* notifications */\nexport { NotificationType, NotificationManager } from './framework/notification/NotificationManager';\n/* Security Manager */\nexport { SecurityManager } from './framework/security/SecurityManager';\nexport { ChatManager } from './framework/socket/ChatManager';\nexport { NotificationController } from './framework/socket/NotificationController';\nexport { SocketManager } from './framework/socket/SocketManager';\nexport { Priority, InviteType } from './framework/socket/Types';\n/* state management */\nexport { AbstractStateManager } from './framework/state/AbstractStateManager';\nexport { AggregateStateManager } from './framework/state/AggregateStateManager';\nexport { AsyncStateManagerWrapper } from './framework/state/AsyncStateManagerWrapper';\nexport { BrowserStorageStateManager } from './framework/state/BrowserStorageStateManager';\nexport { EncryptedBrowserStorageStateManager } from './framework/state/EncryptedBrowserStorageStateManager';\nexport { EncryptedIndexedDBStateManager } from './framework/state/EncryptedIndexedDBStateManager';\nexport { GraphQLApiStateManager } from './framework/state/GraphQLApiStateManager';\nexport { IndexedDBStateManager } from './framework/state/IndexedDBStateManager';\nexport { RESTApiStateManager } from './framework/state/RESTApiStateManager';\nexport { MemoryBufferStateManager } from './framework/state/MemoryBufferStateManager';\nexport { StateManagerType } from './framework/state/StateManager';\n/* ui */\nexport { jsxCreateFragment, jsxCreateElement } from './framework/jsx/JSXParser';\nexport { Modifier, KeyType, SidebarLocation, RowPosition } from './framework/ui/ConfigurationTypes';\nexport { AlertType } from './framework/ui/alert/AlertListener';\nexport { AlertManager } from './framework/ui/alert/AlertManager';\nexport { BlockedUserView } from './framework/ui/chat/BlockedUserView';\nexport { ChatLogDetailView } from './framework/ui/chat/ChatLogDetailView';\nexport { ChatLogsView } from './framework/ui/chat/ChatLogsView';\nexport { ChatRoomsSidebar } from './framework/ui/chat/ChatRoomsSidebar';\nexport { STATE_NAMES, DRAGGABLE, VIEW_NAME } from './framework/ui/chat/ChatTypes';\nexport { FavouriteUserView } from './framework/ui/chat/FavouriteUserView';\nexport { UserSearchSidebar } from './framework/ui/chat/UserSearchSidebar';\nexport { UserSearchView } from './framework/ui/chat/UserSearchView';\nexport { SidebarViewContainer } from './framework/ui/container/SidebarViewContainer';\nexport { ContextualInformationHelper } from './framework/ui/context/ContextualInformationHelper';\nexport { UIFieldType, defaultGetValue, FormMode } from './framework/ui/form/FormUITypeDefs';\nexport { FormEventType } from './framework/ui/form/FormListener';\nexport { AbstractForm } from './framework/ui/form/AbstractForm';\nexport { FormElementFactory } from './framework/ui/form/factory/FormElementFactory';\nexport { BasicFormImplementation } from './framework/ui/form/BasicFormImplementation';\nexport { ConditionResponse } from './framework/ui/form/validation/ValidationTypeDefs';\nexport { ValidationManager } from './framework/ui/form/validation/ValidationManager';\nexport { BootstrapFormConfigHelper } from './framework/ui/helper/BootstrapFormConfigHelper';\nexport { BootstrapTableConfigHelper } from './framework/ui/helper/BootstrapTableConfigHelper';\nexport { LimitedChoiceTextRenderer } from './framework/ui/helper/LimitedChoiceTextRenderer';\nexport { LinkedCollectionDetailController } from './framework/ui/helper/LinkedCollectionDetailController';\nexport { RBGFieldOperations } from './framework/ui/helper/RBGFieldOperations';\nexport { SimpleValueDataSource } from './framework/ui/helper/SimpleValueDataSource';\nexport { AbstractView } from './framework/ui/view/implementation/AbstractView';\nexport { AbstractCollectionView } from './framework/ui/view/implementation/AbstractCollectionView';\nexport { AbstractStatefulCollectionView } from './framework/ui/view/implementation/AbstractStatefulCollectionView';\nexport { DefaultPermissionChecker } from './framework/ui/view/implementation/DefaultPermissionChecker';\nexport { DetailViewImplementation } from './framework/ui/view/implementation/DetailViewImplementation';\nexport { CarouselViewRenderer } from './framework/ui/view/renderer/CarouselViewRenderer';\nexport { CarouselViewRendererUsingContext } from './framework/ui/view/renderer/CarouselViewRendererUsingContext';\nexport { FormDetailViewRenderer } from './framework/ui/view/renderer/FormDetailViewRenderer';\nexport { ListViewRenderer } from './framework/ui/view/renderer/ListViewRenderer';\nexport { ListViewRendererUsingContext } from './framework/ui/view/renderer/ListViewRendererUsingContext';\nexport { TabularViewRendererUsingContext } from './framework/ui/view/renderer/TabularViewRendererUsingContext';\nexport { ViewListenerForwarder } from './framework/ui/view/delegate/ViewListenerForwarder';\nexport { DetailViewListenerForwarder } from './framework/ui/view/delegate/DetailViewListenerForwarder';\nexport { CollectionViewListenerForwarder } from './framework/ui/view/delegate/CollectionViewListenerForwarder';\nexport { CollectionViewEventHandlerDelegate } from './framework/ui/view/delegate/CollectionViewEventHandlerDelegate';\nexport { CollectionViewEventHandlerDelegateUsingContext } from './framework/ui/view/delegate/CollectionViewEventHandlerDelegateUsingContext';\n//# sourceMappingURL=index.js.map","var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn-bd\": \"./node_modules/moment/locale/bn-bd.js\",\n\t\"./bn-bd.js\": \"./node_modules/moment/locale/bn-bd.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-in\": \"./node_modules/moment/locale/en-in.js\",\n\t\"./en-in.js\": \"./node_modules/moment/locale/en-in.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-sg\": \"./node_modules/moment/locale/en-sg.js\",\n\t\"./en-sg.js\": \"./node_modules/moment/locale/en-sg.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-mx\": \"./node_modules/moment/locale/es-mx.js\",\n\t\"./es-mx.js\": \"./node_modules/moment/locale/es-mx.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fil\": \"./node_modules/moment/locale/fil.js\",\n\t\"./fil.js\": \"./node_modules/moment/locale/fil.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"./node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"./node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-deva\": \"./node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-deva.js\": \"./node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./oc-lnc\": \"./node_modules/moment/locale/oc-lnc.js\",\n\t\"./oc-lnc.js\": \"./node_modules/moment/locale/oc-lnc.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tk\": \"./node_modules/moment/locale/tk.js\",\n\t\"./tk.js\": \"./node_modules/moment/locale/tk.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-mo\": \"./node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-mo.js\": \"./node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","var map = {\n\t\"./af\": \"../../ui-framework/node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"../../ui-framework/node_modules/moment/locale/af.js\",\n\t\"./ar\": \"../../ui-framework/node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"../../ui-framework/node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"../../ui-framework/node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"../../ui-framework/node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"../../ui-framework/node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"../../ui-framework/node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"../../ui-framework/node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"../../ui-framework/node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"../../ui-framework/node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"../../ui-framework/node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"../../ui-framework/node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"../../ui-framework/node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"../../ui-framework/node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"../../ui-framework/node_modules/moment/locale/ar.js\",\n\t\"./az\": \"../../ui-framework/node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"../../ui-framework/node_modules/moment/locale/az.js\",\n\t\"./be\": \"../../ui-framework/node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"../../ui-framework/node_modules/moment/locale/be.js\",\n\t\"./bg\": \"../../ui-framework/node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"../../ui-framework/node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"../../ui-framework/node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"../../ui-framework/node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"../../ui-framework/node_modules/moment/locale/bn.js\",\n\t\"./bn-bd\": \"../../ui-framework/node_modules/moment/locale/bn-bd.js\",\n\t\"./bn-bd.js\": \"../../ui-framework/node_modules/moment/locale/bn-bd.js\",\n\t\"./bn.js\": \"../../ui-framework/node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"../../ui-framework/node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"../../ui-framework/node_modules/moment/locale/bo.js\",\n\t\"./br\": \"../../ui-framework/node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"../../ui-framework/node_modules/moment/locale/br.js\",\n\t\"./bs\": \"../../ui-framework/node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"../../ui-framework/node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"../../ui-framework/node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"../../ui-framework/node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"../../ui-framework/node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"../../ui-framework/node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"../../ui-framework/node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"../../ui-framework/node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"../../ui-framework/node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"../../ui-framework/node_modules/moment/locale/cy.js\",\n\t\"./da\": \"../../ui-framework/node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"../../ui-framework/node_modules/moment/locale/da.js\",\n\t\"./de\": \"../../ui-framework/node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"../../ui-framework/node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"../../ui-framework/node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"../../ui-framework/node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"../../ui-framework/node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"../../ui-framework/node_modules/moment/locale/de.js\",\n\t\"./dv\": \"../../ui-framework/node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"../../ui-framework/node_modules/moment/locale/dv.js\",\n\t\"./el\": \"../../ui-framework/node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"../../ui-framework/node_modules/moment/locale/el.js\",\n\t\"./en-au\": \"../../ui-framework/node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"../../ui-framework/node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"../../ui-framework/node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"../../ui-framework/node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"../../ui-framework/node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"../../ui-framework/node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"../../ui-framework/node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"../../ui-framework/node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"../../ui-framework/node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"../../ui-framework/node_modules/moment/locale/en-il.js\",\n\t\"./en-in\": \"../../ui-framework/node_modules/moment/locale/en-in.js\",\n\t\"./en-in.js\": \"../../ui-framework/node_modules/moment/locale/en-in.js\",\n\t\"./en-nz\": \"../../ui-framework/node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"../../ui-framework/node_modules/moment/locale/en-nz.js\",\n\t\"./en-sg\": \"../../ui-framework/node_modules/moment/locale/en-sg.js\",\n\t\"./en-sg.js\": \"../../ui-framework/node_modules/moment/locale/en-sg.js\",\n\t\"./eo\": \"../../ui-framework/node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"../../ui-framework/node_modules/moment/locale/eo.js\",\n\t\"./es\": \"../../ui-framework/node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"../../ui-framework/node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"../../ui-framework/node_modules/moment/locale/es-do.js\",\n\t\"./es-mx\": \"../../ui-framework/node_modules/moment/locale/es-mx.js\",\n\t\"./es-mx.js\": \"../../ui-framework/node_modules/moment/locale/es-mx.js\",\n\t\"./es-us\": \"../../ui-framework/node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"../../ui-framework/node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"../../ui-framework/node_modules/moment/locale/es.js\",\n\t\"./et\": \"../../ui-framework/node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"../../ui-framework/node_modules/moment/locale/et.js\",\n\t\"./eu\": \"../../ui-framework/node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"../../ui-framework/node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"../../ui-framework/node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"../../ui-framework/node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"../../ui-framework/node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"../../ui-framework/node_modules/moment/locale/fi.js\",\n\t\"./fil\": \"../../ui-framework/node_modules/moment/locale/fil.js\",\n\t\"./fil.js\": \"../../ui-framework/node_modules/moment/locale/fil.js\",\n\t\"./fo\": \"../../ui-framework/node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"../../ui-framework/node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"../../ui-framework/node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"../../ui-framework/node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"../../ui-framework/node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"../../ui-framework/node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"../../ui-framework/node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"../../ui-framework/node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"../../ui-framework/node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"../../ui-framework/node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"../../ui-framework/node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"../../ui-framework/node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"../../ui-framework/node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"../../ui-framework/node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"../../ui-framework/node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"../../ui-framework/node_modules/moment/locale/gl.js\",\n\t\"./gom-deva\": \"../../ui-framework/node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-deva.js\": \"../../ui-framework/node_modules/moment/locale/gom-deva.js\",\n\t\"./gom-latn\": \"../../ui-framework/node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"../../ui-framework/node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"../../ui-framework/node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"../../ui-framework/node_modules/moment/locale/gu.js\",\n\t\"./he\": \"../../ui-framework/node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"../../ui-framework/node_modules/moment/locale/he.js\",\n\t\"./hi\": \"../../ui-framework/node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"../../ui-framework/node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"../../ui-framework/node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"../../ui-framework/node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"../../ui-framework/node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"../../ui-framework/node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"../../ui-framework/node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"../../ui-framework/node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"../../ui-framework/node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"../../ui-framework/node_modules/moment/locale/id.js\",\n\t\"./is\": \"../../ui-framework/node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"../../ui-framework/node_modules/moment/locale/is.js\",\n\t\"./it\": \"../../ui-framework/node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"../../ui-framework/node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"../../ui-framework/node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"../../ui-framework/node_modules/moment/locale/it.js\",\n\t\"./ja\": \"../../ui-framework/node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"../../ui-framework/node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"../../ui-framework/node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"../../ui-framework/node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"../../ui-framework/node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"../../ui-framework/node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"../../ui-framework/node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"../../ui-framework/node_modules/moment/locale/kk.js\",\n\t\"./km\": \"../../ui-framework/node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"../../ui-framework/node_modules/moment/locale/km.js\",\n\t\"./kn\": \"../../ui-framework/node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"../../ui-framework/node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"../../ui-framework/node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"../../ui-framework/node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"../../ui-framework/node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"../../ui-framework/node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"../../ui-framework/node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"../../ui-framework/node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"../../ui-framework/node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"../../ui-framework/node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"../../ui-framework/node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"../../ui-framework/node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"../../ui-framework/node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"../../ui-framework/node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"../../ui-framework/node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"../../ui-framework/node_modules/moment/locale/lv.js\",\n\t\"./me\": \"../../ui-framework/node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"../../ui-framework/node_modules/moment/locale/me.js\",\n\t\"./mi\": \"../../ui-framework/node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"../../ui-framework/node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"../../ui-framework/node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"../../ui-framework/node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"../../ui-framework/node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"../../ui-framework/node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"../../ui-framework/node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"../../ui-framework/node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"../../ui-framework/node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"../../ui-framework/node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"../../ui-framework/node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"../../ui-framework/node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"../../ui-framework/node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"../../ui-framework/node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"../../ui-framework/node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"../../ui-framework/node_modules/moment/locale/mt.js\",\n\t\"./my\": \"../../ui-framework/node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"../../ui-framework/node_modules/moment/locale/my.js\",\n\t\"./nb\": \"../../ui-framework/node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"../../ui-framework/node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"../../ui-framework/node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"../../ui-framework/node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"../../ui-framework/node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"../../ui-framework/node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"../../ui-framework/node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"../../ui-framework/node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"../../ui-framework/node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"../../ui-framework/node_modules/moment/locale/nn.js\",\n\t\"./oc-lnc\": \"../../ui-framework/node_modules/moment/locale/oc-lnc.js\",\n\t\"./oc-lnc.js\": \"../../ui-framework/node_modules/moment/locale/oc-lnc.js\",\n\t\"./pa-in\": \"../../ui-framework/node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"../../ui-framework/node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"../../ui-framework/node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"../../ui-framework/node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"../../ui-framework/node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"../../ui-framework/node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"../../ui-framework/node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"../../ui-framework/node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"../../ui-framework/node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"../../ui-framework/node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"../../ui-framework/node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"../../ui-framework/node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"../../ui-framework/node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"../../ui-framework/node_modules/moment/locale/sd.js\",\n\t\"./se\": \"../../ui-framework/node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"../../ui-framework/node_modules/moment/locale/se.js\",\n\t\"./si\": \"../../ui-framework/node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"../../ui-framework/node_modules/moment/locale/si.js\",\n\t\"./sk\": \"../../ui-framework/node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"../../ui-framework/node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"../../ui-framework/node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"../../ui-framework/node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"../../ui-framework/node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"../../ui-framework/node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"../../ui-framework/node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"../../ui-framework/node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"../../ui-framework/node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"../../ui-framework/node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"../../ui-framework/node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"../../ui-framework/node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"../../ui-framework/node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"../../ui-framework/node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"../../ui-framework/node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"../../ui-framework/node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"../../ui-framework/node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"../../ui-framework/node_modules/moment/locale/ta.js\",\n\t\"./te\": \"../../ui-framework/node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"../../ui-framework/node_modules/moment/locale/te.js\",\n\t\"./tet\": \"../../ui-framework/node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"../../ui-framework/node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"../../ui-framework/node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"../../ui-framework/node_modules/moment/locale/tg.js\",\n\t\"./th\": \"../../ui-framework/node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"../../ui-framework/node_modules/moment/locale/th.js\",\n\t\"./tk\": \"../../ui-framework/node_modules/moment/locale/tk.js\",\n\t\"./tk.js\": \"../../ui-framework/node_modules/moment/locale/tk.js\",\n\t\"./tl-ph\": \"../../ui-framework/node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"../../ui-framework/node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"../../ui-framework/node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"../../ui-framework/node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"../../ui-framework/node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"../../ui-framework/node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"../../ui-framework/node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"../../ui-framework/node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"../../ui-framework/node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"../../ui-framework/node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"../../ui-framework/node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"../../ui-framework/node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"../../ui-framework/node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"../../ui-framework/node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"../../ui-framework/node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"../../ui-framework/node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"../../ui-framework/node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"../../ui-framework/node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"../../ui-framework/node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"../../ui-framework/node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"../../ui-framework/node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"../../ui-framework/node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"../../ui-framework/node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"../../ui-framework/node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"../../ui-framework/node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"../../ui-framework/node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"../../ui-framework/node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"../../ui-framework/node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"../../ui-framework/node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"../../ui-framework/node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"../../ui-framework/node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"../../ui-framework/node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-mo\": \"../../ui-framework/node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-mo.js\": \"../../ui-framework/node_modules/moment/locale/zh-mo.js\",\n\t\"./zh-tw\": \"../../ui-framework/node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"../../ui-framework/node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"../../ui-framework/node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"app\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktemplate_feo_react_babel\"] = self[\"webpackChunktemplate_feo_react_babel\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendor\"], () => (__webpack_require__(\"./src/App.tsx\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["Decorator","STATE_NAMES","users","chatLogs","exerciseTypes","workouts","recentUserSearches","patientSearch","recentPatientSearches","appointments","appointmentTypes","clinicConfig","API_Config","login","graphQL","NAVIGATION","showMyWorkouts","userSearchId","exerciseTypesId","chatId","workoutSummary","currentWorkout","logout","DRAGGABLE","typeUser","typeExerciseType","fromUserSearch","fromFavourites","fromExerciseTypes","VIEW_NAME","blockedUsers","chatLog","favouriteUsers","userSearch","exercises","VIEW_CONTAINER","exerciseTypeDetail","currentWorkoutDetail","exerciseDropZone","calendarControl","calendarDetail","BUTTON","createNewExerciseType","completeWorkout","INPUT","workoutName","CurrentWorkoutSidebarPrefs","id","expandedSize","location","SidebarLocation","right","CurrentWorkoutContainers","list","detail","ExerciseTypesSidebarPrefs","left","ExerciseTypesSidebarContainers","container","WorkoutSummarySidebarPrefs","bottom","WorkoutSummarySidebarContainers","Day","logger","debug","getInstance","AppointmentController","datePicker","calendar","constructor","handleNewDatePicked","setViewObjects","getColourForAppointment","appointment","onPageLoading","today","parseInt","moment","loadDate","event","canEdit","Controller","results","time","duration","startTimeHours","Math","startTimeMinutes","appointmentDuration","endTimeHours","endTimeMinutes","timeString","result","start","end","title","color","allDay","editable","resource","provider","inst","onAppointmentEditRequested","onAppointmentDeleting","onAppointmentDeleted","onAppointmentCreated","onAppointmentContext","onAppointmentUpdated","cLogger","cLoggerDetail","connectToApplication","restSM","RESTApiStateManager","stateName","serverURL","api","isActive","qlSM","GraphQLApiStateManager","apiURL","apis","findAll","create","destroy","update","find","data","idField","aggregateSM","memorySM","asyncREST","asyncQL","onDocumentLoaded","socketListerDelegate","SocketManager","chatManager","ChatManager","NotificationController","DownloadManager","getStateManager","getListenerName","isLoggedIn","getLoggedInUserId","loggedInUser","getLoggedInUsername","handleMessage","getCurrentUser","stateChangedItemAdded","stateChangedItemRemoved","stateChangedItemUpdated","stateChanged","handleShowChat","delete","addExerciseToCurrentWorkout","copyOfExercise","exerciseType","v4","addWorkoutExercisesToCurrentWorkout","workout","exercise","setupDataObjectDefinitions","exerciseTypeDefinition","ObjectDefinitionRegistry","BasicObjectDefinitionFactory","FieldType","name","value","workoutDefinition","exercisesFieldDefinition","KeyType","getServerAPIURL","window","filterResults","item1","item2","slLogger","handleDataChangedByAnotherUser","message","type","user","changeUser","_id","username","stateObj","NotificationManager","NotificationType","ChatRoomsSidebar","ContextualInformationHelper","SecurityManager","UserSearchSidebar","React","ReactDOM","setOptions","datepicker","eventcalendar","App","Component","thisEl","chatNavigationItem","handleShowUserSearch","bind","localStorage","render","componentDidMount","document","getElementById","setupUserSearchViews","setupChatViews","setupNavigationItemHandling","controls","display","dateFormat","dayNamesMin","showWeekNumbers","onChange","navigate","clickToCreate","dragTimeStep","dragToCreate","dragToMove","dragToResize","min","subtract","showControls","view","schedule","startDay","endDay","startTime","endTime","timeCellStep","timeLabelStep","invalidateEvent","invalid","recurring","repeat","weekDays","onSelectedDateChange","date","setVal","onEventCreated","onEventDelete","onEventDeleted","onEventRightClick","onEventUpdated","onEventDoubleClick","hideAllSideBars","chatSidebar","eventHide","userSearchSidebar","preventDefault","href","eventShow","roomName","chatView","selectChatRoom","countChanged","newCount","buffer","innerHTML","addEventListener","plugin","log","console","info","$","theme","themeVariant","element"],"sourceRoot":""}